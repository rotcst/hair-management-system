<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAKE IT HAIR Professional - 企业管理系统</title>
    
    <!-- 外部CSS文件 -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    
    <!-- 产品详情样式补充 -->
    <style>
        .product-info-grid {
            display: grid;
            gap: 10px;
        }
        
        .info-row {
            display: flex;
            align-items: flex-start;
            padding: 4px 0;
        }
        
        .info-row span:first-child {
            width: 100px;
            font-size: 0.9em;
            line-height: 1.4;
            flex-shrink: 0;
        }
        
        .info-row span:last-child {
            line-height: 1.4;
        }
        
        .notes-content {
            background: rgba(24,24,24,0.3);
            border: 1px solid var(--gold-30);
            border-radius: var(--border-radius);
            padding: 12px;
            color: var(--text-light);
            font-size: 0.9em;
            line-height: 1.4;
        }
        
        .text-light-pink {
            color: var(--light-pink);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- 侧边栏 -->
        <nav class="sidebar">
            <div class="p-20">
                <h2 class="text-center text-gold mb-20">MAKE IT HAIR</h2>
                
                <!-- 用户信息 -->
                <div class="mb-20 text-center">
                    <div id="user-info" class="text-light"></div>
                    <div id="current-time" class="text-muted" style="font-size: 0.8em;"></div>
                </div>
                
                <!-- 语言切换 -->
                <div class="mb-20 text-center">
                    <select id="language-selector" class="form-select" onchange="changeLanguage()">
                        <option value="zh">中文</option>
                        <option value="ko">한국어</option>
                    </select>
                </div>
                
                <!-- 菜单项 -->
                <ul class="sidebar-menu">
                    <li>
                        <a href="#" onclick="showContent('dashboard', event)" class="sidebar-menu-item">
                            <span data-i18n="dashboard">概况总览</span>
                        </a>
                    </li>
                    
                    <!-- 产品管理 -->
                    <li class="sidebar-menu-item has-submenu" onclick="toggleSidebarSubmenu('product')">
                        <span data-i18n="product-management">产品管理</span>
                        <ul id="sidebar-product-submenu" class="sidebar-submenu">
                            <li><a href="#" onclick="showContent('product-list', event)" class="sidebar-submenu-item" data-i18n="product-list">产品列表</a></li>
                            <li><a href="#" onclick="showContent('add-product', event)" class="sidebar-submenu-item" data-i18n="add-product">新增产品</a></li>
                            <li><a href="#" onclick="showContent('product-category', event)" class="sidebar-submenu-item" data-i18n="product-category">产品分类</a></li>
                        </ul>
                    </li>
                    
                    <!-- 沙龙管理 -->
                    <li class="sidebar-menu-item has-submenu" onclick="toggleSidebarSubmenu('salon')">
                        <span data-i18n="salon-management">沙龙管理</span>
                        <ul id="sidebar-salon-submenu" class="sidebar-submenu">
                            <li><a href="#" onclick="showContent('salon-info', event)" class="sidebar-submenu-item" data-i18n="salon-info">沙龙信息</a></li>
                            <li><a href="#" onclick="showContent('new-salon', event)" class="sidebar-submenu-item" data-i18n="new-salon">新增沙龙</a></li>
                        </ul>
                    </li>
                    
                    <!-- 职员管理 -->
                    <li class="sidebar-menu-item has-submenu" onclick="toggleSidebarSubmenu('employee')">
                        <span data-i18n="employee-management">职员管理</span>
                        <ul id="sidebar-employee-submenu" class="sidebar-submenu">
                            <li><a href="#" onclick="showContent('employee-list', event)" class="sidebar-submenu-item" data-i18n="employee-list">职员列表</a></li>
                            <li><a href="#" onclick="showContent('new-employee', event)" class="sidebar-submenu-item" data-i18n="new-employee">新增职员</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        
        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 移动端菜单按钮 -->
            <div class="hamburger-menu" onclick="toggleMobileMenu()" style="display: none;">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>
            
            <!-- 概况总览页面 -->
            <div id="dashboard" class="content-area active">
                <h1 data-i18n="dashboard">概况总览</h1>
                <p data-i18n="welcome-message">欢迎使用企业管理系统</p>
            </div>
            
            <!-- 产品列表页面 -->
            <div id="product-list" class="content-area">
                <h1 data-i18n="product-list">产品列表</h1>
                
                <div class="split-layout">
                    <!-- 左侧产品列表 -->
                    <div class="left-panel">
                        <div class="panel-header">
                            <h3 data-i18n="product-list">产品列表</h3>
                            <span id="product-count-text" class="text-gold font-bold">总计 0 个产品</span>
                        </div>
                        <div id="product-list-content" class="panel-content">
                            <div class="no-data">
                                <p data-i18n="no-products">暂无产品数据</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧产品详情 -->
                    <div id="product-detail-right" class="right-panel">
                        <div class="panel-header">
                            <h3 data-i18n="product-detail">产品详情</h3>
                            <div id="product-action-buttons">
                                <!-- 操作按钮将在这里动态生成 -->
                            </div>
                        </div>
                        <div id="product-detail-content" class="panel-content">
                            <!-- 产品详情将在这里动态生成 -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 新增产品页面 -->
            <div id="add-product" class="content-area">
                <h1 data-i18n="add-product">新增产品</h1>
                
                <form id="addProductForm" class="form">
                    <div class="form-group">
                        <label for="productName" class="form-label" data-i18n="product-name">产品名称：</label>
                        <input type="text" id="productName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="productCategory" class="form-label" data-i18n="product-category">产品分类：</label>
                        <select id="productCategory" class="form-select">
                            <option value="" data-i18n="please-select-category">请选择产品分类...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="purchasePrice" class="form-label" data-i18n="purchase-price">进货价：</label>
                        <input type="text" id="purchasePrice" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="wholesalePrice" class="form-label" data-i18n="wholesale-price">批发价：</label>
                        <input type="text" id="wholesalePrice" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="retailPrice" class="form-label" data-i18n="retail-price">零售价：</label>
                        <input type="text" id="retailPrice" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="isOnSale" class="form-checkbox" checked>
                            <span data-i18n="on-sale">在售</span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label for="productNotes" class="form-label" data-i18n="notes">备注：</label>
                        <textarea id="productNotes" class="form-control form-textarea"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary" data-i18n="add">添加</button>
                        <button type="button" class="btn btn-secondary ml-10" onclick="resetProductForm()" data-i18n="reset">重置</button>
                    </div>
                </form>
            </div>
            
            <!-- 产品分类页面 -->
            <div id="product-category" class="content-area">
                <h1 data-i18n="product-category">产品分类</h1>
                
                <div class="mb-20">
                    <button onclick="openCreateCategoryModal()" class="btn btn-primary" data-i18n="create-category">创建产品分类</button>
                </div>
                
                <div id="categoryList">
                    <div class="no-data">
                        <p data-i18n="no-categories">暂无产品分类</p>
                    </div>
                </div>
            </div>
            
            <!-- 其他页面... -->
            <div id="salon-info" class="content-area">
                <h1 data-i18n="salon-info">沙龙信息</h1>
                <p>沙龙管理功能</p>
            </div>
            
            <div id="new-salon" class="content-area">
                <h1 data-i18n="new-salon">新增沙龙</h1>
                <p>新增沙龙功能</p>
            </div>
            
            <div id="employee-list" class="content-area">
                <h1 data-i18n="employee-list">职员列表</h1>
                <p>职员列表功能</p>
            </div>
            
            <div id="new-employee" class="content-area">
                <h1 data-i18n="new-employee">新增职员</h1>
                <p>新增职员功能</p>
            </div>
        </main>
    </div>
    
    <!-- 新建分类模态框 -->
    <div id="createCategoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="create-product-category">创建产品分类</h2>
                <button type="button" class="modal-close" onclick="closeCreateCategoryModal()">&times;</button>
            </div>
            
            <form id="createCategoryForm">
                <div class="form-group">
                    <label for="categoryNameCN" class="form-label" data-i18n="category-name-cn">分类名称（中文）：</label>
                    <input type="text" id="categoryNameCN" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="categoryNameKO" class="form-label" data-i18n="category-name-ko">分类名称（韩文）：</label>
                    <input type="text" id="categoryNameKO" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="categoryDescription" class="form-label" data-i18n="category-description">分类描述：</label>
                    <textarea id="categoryDescription" class="form-control form-textarea"></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" onclick="closeCreateCategoryModal()" class="btn btn-secondary" data-i18n="cancel">取消</button>
                    <button type="button" onclick="submitCreateCategory()" class="btn btn-primary" data-i18n="create">创建</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- JavaScript模块加载 -->
    <script src="js/core/app.js"></script>
    <script src="js/modules/product.js"></script>
    
    <!-- 临时的国际化和工具函数 -->
    <script>
        // 简化的国际化系统
        const translations = {
            zh: {
                'dashboard': '概况总览',
                'product-management': '产品管理',
                'product-list': '产品列表',
                'add-product': '新增产品',
                'product-category': '产品分类',
                'salon-management': '沙龙管理',
                'salon-info': '沙龙信息',
                'new-salon': '新增沙龙',
                'employee-management': '职员管理',
                'employee-list': '职员列表',
                'new-employee': '新增职员',
                'welcome-message': '欢迎使用企业管理系统',
                'no-products': '暂无产品数据',
                'no-categories': '暂无产品分类',
                'product-name': '产品名称',
                'product-detail': '产品详情',
                'basic-info': '基本信息',
                'price-info': '价格信息',
                'notes': '备注',
                'edit-btn': '编辑',
                'delete': '删除',
                'purchase-price': '进货价',
                'wholesale-price': '批发价',
                'retail-price': '零售价',
                'brand-name': '品牌名称',
                'status': '状态',
                'on-sale': '在售',
                'add': '添加',
                'reset': '重置',
                'create-category': '创建产品分类',
                'create-product-category': '创建产品分类',
                'category-name-cn': '分类名称（中文）',
                'category-name-ko': '分类名称（韩文）',
                'category-description': '分类描述',
                'cancel': '取消',
                'create': '创建',
                'please-select-category': '请选择产品分类...'
            },
            ko: {
                'dashboard': '개요',
                'product-management': '제품 관리',
                'product-list': '제품 목록',
                'add-product': '제품 추가',
                'product-category': '제품 분류',
                'salon-management': '살롱 관리',
                'salon-info': '살롱 정보',
                'new-salon': '새 살롱',
                'employee-management': '직원 관리',
                'employee-list': '직원 목록',
                'new-employee': '새 직원',
                'welcome-message': '기업 관리 시스템에 오신 것을 환영합니다',
                'no-products': '제품 데이터가 없습니다',
                'no-categories': '제품 분류가 없습니다',
                'product-name': '제품명',
                'product-detail': '제품 상세',
                'basic-info': '기본 정보',
                'price-info': '가격 정보',
                'notes': '비고',
                'edit-btn': '편집',
                'delete': '삭제',
                'purchase-price': '매입가',
                'wholesale-price': '도매가',
                'retail-price': '소매가',
                'brand-name': '브랜드명',
                'status': '상태',
                'on-sale': '판매중',
                'add': '추가',
                'reset': '초기화',
                'create-category': '제품 분류 생성',
                'create-product-category': '제품 분류 생성',
                'category-name-cn': '분류명 (중국어)',
                'category-name-ko': '분류명 (한국어)',
                'category-description': '분류 설명',
                'cancel': '취소',
                'create': '생성',
                'please-select-category': '제품 분류를 선택하세요...'
            }
        };
        
        function getText(key) {
            const lang = AppState.currentLanguage || 'zh';
            return translations[lang][key] || key;
        }
        
        function updateTexts() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const text = getText(key);
                
                if (element.tagName === 'INPUT' && element.type === 'submit') {
                    element.value = text;
                } else if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                    element.placeholder = text;
                } else {
                    element.textContent = text;
                }
            });
        }
        
        function changeLanguage() {
            const selector = document.getElementById('language-selector');
            AppState.currentLanguage = selector.value;
            localStorage.setItem('language', AppState.currentLanguage);
            updateTexts();
            
            // 重新渲染当前内容
            if (AppState.activeContent === 'product-list') {
                productModule.displayProductList();
            } else if (AppState.activeContent === 'product-category') {
                productModule.displayProductCategories();
            }
        }
        
        // 分类模态框函数
        function openCreateCategoryModal() {
            document.getElementById('createCategoryModal').style.display = 'flex';
        }
        
        function closeCreateCategoryModal() {
            document.getElementById('createCategoryModal').style.display = 'none';
        }
        
        function submitCreateCategory() {
            const nameCN = document.getElementById('categoryNameCN').value.trim();
            const nameKO = document.getElementById('categoryNameKO').value.trim();
            const description = document.getElementById('categoryDescription').value.trim();
            
            if (!nameCN || !nameKO) {
                alert(getText('please-fill-required-fields') || '请填写所有必填字段');
                return;
            }
            
            // 自动生成分类代码
            const categoryCode = `cat_${Date.now().toString(36)}_${Math.random().toString(36).substr(2, 5)}`;
            
            const newCategory = {
                id: Date.now(),
                nameCN: nameCN,
                nameKO: nameKO,
                code: categoryCode,
                description: description,
                parentId: null,
                sortOrder: productModule.categories.length,
                active: true,
                createdAt: new Date().toISOString()
            };
            
            productModule.categories.push(newCategory);
            productModule.saveCategories();
            productModule.loadProductCategoriesList();
            
            closeCreateCategoryModal();
            alert(getText('category-created-success') || '分类创建成功！');
            
            // 清空表单
            document.getElementById('createCategoryForm').reset();
        }
        
        function resetProductForm() {
            document.getElementById('addProductForm').reset();
        }
        
        // 产品表单处理
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('addProductForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const productData = {
                        id: Date.now(),
                        name: document.getElementById('productName').value,
                        category: document.getElementById('productCategory').value,
                        purchasePrice: document.getElementById('purchasePrice').value,
                        wholesalePrice: document.getElementById('wholesalePrice').value,
                        retailPrice: document.getElementById('retailPrice').value,
                        isOnSale: document.getElementById('isOnSale').checked,
                        notes: document.getElementById('productNotes').value,
                        createdAt: new Date().toISOString()
                    };
                    
                    if (!productData.name) {
                        alert('请输入产品名称');
                        return;
                    }
                    
                    productModule.products.push(productData);
                    productModule.saveProducts();
                    
                    alert('产品添加成功！');
                    form.reset();
                    showContent('product-list');
                });
            }
            
            // 初始化应用
            window.app.init().then(() => {
                // 初始化产品模块
                productModule.init();
                
                // 更新文本
                updateTexts();
                
                // 设置语言选择器
                const langSelector = document.getElementById('language-selector');
                if (langSelector) {
                    langSelector.value = AppState.currentLanguage;
                }
            });
        });
    </script>
</body>
</html> 