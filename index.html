<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>MAKE IT HAIR Professional - ç®¡ç†ç³»ç»Ÿ</title>
    <!-- å­—ä½“/ç²’å­/åŠ¨æ•ˆCDN -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:700,400|Poppins:400,700|Source+Han+Sans+SC:400,700&display=swap" rel="stylesheet">
    <!-- SheetJSåº“ç”¨äºå¤„ç†Excelæ–‡ä»¶ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.3.0/tsparticles.bundle.min.js"></script>
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --black: #000000;
            --dark-gray: #1a1a1a;
            --text-light: #fff;
            --shadow: 0 10px 32px 0 rgba(212,175,55,0.13), 0 2px 4px rgba(0,0,0,0.23);
            --glass: rgba(24,24,24,0.76);
            --glass-blur: blur(20px) saturate(180%);
        }
        
        #tsparticles {
            position: fixed; left:0; top:0; width:100vw; height:100vh;
            pointer-events: none; z-index: 0;
        }
        
        body {
            font-family: 'Montserrat', 'Poppins', 'Source Han Sans SC', 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #191919 0%, #232323 100%);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            overflow: hidden; /* é˜²æ­¢æ•´ä½“é¡µé¢æ»šåŠ¨ */
        }
        
        /* æ–°å¢å¸ƒå±€æ ·å¼ */
        .layout-container {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }
        
        /* ä¾§è¾¹æ æ ·å¼ */
        .sidebar {
            width: 280px;
            background: rgba(24,24,24,0.95);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-right: 1.5px solid rgba(212,175,55,0.15);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 10;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(212,175,55,0.3);
        }
        
        .sidebar-logo {
            font-size: 2.5em;
            color: var(--gold);
            font-family: 'Montserrat', cursive;
            font-weight: 900;
            user-select: none;
            letter-spacing: 1px;
            text-shadow: 0 0 22px rgba(212,175,55,0.28);
        }
        
        .sidebar-subtitle {
            color: var(--gold-light);
            font-size: 0.9em;
            margin-top: 5px;
            font-style: italic;
        }
        
        .sidebar-title {
            color: var(--gold);
            font-size: 1em;
            margin-top: 10px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .sidebar-menu {
            padding: 15px 0;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .sidebar-menu-item {
            width: 100%;
        }
        
        .sidebar-menu-header {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            color: var(--gold);
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-menu-header:hover {
            background: rgba(212,175,55,0.15);
            border-left: 3px solid var(--gold);
        }
        
        .sidebar-menu-icon {
            margin-right: 12px;
            font-size: 1.2em;
        }
        
        .sidebar-menu-title {
            flex: 1;
        }
        
        .sidebar-menu-arrow {
            font-size: 0.8em;
            transition: transform 0.3s;
        }
        
        .sidebar-menu-item.active .sidebar-menu-arrow {
            transform: rotate(180deg);
        }
        
        .sidebar-submenu {
            display: none;
            background: rgba(0,0,0,0.3);
        }
        
        .sidebar-submenu.active {
            display: block;
        }
        
        .sidebar-submenu-item {
            padding: 10px 20px 10px 48px;
            cursor: pointer;
            color: #cccccc;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-submenu-item:hover {
            background: rgba(212,175,55,0.1);
            color: var(--gold-light);
            border-left: 3px solid var(--gold-light);
        }
        
        .sidebar-submenu-item.active {
            background: rgba(212,175,55,0.2);
            color: var(--gold-light);
            border-left: 3px solid var(--gold);
        }
        
        /* ä¸»å†…å®¹åŒºæ ·å¼ */
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»šåŠ¨ */
        }
        
        .content-container {
            flex: 1;
            padding: 20px;
            margin-top: 20px;
            overflow-y: auto; /* å†…å®¹åŒºåŸŸæ»šåŠ¨ */
            height: calc(100vh - 94px); /* å‡å»é¡¶éƒ¨å¯¼èˆªçš„é«˜åº¦ */
        }
        
        /* ç§»é™¤è¿”å›æŒ‰é’®ï¼Œå› ä¸ºå¯¼èˆªç°åœ¨é€šè¿‡ä¾§è¾¹æ å®Œæˆ */
        .back-button {
            display: none;
        }
        
        /* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
        .hamburger-menu {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 100;
            background: var(--glass);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-radius: 5px;
            border: 1px solid var(--gold);
            padding: 5px;
            cursor: pointer;
        }
        
        .hamburger-line {
            width: 25px;
            height: 3px;
            background-color: var(--gold);
            margin: 5px;
            transition: all 0.3s;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 900px) {
            .sidebar {
                width: 240px;
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                width: 100%;
            }
            
            .hamburger-menu {
                display: block;
            }
        }
        
        /* ä¿ç•™åŸæœ‰æ ·å¼ */
        .container, .content-area, .top-nav, .footer {
            background: var(--glass);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            box-shadow: var(--shadow);
            border: 1.5px solid rgba(212,175,55,0.08);
        }
        
        .content-area {
            display: none;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid var(--gold);
            margin-top: 20px;
            max-height: calc(100vh - 150px); /* å‡å»é¡¶éƒ¨å¯¼èˆªå’Œè¾¹è·çš„é«˜åº¦ */
            overflow: hidden; /* é»˜è®¤éšè—æ»šåŠ¨æ¡ */
        }
        
        /* éœ€è¦æ»šåŠ¨æ¡çš„é¡µé¢ */
        #new-employee.content-area,
        #new-salon.content-area,
        #add-product.content-area,
        #operation-history.content-area,
        #performance-target.content-area,
        #data-comparison.content-area,
        #audit-report.content-area,
        #approval-management.content-area,
        #product-category.content-area,
        #stock-check.content-area,
        #restock-alert.content-area,
        #usage-record.content-area,
        #income-record.content-area,
        #expense-record.content-area,
        #financial-report.content-area {
            overflow-y: auto; /* å…è®¸å‚ç›´æ»šåŠ¨ */
        }
        
        /* ç»Ÿä¸€çš„æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 12px; 
            background: #1a1a1a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(120deg, #d4af37 55%, #1a1a1a 100%);
            border-radius: 7px;
            box-shadow: 0 2px 10px rgba(212,175,55,0.13);
            border: 2px solid #232323;
        }
        
        ::-webkit-scrollbar-corner { 
            background: #191919;
        }
        
        .content-area.active {
            display: block;
        }
        

        

        

        
        .content-area h1 {
            color: var(--gold);
            border-bottom: 2px solid var(--gold);
            padding-bottom: 10px;
        }
        
        h1, h2, h3 {
            font-family: 'Montserrat', 'Poppins', 'Source Han Sans SC', Arial, sans-serif;
            font-weight: 700;
            letter-spacing: 0.03em;
        }
        
        h1 { 
            color: var(--gold); 
            font-size: 2.6em; 
            margin-bottom: 18px;
        }
        
        h2 { 
            color: var(--gold); 
            margin: 0 0 13px 0; 
            font-size: 1.44em; 
            transition: color .24s;
        }
        
        p { 
            color: var(--text-light); 
            margin: 0 0 12px 0; 
            line-height: 1.7; 
            font-size: 1.08em;
        }
        
        .footer {
            text-align: center;
            margin-top: auto;
            padding: 15px;
            border-top: 1px solid rgba(212,175,55,0.15);
        }
        
        /* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 26px;
            border: none;
            box-shadow: none;
            background: rgba(0,0,0,0.22);
            height: 54px;
            position: fixed; /* å›ºå®šé¡¶éƒ¨å¯¼èˆª */
            top: 0;
            right: 0;
            left: 280px; /* ä¸å·¦ä¾§èœå•å¯¹é½ */
            z-index: 5;
            border-radius: 0;
            margin: 0;
        }
        
        /* ä»£ç†åº—åç§°æ˜¾ç¤ºæ ·å¼ */
        .store-info, .user-info, .language-switcher {
            box-shadow: 0 2px 6px rgba(212,175,55,0.06);
            border: 1px solid rgba(212,175,55,0.12);
            background: rgba(25,25,25,0.70);
        }
        
        .store-info {
            padding: 8px 15px;
            border-radius: 8px;
            height: 40px;
            display: flex;
            align-items: center;
            box-sizing: border-box;
        }
        
        .store-info span, .user-position, .user-name, .language-btn {
            font-family: 'Montserrat', 'Source Han Sans SC', Arial, sans-serif;
        }
        
        .store-info span {
            color: var(--gold);
            font-size: 0.9em;
            font-weight: bold;
        }
        
        /* å³ä¾§å¯¼èˆªç»„ */
        .nav-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ ·å¼ */
        .user-info {
            padding: 8px 15px;
            border-radius: 8px;
            height: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-sizing: border-box;
        }
        
        .user-position {
            background: var(--gold);
            color: var(--black);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .user-name {
            color: var(--text-light);
            font-size: 0.9em;
            transition: all 0.2s ease;
        }
        
        .user-name:hover {
            background-color: rgba(212, 175, 55, 0.2);
            border-radius: 3px;
            padding: 2px 6px;
        }
        
        .user-name::after {
            content: ' â–¼';
            font-size: 0.8em;
            opacity: 0.7;
            margin-left: 5px;
        }
        
        /* è¯­è¨€åˆ‡æ¢æ ·å¼ */
        .language-switcher {
            display: flex;
            gap: 5px;
            padding: 8px 15px;
            border-radius: 8px;
            height: 40px;
            align-items: center;
            box-sizing: border-box;
        }
        
        .language-btn {
            background: transparent;
            color: var(--text-light);
            border: 1px solid var(--gold);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .language-btn:hover {
            background: var(--gold);
            color: var(--black);
        }
        
        .language-btn.active {
            background: var(--gold);
            color: var(--black);
            font-weight: bold;
        }
        

        
        /* ä¿ç•™å…¶ä»–æ‰€æœ‰åŸå§‹æ ·å¼ */
    </style>
</head>
<body>
    <div id="tsparticles"></div>
    
    <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
    <div class="hamburger-menu" onclick="toggleMobileMenu()">
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
    </div>
    
    <!-- é¡µé¢æ•´ä½“å¸ƒå±€ -->
    <div class="layout-container">
        <!-- å·¦ä¾§èœå•æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">M</div>
                <div class="sidebar-subtitle">MAKE IT HAIR Professional</div>
                <div class="sidebar-title" data-i18n="system-title">Mesiaé¦–å°”è¥¿éƒ¨åœ°åŒºç®¡ç†ç³»ç»Ÿ</div>
            </div>
            
            <!-- ä¾§è¾¹æ èœå• -->
            <div class="sidebar-menu">
                <!-- æ¦‚å†µæ€»è§ˆ -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="showContent('dashboard', event)">
                        <span class="sidebar-menu-icon">ğŸ“Š</span>
                        <span class="sidebar-menu-title" data-i18n="dashboard">æ¦‚å†µæ€»è§ˆ</span>
                    </div>
                </div>
                
                <!-- èŒå‘˜ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('employee')">
                        <span class="sidebar-menu-icon">ğŸ‘¤</span>
                        <span class="sidebar-menu-title" data-i18n="employee-management">èŒå‘˜ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-employee-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('new-employee', event)" id="new-employee-menu">
                            <span data-i18n="new-employee">æ–°å¢èŒå‘˜</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('employee-list', event)">
                            <span data-i18n="employee-list">èŒå‘˜åˆ—è¡¨</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('delete-employee', event)" id="delete-employee-menu">
                            <span data-i18n="delete-employee">åˆ é™¤èŒå‘˜</span>
                        </div>
                    </div>
                </div>
                
                <!-- å®¢æˆ·ä¿¡æ¯ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('customer')">
                        <span class="sidebar-menu-icon">ğŸ¢</span>
                        <span class="sidebar-menu-title" data-i18n="customer-management">å®¢æˆ·ä¿¡æ¯ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-customer-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('new-salon', event)">
                            <span data-i18n="new-salon">æ–°å¢æ²™é¾™</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('salon-info', event)">
                            <span data-i18n="salon-info">æ²™é¾™ä¿¡æ¯</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('delete-salon', event)" id="delete-salon-menu">
                            <span data-i18n="delete-salon">åˆ é™¤æ²™é¾™</span>
                        </div>
                    </div>
                </div>
                
                <!-- äº§å“ä¿¡æ¯ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('product')">
                        <span class="sidebar-menu-icon">ğŸ“¦</span>
                        <span class="sidebar-menu-title" data-i18n="product-management">äº§å“ä¿¡æ¯ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-product-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('add-product', event)">
                            <span data-i18n="add-product">æ–°å¢äº§å“</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('product-list', event)">
                            <span data-i18n="product-list">äº§å“åˆ—è¡¨</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('product-category', event)">
                            <span data-i18n="product-category">äº§å“åˆ†ç±»</span>
                        </div>
                    </div>
                </div>
                
                <!-- åº“å­˜ä¿¡æ¯ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('inventory')">
                        <span class="sidebar-menu-icon">ğŸ”„</span>
                        <span class="sidebar-menu-title" data-i18n="inventory-management">åº“å­˜ä¿¡æ¯ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-inventory-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('stock-check', event)">
                            <span data-i18n="stock-check">åº“å­˜ç›˜ç‚¹</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('restock-alert', event)">
                            <span data-i18n="restock-alert">è¡¥è´§æé†’</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('usage-record', event)">
                            <span data-i18n="usage-record">ä½¿ç”¨è®°å½•</span>
                        </div>
                    </div>
                </div>
                
                <!-- è´¢åŠ¡ä¿¡æ¯ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('finance')">
                        <span class="sidebar-menu-icon">ğŸ’°</span>
                        <span class="sidebar-menu-title" data-i18n="finance-management">è´¢åŠ¡ä¿¡æ¯ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-finance-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('income-record', event)">
                            <span data-i18n="income-record">æ”¶å…¥è®°å½•</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('expense-record', event)">
                            <span data-i18n="expense-record">æ”¯å‡ºè®°å½•</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('financial-report', event)">
                            <span data-i18n="financial-report">è´¢åŠ¡æŠ¥è¡¨</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('performance-target', event)">
                            <span data-i18n="performance-target">ä¸šç»©ç›®æ ‡</span>
                        </div>
                    </div>
                </div>
                
                <!-- æ“ä½œå†å²ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('audit')">
                        <span class="sidebar-menu-icon">ğŸ“‹</span>
                        <span class="sidebar-menu-title" data-i18n="audit-management">æ“ä½œå†å²ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-audit-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('operation-history', event)">
                            <span data-i18n="operation-history">æ“ä½œå†å²è®°å½•</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('data-comparison', event)">
                            <span data-i18n="data-comparison">æ•°æ®å¯¹æ¯”æŸ¥çœ‹</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('audit-report', event)">
                            <span data-i18n="audit-report">å®¡è®¡æŠ¥å‘Š</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('approval-management', event)" id="approval-management-menu">
                            <span data-i18n="approval-management">å®¡æ‰¹ç®¡ç†</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <div class="top-nav">
                <!-- å·¦ä¾§ç©ºç™½åŒºåŸŸ -->
                <div>
                    <!-- æ­¤å¤„ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ -->
                </div>
                
                <!-- å³ä¾§ä¿¡æ¯ç»„ -->
                <div class="nav-right">
                    <!-- ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º -->
                    <div class="user-info" id="userInfo">
                        <span id="userPosition" class="user-position" data-i18n="admin">ç®¡ç†å‘˜</span>
                        <div class="user-name-container" style="position: relative;">
                            <span id="userName" class="user-name" onclick="showUserMenu()" style="cursor: pointer;" data-i18n="system-admin">ç³»ç»Ÿç®¡ç†å‘˜</span>
                            <!-- ç”¨æˆ·èœå•ä¸‹æ‹‰æ¡† -->
                            <div id="userMenuDropdown" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 8px; background: rgba(24,24,24,0.95); border: 1px solid var(--gold); border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 1000; width: 120px;">
                                <div class="user-menu-item" onclick="logout()" style="padding: 10px 15px; color: var(--text-light); cursor: pointer; transition: all 0.3s; text-align: center;">
                                    <span data-i18n="logout">é€€å‡ºç™»å½•</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
                    <div class="language-switcher">
                        <button class="language-btn active" onclick="switchLanguage('zh')" id="btn-zh">ä¸­æ–‡</button>
                        <button class="language-btn" onclick="switchLanguage('ko')" id="btn-ko">í•œêµ­ì–´</button>
                    </div>
                </div>
            </div>
            
            <!-- å†…å®¹åŒºåŸŸå®¹å™¨ -->
            <div class="content-container">
                <!-- æ¦‚å†µæ€»è§ˆé¡µé¢ -->
                <div id="dashboard" class="content-area">
                    <h1 data-i18n="dashboard">æ¦‚å†µæ€»è§ˆ</h1>
                    
                    <!-- ä¸»è¦ä¸šç»©é¢æ¿ -->
                    <div style="background: rgba(35,35,35,0.95); border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                            <h2 style="margin: 0; color: var(--text-light); font-size: 1.2em;" data-i18n="main-performance">ä¸»è¦ä¸šç»©</h2>
                            <div style="color: var(--gold);">
                                <span style="font-size: 1.1em;">&#x1F50D;</span>
                            </div>
                        </div>
                        <div style="padding: 0;">
                            <div style="text-align: right; padding: 10px 20px; color: #aaa; font-size: 0.9em;">
                                <span data-i18n="unit-label">[ë‹¨ìœ„:ì²œì›]</span>
                            </div>
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="category">åˆ†ç±»</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="target">ç›®æ ‡</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="actual">å®ç»©</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="progress-rate">è¿›åº¦ç‡(%)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="my-performance">æˆ‘çš„ä¸šç»©</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: #4CAF50; border: 1px solid rgba(212, 175, 55, 0.1); font-weight: bold;">0</td>
                                    </tr>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="agency-total-performance">ä»£ç†åº—æ€»ä¸šç»©</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: #FFC107; border: 1px solid rgba(212, 175, 55, 0.1); font-weight: bold;">0</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="transaction-salon-count">äº¤æ˜“æ²™é¾™æ•°</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: #F44336; border: 1px solid rgba(212, 175, 55, 0.1); font-weight: bold;">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ä¸»è¦æœªå¤„ç†ä¸šåŠ¡é¢æ¿ -->
                    <div style="background: rgba(35,35,35,0.95); border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                            <h2 style="margin: 0; color: var(--text-light); font-size: 1.2em;" data-i18n="pending-business">ä¸»è¦æœªå¤„ç†ä¸šåŠ¡</h2>
                            <div style="color: var(--gold);">
                                <span style="font-size: 1.1em;">&#x1F50D;</span>
                            </div>
                        </div>
                        <div style="padding: 0;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 70%;" data-i18n="category">åˆ†ç±»</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 30%;" data-i18n="count">ä»¶æ•°</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="outbound-pending">å‡ºåº“æœªæ‰¹å‡†</td>
                                        <td style="padding: 15px; text-align: center; border: 1px solid rgba(212, 175, 55, 0.1);">
                                            <a href="#" style="color: var(--gold); text-decoration: none; font-weight: bold; font-size: 1.1em;">0</a>
                                        </td>
                                    </tr>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="payment-pending">æ”¶æ¬¾æœªæ‰¹å‡†</td>
                                        <td style="padding: 15px; text-align: center; border: 1px solid rgba(212, 175, 55, 0.1);">
                                            <a href="#" style="color: var(--gold); text-decoration: none; font-weight: bold; font-size: 1.1em;">0</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="delivery-pending">æ´¾é€æœªå®Œæˆ</td>
                                        <td style="padding: 15px; text-align: center; border: 1px solid rgba(212, 175, 55, 0.1);">
                                            <a href="#" style="color: var(--gold); text-decoration: none; font-weight: bold; font-size: 1.1em;">0</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- èŒå‘˜ç®¡ç†é¡µé¢ -->
                <div id="new-employee" class="content-area">
                    <h1 data-i18n="new-employee">æ–°å¢èŒå‘˜</h1>
                    <form id="newEmployeeForm">
                        <!-- ç¬¬ä¸€æ’ï¼šåŸºæœ¬ä¿¡æ¯å’Œè”ç³»ä¿¡æ¯ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                            <!-- åŸºæœ¬ä¿¡æ¯ -->
                            <div style="background: rgba(212, 175, 55, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3);">
                                <h3 style="color: var(--gold); margin: 0 0 12px 0; font-size: 1.1em;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h3>
                                
                                <div style="display: grid; gap: 10px;">
                                    <div>
                                        <label for="employeeName" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="employee-name">å§“åï¼š</label>
                                        <input type="text" id="employeeName" required style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                    </div>
                                    <div>
                                        <label for="employeePosition" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="employee-position">èŒä½ï¼š</label>
                                        <select id="employeePosition" required style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                            <option value="salesperson" data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>
                                            <option value="manager" data-i18n="manager">ç»ç†</option>
                                            <option value="admin" data-i18n="admin">ç®¡ç†å‘˜</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="employeeUsername" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="login-account">ç™»å½•è´¦å·ï¼š</label>
                                        <input type="text" id="employeeUsername" required style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                    </div>
                                    <div>
                                        <label for="employeePassword" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="password">å¯†ç ï¼š</label>
                                        <input type="password" id="employeePassword" required style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- è”ç³»ä¿¡æ¯ -->
                            <div style="background: rgba(135, 206, 235, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3);">
                                <h3 style="color: #87CEEB; margin: 0 0 12px 0; font-size: 1.1em;" data-i18n="contact-info">è”ç³»ä¿¡æ¯</h3>
                                
                                <div>
                                    <label for="employeeMobile" style="display: block; color: #87CEEB; margin-bottom: 4px; font-size: 0.9em;" data-i18n="mobile-number">æ‰‹æœºå·ï¼š</label>
                                    <input type="tel" id="employeeMobile" oninput="formatPhoneNumber(this)" placeholder="000-0000-0000" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç¬¬äºŒæ’ï¼šé“¶è¡Œè´¦æˆ·ä¿¡æ¯ -->
                        <div style="background: rgba(144, 238, 144, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); margin-bottom: 15px;">
                            <h3 style="color: #90EE90; margin: 0 0 12px 0; font-size: 1.1em;" data-i18n="bank-account-info">é“¶è¡Œè´¦æˆ·ä¿¡æ¯</h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 12px; margin-bottom: 10px;">
                                <div>
                                    <label for="bankName" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="bank-name">é“¶è¡Œåç§°ï¼š</label>
                                    <input type="text" id="bankName" placeholder="ä¾‹ï¼šä¸­å›½é“¶è¡Œ" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                                <div>
                                    <label for="bankAccount" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="bank-account">é“¶è¡Œè´¦å·ï¼š</label>
                                    <input type="text" id="bankAccount" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                                <div>
                                    <label for="accountHolder" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="account-holder">è´¦æˆ·æŒæœ‰äººï¼š</label>
                                    <input type="text" id="accountHolder" placeholder="é»˜è®¤ä½¿ç”¨èŒå‘˜å§“å" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                            </div>
                            
                            <div>
                                <label for="bankBranch" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="bank-branch">å¤‡æ³¨ï¼š</label>
                                <input type="text" id="bankBranch" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                            </div>
                        </div>
                        
                        <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 10px 25px; border-radius: 5px; cursor: pointer; font-size: 1em;" data-i18n="add">æ·»åŠ </button>
                    </form>
                </div>
                
                <div id="employee-list" class="content-area">
                    <h1 data-i18n="employee-list">èŒå‘˜åˆ—è¡¨</h1>
                    <p data-i18n="employee-list-desc">è¿™é‡Œæ˜¾ç¤ºæ‰€æœ‰èŒå‘˜çš„è¯¦ç»†ä¿¡æ¯åˆ—è¡¨ã€‚</p>
                    
                    <!-- ä¸»å®¹å™¨ï¼šåˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ† -->
                    <div id="employee-list-container" style="display: flex; gap: 20px; margin-top: 20px; height: calc(100vh - 300px);">
                        <!-- å·¦ä¾§ï¼šèŒå‘˜åˆ—è¡¨ -->
                        <div id="employee-list-left" style="flex: 0 0 40%; overflow-y: overlay; padding-right: 10px;">
                            <div id="employee-list-content">
                                <!-- èŒå‘˜åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                        
                        <!-- å³ä¾§ï¼šèŒå‘˜è¯¦æƒ… -->
                        <div id="employee-list-right" style="flex: 1; overflow-y: overlay; display: none;">
                            <div id="employee-detail-content" style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3);">
                                <!-- èŒå‘˜è¯¦æƒ…å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- å…¶ä»–å†…å®¹åŒºåŸŸä¹Ÿå°†ä¿æŒåŸæ ·å¸ƒå±€ï¼Œåªæ˜¯ç§»é™¤è¿”å›æŒ‰é’® -->
                <div id="add-product" class="content-area">
                    <h1 data-i18n="add-product">æ–°å¢äº§å“</h1>
                    
                    <form id="addProductForm">
                        <!-- äº§å“åŸºæœ¬ä¿¡æ¯ -->
                        <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-bottom: 20px;">
                            <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="product-basic-info">äº§å“åŸºæœ¬ä¿¡æ¯</h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="productNameCN" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-name-cn">äº§å“åç§°ï¼ˆä¸­æ–‡ï¼‰ï¼š</label>
                                    <input type="text" id="productNameCN" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="productNameKO" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-name-ko">äº§å“åç§°ï¼ˆéŸ©æ–‡ï¼‰ï¼š</label>
                                    <input type="text" id="productNameKO" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="productCategory" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-category-select">äº§å“åˆ†ç±»ï¼š</label>
                                    <select id="productCategory" style="width: 100%; padding: 10px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                        <option value="" data-i18n="please-select-category">è¯·é€‰æ‹©äº§å“åˆ†ç±»...</option>
                                        <!-- åˆ†ç±»é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                                    </select>
                                </div>
                                <div>
                                    <label for="productCode" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-code">äº§å“ç¼–ç ï¼š</label>
                                    <input type="text" id="productCode" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="productPrice" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-price">äº§å“å•ä»·ï¼ˆâ‚©ï¼‰ï¼š</label>
                                    <input type="text" id="productPrice" placeholder="10,000" oninput="formatPriceInput(this)" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="productVolumePerUnit" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-volume">å®¹é‡/å•ä½ï¼š</label>
                                    <input type="text" id="productVolumePerUnit" placeholder="500ml" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="productBrand" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-brand">å“ç‰Œï¼š</label>
                                    <input type="text" id="productBrand" placeholder="MAKE IT HAIR" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="productDescription" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-description">äº§å“æè¿°ï¼š</label>
                                <textarea id="productDescription" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; min-height: 80px; resize: vertical;"></textarea>
                            </div>
                        </div>
                        
                        <!-- åº“å­˜ä¿¡æ¯ -->
                        <div style="background: rgba(135, 206, 235, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); margin-bottom: 20px;">
                            <h3 style="color: #87CEEB; margin: 0 0 15px 0;" data-i18n="inventory-info">åº“å­˜ä¿¡æ¯</h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="initialStock" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="initial-stock">åˆå§‹åº“å­˜é‡ï¼š</label>
                                    <input type="number" id="initialStock" min="0" value="0" style="width: 100%; padding: 10px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="minimumStock" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="minimum-stock">æœ€ä½åº“å­˜é¢„è­¦ï¼š</label>
                                    <input type="number" id="minimumStock" min="0" value="5" style="width: 100%; padding: 10px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="stockLocation" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="stock-location">åº“å­˜ä½ç½®ï¼š</label>
                                    <input type="text" id="stockLocation" placeholder="A-12" style="width: 100%; padding: 10px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label style="display: flex; align-items: center; color: #87CEEB; cursor: pointer;">
                                    <input type="checkbox" id="enableAutoReorder" style="margin-right: 5px;">
                                    <span data-i18n="enable-auto-reorder">å¯ç”¨è‡ªåŠ¨è¡¥è´§æé†’</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- äº§å“å›¾ç‰‡ -->
                        <div style="background: rgba(144, 238, 144, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); margin-bottom: 20px;">
                            <h3 style="color: #90EE90; margin: 0 0 15px 0;" data-i18n="product-image">äº§å“å›¾ç‰‡</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; color: #90EE90; margin-bottom: 10px;" data-i18n="upload-product-image">ä¸Šä¼ äº§å“å›¾ç‰‡ï¼š</label>
                                
                                <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
                                <div id="imageUploadArea" style="border: 2px dashed #90EE90; border-radius: 5px; padding: 20px; text-align: center; cursor: pointer; position: relative; background: rgba(0,0,0,0.3);" onclick="document.getElementById('productImageInput').click()">
                                    <input type="file" id="productImageInput" accept="image/*" style="display: none;" onchange="previewProductImage(this)">
                                    <div id="uploadIconArea">
                                        <span style="font-size: 2em; color: #90EE90;">ğŸ“·</span>
                                        <p style="color: #90EE90; margin: 10px 0 0 0;" data-i18n="click-to-upload">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</p>
                                        <p style="color: #cccccc; font-size: 0.8em; margin: 5px 0 0 0;" data-i18n="image-format-hint">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œå»ºè®®å°ºå¯¸800x800åƒç´ </p>
                                    </div>
                                    <!-- å›¾ç‰‡é¢„è§ˆåŒºåŸŸ -->
                                    <div id="imagePreviewArea" style="display: none; position: relative;">
                                        <img id="productImagePreview" style="max-width: 100%; max-height: 300px; border-radius: 5px;">
                                        <button type="button" onclick="removeProductImage(event)" style="position: absolute; top: 10px; right: 10px; background: rgba(255,0,0,0.7); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 1.2em; line-height: 1;">Ã—</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å…¶ä»–è®¾ç½® -->
                        <div style="background: rgba(255, 182, 193, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(255, 182, 193, 0.3); margin-bottom: 20px;">
                            <h3 style="color: #FFB6C1; margin: 0 0 15px 0;" data-i18n="other-settings">å…¶ä»–è®¾ç½®</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <label style="display: flex; align-items: center; color: #FFB6C1; cursor: pointer; margin-bottom: 10px;">
                                    <input type="checkbox" id="isActive" checked style="margin-right: 5px;">
                                    <span data-i18n="is-product-active">äº§å“å¤„äºå¯ç”¨çŠ¶æ€</span>
                                </label>
                                
                                <label style="display: flex; align-items: center; color: #FFB6C1; cursor: pointer;">
                                    <input type="checkbox" id="isPromotional" style="margin-right: 5px;">
                                    <span data-i18n="is-promotional">æ˜¯ä¿ƒé”€äº§å“</span>
                                </label>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="productTags" style="display: block; color: #FFB6C1; margin-bottom: 5px;" data-i18n="product-tags">äº§å“æ ‡ç­¾ï¼ˆå¤šä¸ªæ ‡ç­¾ç”¨é€—å·åˆ†éš”ï¼‰ï¼š</label>
                                <input type="text" id="productTags" placeholder="æ–°å“,çƒ­é”€,æŠ¤å‘" style="width: 100%; padding: 10px; background: transparent; border: 1px solid #FFB6C1; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                        </div>
                        
                        <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 1.1em;" data-i18n="add-product-submit">æ·»åŠ äº§å“</button>
                    </form>
                </div>

                <div id="product-category" class="content-area">
                    <h1 data-i18n="product-category">äº§å“åˆ†ç±»</h1>
                    
                    <!-- æ·»åŠ äº§å“åˆ†ç±»æŒ‰é’® -->
                    <div style="margin: 20px 0; display: flex; justify-content: space-between; align-items: center;">
                        <p data-i18n="product-category-content">ç®¡ç†äº§å“åˆ†ç±»ä¿¡æ¯</p>
                        <button onclick="openCreateCategoryModal()" style="background: var(--gold); color: var(--black); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;" data-i18n="create-product-category">åˆ›å»ºäº§å“åˆ†ç±»</button>
                    </div>
                    
                    <!-- äº§å“åˆ†ç±»åˆ—è¡¨ -->
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-top: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="category-list">äº§å“åˆ†ç±»åˆ—è¡¨</h3>
                        <div id="categoryList" style="margin-top: 15px;">
                            <!-- äº§å“åˆ†ç±»åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            <div style="text-align: center; color: #cccccc; padding: 20px;" data-i18n="no-categories">æš‚æ— äº§å“åˆ†ç±»ï¼Œè¯·ç‚¹å‡»"åˆ›å»ºäº§å“åˆ†ç±»"æ·»åŠ </div>
                        </div>
                    </div>
                </div>

                <div id="product-list" class="content-area">
                    <h1 data-i18n="product-list">äº§å“åˆ—è¡¨</h1>
                    <p data-i18n="product-list-content">æ˜¾ç¤ºæ‰€æœ‰äº§å“çš„åˆ—è¡¨...</p>
                </div>
                
                <!-- åˆ é™¤èŒå‘˜é¡µé¢ -->
                <div id="delete-employee" class="content-area">
                    <h1 data-i18n="delete-employee">åˆ é™¤èŒå‘˜</h1>
                    <div style="margin-top: 20px;">
                        <label for="deleteEmployeeSelect" style="display: block; color: var(--gold); margin-bottom: 10px;" data-i18n="select-employee-to-delete">é€‰æ‹©è¦åˆ é™¤çš„èŒå‘˜ï¼š</label>
                        <select id="deleteEmployeeSelect" style="width: 100%; padding: 10px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                            <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜...</option>
                        </select>
                        <button onclick="deleteSelectedEmployee()" style="background: #ff6666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 20px;" data-i18n="confirm-delete">ç¡®è®¤åˆ é™¤</button>
                    </div>
                </div>
                
                <!-- æ–°å¢æ²™é¾™é¡µé¢ -->
                <div id="new-salon" class="content-area">
                    <h1 data-i18n="new-salon">æ–°å¢æ²™é¾™</h1>
                    
                    <!-- æ‰¹é‡ä¸Šä¼ æ²™é¾™ -->
                    <div style="background: rgba(135, 206, 235, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); margin-bottom: 12px;">
                        <h3 style="color: #87CEEB; margin: 0 0 8px 0; font-size: 1em;" data-i18n="batch-upload-salon">æ‰¹é‡ä¸Šä¼ æ²™é¾™</h3>
                        
                        <div style="margin-bottom: 8px;">
                            <label style="display: block; color: #87CEEB; margin-bottom: 6px; font-size: 0.9em;" data-i18n="select-file">é€‰æ‹©æ–‡ä»¶ï¼š</label>
                            
                            <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                            <div id="fileUploadArea" style="border: 2px dashed #87CEEB; border-radius: 5px; padding: 8px 12px; text-align: center; cursor: pointer; position: relative; background: rgba(0,0,0,0.3); max-width: 400px; min-height: 50px;" onclick="document.getElementById('salonFileInput').click()">
                                <input type="file" id="salonFileInput" accept=".xlsx,.xls" style="display: none;" onchange="previewSalonFile(this)">
                                <div id="fileUploadIconArea" style="display: flex; align-items: center; justify-content: center; gap: 8px; height: 50px;">
                                    <span style="font-size: 1.2em; color: #87CEEB;">ğŸ“</span>
                                    <span style="color: #87CEEB; font-size: 0.9em;" data-i18n="click-to-upload-file">ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶</span>
                                </div>
                                <!-- æ–‡ä»¶é¢„è§ˆåŒºåŸŸ -->
                                <div id="filePreviewArea" style="display: none;">
                                    <p id="fileName" style="color: var(--text-light); font-size: 0.9em; margin: 4px 0;"></p>
                                    <button type="button" onclick="removeSalonFile(event)" style="background: rgba(255,0,0,0.7); color: white; border: none; padding: 3px 10px; border-radius: 3px; cursor: pointer; margin-top: 4px; font-size: 0.8em;" data-i18n="remove-file">ç§»é™¤æ–‡ä»¶</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æ•°æ®é¢„è§ˆåŒºåŸŸ -->
                        <div id="dataPreviewArea" style="display: none; margin-bottom: 15px;">
                            <label style="display: block; color: #87CEEB; margin-bottom: 10px;" data-i18n="data-preview">æ•°æ®é¢„è§ˆï¼š</label>
                            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                <input type="checkbox" id="selectAll" onchange="toggleSelectAll()" style="margin-right: 10px;">
                                <label for="selectAll" style="color: var(--text-light); margin-right: 20px;" data-i18n="select-all">å…¨é€‰</label>
                                <span style="color: var(--text-light); margin-right: 20px;" data-i18n="selected-count">å·²é€‰æ‹© 0 ä¸ªæ²™é¾™</span>
                                <label for="responsibleEmployeeSelect" style="color: #87CEEB; margin-right: 10px;" data-i18n="assign-responsible">æŒ‡å®šè´Ÿè´£äººï¼š</label>
                                <select id="responsibleEmployeeSelect" style="padding: 5px; background: var(--dark-gray); border: 1px solid #87CEEB; color: var(--text-light); border-radius: 3px; margin-right: 10px;">
                                    <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜...</option>
                                </select>
                                <button type="button" onclick="assignResponsible()" style="background: #4CAF50; color: white; border: none; padding: 5px 15px; border-radius: 3px; cursor: pointer;" data-i18n="assign-responsible-btn">åˆ†é…è´Ÿè´£äºº</button>
                            </div>
                            
                            <div id="dataPreviewTable" style="max-height: 180px; overflow-y: auto; border: 1px solid #87CEEB; border-radius: 5px;">
                                <!-- æ•°æ®é¢„è§ˆè¡¨æ ¼å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                            
                            <style>

                                

                            </style>
                        </div>
                        
                        <div style="display: flex; gap: 8px; margin-top: 8px;">
                            <button type="button" onclick="processSalonFile()" style="background: #87CEEB; color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="process-file">å¤„ç†æ–‡ä»¶</button>
                            <button type="button" onclick="downloadTemplate()" style="background: #4CAF50; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="download-template">ä¸‹è½½æ ·ä¾‹æ¨¡æ¿</button>
                            <button type="button" id="confirmBatchCreateBtn" onclick="confirmBatchCreate()" style="display: none; background: var(--gold); color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="confirm-batch-create">ç¡®è®¤æ‰¹é‡åˆ›å»º</button>
                            <button type="button" id="cancelBatchBtn" onclick="cancelBatch()" style="display: none; background: #666; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="cancel">å–æ¶ˆ</button>
                        </div>
                    </div>
                    
                    <form id="newSalonForm">
                        <!-- ç¬¬ä¸€æ’ï¼šæ²™é¾™åŸºæœ¬ä¿¡æ¯å’Œé™¢é•¿ä¿¡æ¯ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 12px;">
                            <!-- æ²™é¾™åŸºæœ¬ä¿¡æ¯ -->
                            <div style="background: rgba(212, 175, 55, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3);">
                                <h3 style="color: var(--gold); margin: 0 0 8px 0; font-size: 1em;" data-i18n="salon-basic-info">æ²™é¾™åŸºæœ¬ä¿¡æ¯</h3>
                                
                                <div style="display: grid; gap: 8px;">
                                    <div>
                                        <label for="salonName" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-name">æ²™é¾™åç§°ï¼š</label>
                                        <input type="text" id="salonName" required style="width: 100%; padding: 6px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonAddress" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-address">æ²™é¾™åœ°å€ï¼š</label>
                                        <input type="text" id="salonAddress" required style="width: 100%; padding: 6px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="businessLicense" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="business-license">è¥ä¸šæ‰§ç…§å·ç ï¼š</label>
                                        <input type="text" id="businessLicense" oninput="formatBusinessLicense(this)" placeholder="000-00-00000" style="width: 100%; padding: 6px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="responsibleEmployee" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="responsible-employee">è´Ÿè´£èŒå‘˜ï¼š</label>
                                        <select id="responsibleEmployee" style="width: 100%; padding: 6px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                            <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- é™¢é•¿ä¿¡æ¯å’Œè”ç³»ä¿¡æ¯ -->
                            <div style="background: rgba(144, 238, 144, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3);">
                                <h3 style="color: #90EE90; margin: 0 0 8px 0; font-size: 1em;" data-i18n="director-info">é™¢é•¿ä¿¡æ¯</h3>
                                
                                <div style="display: grid; gap: 8px;">
                                    <div>
                                        <label for="directorName" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="director-name">é™¢é•¿å§“åï¼š</label>
                                        <input type="text" id="directorName" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="directorMobile" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœºï¼š</label>
                                        <input type="tel" id="directorMobile" oninput="formatPhoneNumber(this)" placeholder="000-0000-0000" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonPhone" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-phone">åº—é“ºç”µè¯ï¼š</label>
                                        <input type="tel" id="salonPhone" oninput="formatPhoneNumber(this)" placeholder="000-0000-0000" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonEmail" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-email">ç”µå­é‚®ç®±ï¼š</label>
                                        <input type="email" id="salonEmail" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="add">æ·»åŠ </button>
                    </form>
                </div>
                
                <!-- æ²™é¾™ä¿¡æ¯é¡µé¢ -->
                <div id="salon-info" class="content-area">
                    <h1 data-i18n="salon-info">æ²™é¾™ä¿¡æ¯</h1>
                    
                    <!-- æ²™é¾™ç»Ÿè®¡ä¿¡æ¯å’Œæœç´¢ç­›é€‰ -->
                    <div id="salon-count-display" style="margin: 15px 0; padding: 15px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <!-- å·¦ä¾§ï¼šæœç´¢æ¡†å’Œç­›é€‰ -->
                            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                                <input type="text" id="salonSearchInput" data-i18n-placeholder="search-salon-placeholder" placeholder="æœç´¢æ²™é¾™å/é™¢é•¿å/æ‰‹æœºå·..." oninput="searchSalons()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; min-width: 200px;">
                                <select id="responsibleFilter" onchange="searchSalons()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-employees">æ‰€æœ‰èŒå‘˜</option>
                                </select>
                                <select id="districtFilter" onchange="searchSalons()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-districts">å…¨éƒ¨åŒºåŸŸ</option>
                                    <option value="guro" data-i18n="district-guro">ä¹è€åŒº</option>
                                    <option value="yeongdeungpo" data-i18n="district-yeongdeungpo">æ°¸ç™»æµ¦åŒº</option>
                                    <option value="geumcheon" data-i18n="district-geumcheon">è¡¿å·åŒº</option>
                                    <option value="overseas" data-i18n="district-overseas">æµ·å¤–åŒºåŸŸ</option>
                                </select>
                                <button onclick="clearAllFilters()" style="background: #666; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="clear-filters">æ¸…ç©ºç­›é€‰</button>
                            </div>
                            
                            <!-- å³ä¾§ï¼šç»Ÿè®¡ä¿¡æ¯ -->
                            <div>
                                <span style="color: var(--gold); font-weight: bold; font-size: 1.1em;" id="salon-count-text" data-i18n="total-salons-count" data-i18n-params='{"count": "851"}'>æ€»è®¡ 851 å®¶æ²™é¾™</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ’åºæ§åˆ¶é¢æ¿ -->
                    <div id="salon-sort-controls" style="margin: 15px 0; padding: 15px; background: rgba(135, 206, 235, 0.1); border-radius: 5px; border: 1px solid rgba(135, 206, 235, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px; color: #87CEEB;">
                                <span style="font-weight: bold; font-size: 1em;" data-i18n="sort-by">æ’åºæ–¹å¼ï¼š</span>
                            </div>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <button id="sort-name" onclick="toggleSalonSort('name')" style="background: rgba(135, 206, 235, 0.2); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-name">æ²™é¾™åç§° â†‘</button>
                                <button id="sort-address" onclick="toggleSalonSort('address')" style="background: rgba(135, 206, 235, 0.2); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-address">åœ°å€åç§° â†‘</button>
                                <button id="sort-addTime" onclick="toggleSalonSort('addTime')" style="background: rgba(135, 206, 235, 0.2); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-add-time">æ–°å¢æ—¶é—´ â†‘</button>
                                <button id="sort-lastTransaction" onclick="toggleSalonSort('lastTransaction')" style="background: rgba(135, 206, 235, 0.2); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-last-transaction">æœ€åäº¤æ˜“ â†‘</button>
                                <button id="sort-overdueDays" onclick="toggleSalonSort('overdueDays')" style="background: rgba(135, 206, 235, 0.2); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-overdue-days">æ¬ æ¬¾å¤©æ•° â†‘</button>
                                <button id="sort-overdueAmount" onclick="toggleSalonSort('overdueAmount')" style="background: rgba(135, 206, 235, 0.2); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-overdue-amount">æ¬ æ¬¾é‡‘é¢ â†‘</button>
                                <button id="sort-default" onclick="toggleSalonSort('default')" style="background: rgba(135, 206, 235, 0.4); color: #87CEEB; border: 1px solid #87CEEB; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" onmouseover="this.style.background='rgba(135, 206, 235, 0.4)'" onmouseout="updateSortButtonStyle(this)" data-i18n="sort-default">é»˜è®¤æ’åº</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å·¦å³åˆ†æ å¸ƒå±€ -->
                    <div style="display: flex; gap: 20px; height: calc(100vh - 280px); min-height: 500px;">
                        <!-- å·¦ä¾§æ²™é¾™åˆ—è¡¨ -->
                        <div id="salon-list-left" style="width: 40%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); overflow-y: auto;">
                            <div style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                                <h3 style="color: var(--gold); margin: 0;" data-i18n="salon-list">æ²™é¾™åˆ—è¡¨</h3>
                            </div>
                            <div id="salon-list-content" style="padding: 10px;">
                                <!-- æ²™é¾™åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-salons">æš‚æ— æ²™é¾™æ•°æ®</p>
                            </div>
                        </div>
                        
                        <!-- å³ä¾§æ²™é¾™è¯¦æƒ… -->
                        <div id="salon-detail-right" style="width: 60%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); display: none; flex-direction: column;">
                            <div id="salon-detail-header" style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                                <h3 style="color: var(--gold); margin: 0;" data-i18n="salon-detail">æ²™é¾™è¯¦æƒ…</h3>
                                <div id="salon-action-buttons" style="display: flex; gap: 10px;">
                                    <!-- æŒ‰é’®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                            <div id="salon-detail-content" style="padding: 20px; flex: 1; overflow-y: auto; line-height: 1.6;">
                                <!-- æ²™é¾™è¯¦æƒ…å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- åˆ é™¤æ²™é¾™é¡µé¢ -->
                <div id="delete-salon" class="content-area">
                    <h1 data-i18n="delete-salon">åˆ é™¤æ²™é¾™</h1>
                    <div style="margin-top: 20px;">
                        <label for="deleteSalonSelect" style="display: block; color: var(--gold); margin-bottom: 10px;" data-i18n="select-salon-to-delete">é€‰æ‹©è¦åˆ é™¤çš„æ²™é¾™ï¼š</label>
                        <select id="deleteSalonSelect" style="width: 100%; padding: 10px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                            <option value="" data-i18n="please-select-salon">è¯·é€‰æ‹©æ²™é¾™...</option>
                        </select>
                        <button onclick="deleteSelectedSalon()" style="background: #ff6666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 20px;" data-i18n="confirm-delete">ç¡®è®¤åˆ é™¤</button>
                    </div>
                </div>
                
                <!-- ä¸šç»©ç›®æ ‡é¡µé¢ -->
                <div id="performance-target" class="content-area">
                    <h1 data-i18n="performance-target">ä¸šç»©ç›®æ ‡</h1>
                    
                    <!-- å½“å‰æœˆä»½é€‰æ‹© -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <label style="color: var(--gold); font-weight: bold;" data-i18n="select-month">é€‰æ‹©æœˆä»½ï¼š</label>
                            <select id="performance-month" onchange="displayPerformanceTargets()" style="padding: 8px 12px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                <option value="1">1æœˆ</option>
                                <option value="2">2æœˆ</option>
                                <option value="3">3æœˆ</option>
                                <option value="4">4æœˆ</option>
                                <option value="5">5æœˆ</option>
                                <option value="6">6æœˆ</option>
                                <option value="7">7æœˆ</option>
                                <option value="8">8æœˆ</option>
                                <option value="9">9æœˆ</option>
                                <option value="10">10æœˆ</option>
                                <option value="11">11æœˆ</option>
                                <option value="12">12æœˆ</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="recalculatePerformanceTargets()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;" data-i18n="recalculate-targets">é‡æ–°è®¡ç®—ç›®æ ‡</button>
                            <button onclick="resetPerformanceTargets()" style="background: #ff6666; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;" data-i18n="reset-targets">é‡ç½®ç›®æ ‡</button>
                        </div>
                    </div>
                    
                    <!-- å›¢é˜Ÿæ€»ç›®æ ‡ -->
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-bottom: 30px;">
                        <h2 style="color: var(--gold); margin: 0 0 20px 0; text-align: center;" data-i18n="team-target">ä»£ç†åº—è¥ä¸šé¢ç›®æ ‡</h2>
                        <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 20px; align-items: center;">
                            <div style="text-align: center;">
                                <div style="color: #cccccc; font-size: 0.9em; margin-bottom: 5px;" data-i18n="target-label">ç›®æ ‡</div>
                                <div id="team-target-amount" style="font-size: 1.8em; color: var(--gold); font-weight: bold;">0</div>
                                <div style="color: #aaa; font-size: 0.8em;" data-i18n="thousand-won">åƒéŸ©å…ƒ</div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #cccccc;" data-i18n="actual-label">å®é™…</span>
                                    <span id="team-progress-text" style="color: var(--gold); font-weight: bold;">0%</span>
                                </div>
                                <div style="background: rgba(0,0,0,0.3); height: 20px; border-radius: 10px; overflow: hidden;">
                                    <div id="team-progress-bar" style="height: 100%; background: linear-gradient(90deg, #4CAF50, #8BC34A); width: 0%; transition: width 0.3s ease;"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.8em; color: #aaa;">
                                    <span>0</span>
                                    <span id="team-target-display">0</span>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #cccccc; font-size: 0.9em; margin-bottom: 5px;" data-i18n="actual-label">å®é™…</div>
                                <div id="team-actual-amount" style="font-size: 1.8em; color: #4CAF50; font-weight: bold;">0</div>
                                <div style="color: #aaa; font-size: 0.8em;" data-i18n="thousand-won">åƒéŸ©å…ƒ</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸ªäººä¸šç»©ç›®æ ‡åˆ—è¡¨ -->
                    <div id="performance-list" style="margin-top: 20px;">
                        <!-- ä¸ªäººä¸šç»©ç›®æ ‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-performance-data">æš‚æ— ä¸šç»©æ•°æ®</p>
                    </div>
                </div>
                
                <!-- æ“ä½œå†å²è®°å½•é¡µé¢ -->
                <div id="operation-history" class="content-area">
                    <h1 data-i18n="operation-history">æ“ä½œå†å²è®°å½•</h1>
                    
                    <!-- ç­›é€‰æ§ä»¶ -->
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 5px; margin-bottom: 20px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <!-- ç¬¬ä¸€è¡Œï¼š3ä¸ªä¸‹æ‹‰ç­›é€‰ -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-user">æŒ‰ç”¨æˆ·ç­›é€‰ï¼š</label>
                                <select id="history-user-filter" onchange="filterOperationHistory()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-users">å…¨éƒ¨ç”¨æˆ·</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-operation">æŒ‰æ“ä½œç±»å‹ï¼š</label>
                                <select id="history-operation-filter" onchange="filterOperationHistory()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-operations">å…¨éƒ¨æ“ä½œ</option>
                                    <option value="create" data-i18n="operation-create">åˆ›å»º</option>
                                    <option value="edit" data-i18n="operation-edit">ç¼–è¾‘</option>
                                    <option value="delete" data-i18n="operation-delete">åˆ é™¤</option>
                                    <option value="login" data-i18n="operation-login">ç™»å½•</option>
                                    <option value="logout" data-i18n="operation-logout">ç™»å‡º</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-object">æŒ‰å¯¹è±¡ç±»å‹ï¼š</label>
                                <select id="history-object-filter" onchange="filterOperationHistory()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-objects">å…¨éƒ¨å¯¹è±¡</option>
                                    <option value="salon" data-i18n="object-salon">æ²™é¾™</option>
                                    <option value="transaction" data-i18n="object-transaction">äº¤æ˜“</option>
                                    <option value="employee" data-i18n="object-employee">èŒå‘˜</option>
                                </select>
                            </div>
                        </div>
                        <!-- ç¬¬äºŒè¡Œï¼šæ—¥æœŸç­›é€‰å’Œæ¸…ç©ºæŒ‰é’® -->
                        <div style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 300px;">
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-date">æŒ‰æ—¥æœŸç­›é€‰ï¼š</label>
                                <div style="display: flex; gap: 8px;">
                                    <input type="date" id="history-start-date" lang="zh-CN" onchange="filterOperationHistory()" style="flex: 1; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                    <span style="color: var(--gold); align-self: center; white-space: nowrap;" data-i18n="to">è‡³</span>
                                    <input type="date" id="history-end-date" lang="zh-CN" onchange="filterOperationHistory()" style="flex: 1; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            <div style="flex-shrink: 0;">
                                <button onclick="clearHistoryFilters()" style="min-width: 120px; background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; white-space: nowrap;" data-i18n="clear-all-filters">æ¸…ç©ºç­›é€‰</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="operation-history-list" style="margin-top: 20px;">
                        <!-- æ“ä½œå†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-operation-history">æš‚æ— æ“ä½œå†å²è®°å½•</p>
                    </div>
                </div>
                
                <!-- æ•°æ®å¯¹æ¯”æŸ¥çœ‹é¡µé¢ -->
                <div id="data-comparison" class="content-area">
                    <h1 data-i18n="data-comparison">æ•°æ®å¯¹æ¯”æŸ¥çœ‹</h1>
                    <div id="comparison-content" style="margin-top: 20px;">
                        <p style="color: #cccccc; text-align: center; padding: 40px;" data-i18n="select-history-record">è¯·ä»æ“ä½œå†å²è®°å½•ä¸­é€‰æ‹©è¦å¯¹æ¯”çš„è®°å½•</p>
                    </div>
                </div>
                
                <!-- å®¡è®¡æŠ¥å‘Šé¡µé¢ -->
                <div id="audit-report" class="content-area">
                    <h1 data-i18n="audit-report">å®¡è®¡æŠ¥å‘Š</h1>
                    
                    <!-- æŠ¥å‘Šç»Ÿè®¡ -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); text-align: center;">
                            <h3 style="color: var(--gold); margin: 0 0 10px 0;" data-i18n="total-operations">æ€»æ“ä½œæ•°</h3>
                            <div id="total-operations-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                        <div style="background: rgba(144, 238, 144, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); text-align: center;">
                            <h3 style="color: #90EE90; margin: 0 0 10px 0;" data-i18n="today-operations">ä»Šæ—¥æ“ä½œ</h3>
                            <div id="today-operations-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                        <div style="background: rgba(135, 206, 235, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); text-align: center;">
                            <h3 style="color: #87CEEB; margin: 0 0 10px 0;" data-i18n="active-users">æ´»è·ƒç”¨æˆ·</h3>
                            <div id="active-users-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                        <div style="background: rgba(255, 182, 193, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(255, 182, 193, 0.3); text-align: center;">
                            <h3 style="color: #FFB6C1; margin: 0 0 10px 0;" data-i18n="critical-operations">é‡è¦æ“ä½œ</h3>
                            <div id="critical-operations-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                    </div>
                    
                    <div id="audit-report-content" style="margin-top: 20px;">
                        <!-- å®¡è®¡æŠ¥å‘Šå†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-audit-data">æš‚æ— å®¡è®¡æ•°æ®</p>
                    </div>
                </div>
                
                <!-- å®¡æ‰¹ç®¡ç†é¡µé¢ -->
                <div id="approval-management" class="content-area">
                    <h1 data-i18n="approval-management">å®¡æ‰¹ç®¡ç†</h1>
                    
                    <div class="approval-controls" style="margin-bottom: 20px; padding: 20px; background: rgba(212, 175, 55, 0.1); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; gap: 20px; align-items: center;">
                            <div>
                                <label for="approvalStatusFilter" style="color: var(--gold); margin-right: 10px;" data-i18n="status">çŠ¶æ€ï¼š</label>
                                <select id="approvalStatusFilter" onchange="displayApprovalList()" style="padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-status">å…¨éƒ¨çŠ¶æ€</option>
                                    <option value="pending" data-i18n="pending">å¾…å®¡æ‰¹</option>
                                    <option value="approved" data-i18n="approved">å·²æ‰¹å‡†</option>
                                    <option value="rejected" data-i18n="rejected">å·²æ‹’ç»</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="approval-list" id="approvalList">
                        <!-- å®¡æ‰¹åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-pending-approvals">æš‚æ— å¾…å®¡æ‰¹é¡¹ç›®</p>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                Â© 2025 MAKE IT HAIR Professional. All rights reserved.
            </div>
        </div>
    </div>

    <!-- ä¿ç•™æ‰€æœ‰æ¨¡æ€æ¡† -->
    
    <!-- åˆ›å»ºäº§å“åˆ†ç±»æ¨¡æ€æ¡† -->
    <div id="createCategoryModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: var(--dark-gray); padding: 30px; border-radius: 10px; border: 1px solid var(--gold); width: 500px; max-width: 95vw; max-height: 95vh; overflow-y: auto;">
            <h2 style="color: var(--gold); margin-top: 0;" data-i18n="create-product-category">åˆ›å»ºäº§å“åˆ†ç±»</h2>
            <form id="createCategoryForm">
                <div style="margin-bottom: 20px;">
                    <label for="categoryNameCN" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-cn">åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="categoryNameCN" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="categoryNameKO" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-ko">åˆ†ç±»åç§°ï¼ˆéŸ©æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="categoryNameKO" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="categoryDescription" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-description">åˆ†ç±»æè¿°ï¼š</label>
                    <textarea id="categoryDescription" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; min-height: 80px; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeCreateCategoryModal()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" data-i18n="cancel">å–æ¶ˆ</button>
                    <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" data-i18n="create">åˆ›å»º</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- ç¼–è¾‘äº§å“åˆ†ç±»æ¨¡æ€æ¡† -->
    <div id="editCategoryModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: var(--dark-gray); padding: 30px; border-radius: 10px; border: 1px solid var(--gold); width: 500px; max-width: 95vw; max-height: 95vh; overflow-y: auto;">
            <h2 style="color: var(--gold); margin-top: 0;" data-i18n="edit-product-category">ç¼–è¾‘äº§å“åˆ†ç±»</h2>
            <form id="editCategoryForm">
                <input type="hidden" id="editCategoryId">
                <div style="margin-bottom: 20px;">
                    <label for="editCategoryNameCN" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-cn">åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="editCategoryNameCN" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="editCategoryNameKO" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-ko">åˆ†ç±»åç§°ï¼ˆéŸ©æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="editCategoryNameKO" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="editCategoryDescription" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-description">åˆ†ç±»æè¿°ï¼š</label>
                    <textarea id="editCategoryDescription" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; min-height: 80px; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeEditCategoryModal()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" data-i18n="cancel">å–æ¶ˆ</button>
                    <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" data-i18n="save">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // æ²™é¾™æ’åºç›¸å…³å˜é‡
        let currentSortField = 'default';
        let currentSortOrder = 'asc';
        let currentSalonsData = [];
        let currentFilter = null;
        let currentPage = 1;
        let itemsPerPage = 20;
        
        // åˆ‡æ¢æ²™é¾™æ’åº
        function toggleSalonSort(field) {
            if (currentSortField === field) {
                // å¦‚æœæ˜¯åŒä¸€ä¸ªå­—æ®µï¼Œåˆ‡æ¢æ’åºæ–¹å‘
                currentSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';
            } else {
                // å¦‚æœæ˜¯ä¸åŒå­—æ®µï¼Œè®¾ç½®ä¸ºå‡åº
                currentSortField = field;
                currentSortOrder = 'asc';
            }
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            updateSortButtons();
            
            // é‡æ–°æ˜¾ç¤ºåˆ—è¡¨
            displaySalonList(currentFilter, 1);
        }
        
        // æ›´æ–°æ’åºæŒ‰é’®æ ·å¼
        function updateSortButtons() {
            const buttons = document.querySelectorAll('[id^="sort-"]');
            buttons.forEach(button => {
                const field = button.id.replace('sort-', '');
                const i18nKey = button.getAttribute('data-i18n');
                let buttonText = getText(i18nKey);
                
                // é‡ç½®èƒŒæ™¯è‰²
                if (field === currentSortField) {
                    button.style.background = 'rgba(135, 206, 235, 0.4)';
                    // æ ¹æ®æ’åºæ–¹å‘æ·»åŠ ç®­å¤´
                    if (currentSortOrder === 'asc') {
                        buttonText += ' â†‘';
                    } else {
                        buttonText += ' â†“';
                    }
                } else {
                    button.style.background = 'rgba(135, 206, 235, 0.2)';
                    // ä¸æ˜¯å½“å‰å­—æ®µæ—¶æ˜¾ç¤ºé»˜è®¤ä¸Šç®­å¤´
                    buttonText += ' â†‘';
                }
                
                // ç›´æ¥è®¾ç½®æ–‡æœ¬å†…å®¹
                button.textContent = buttonText;
            });
        }
        
        // æ›´æ–°æ’åºæŒ‰é’®æ‚¬åœæ ·å¼
        function updateSortButtonStyle(button) {
            const field = button.id.replace('sort-', '');
            if (field !== currentSortField) {
                button.style.background = 'rgba(135, 206, 235, 0.2)';
            }
        }
        
        // æ·»åŠ ä¾§è¾¹æ èœå•å¤„ç†é€»è¾‘
        function toggleSidebarSubmenu(menuType) {
            // å…ˆæ‰¾åˆ°å¯¹åº”çš„å­èœå•å…ƒç´ 
            const targetSubmenu = document.getElementById(`sidebar-${menuType}-submenu`);
            const menuItem = targetSubmenu.parentNode;
            
            if (targetSubmenu) {
                // å¦‚æœå­èœå•å·²ç»å±•å¼€ï¼Œåˆ™æ”¶èµ·å®ƒ
                if (targetSubmenu.classList.contains('active')) {
                    targetSubmenu.classList.remove('active');
                    menuItem.classList.remove('active');
                } else {
                    // å…ˆå…³é—­æ‰€æœ‰å…¶ä»–å±•å¼€çš„å­èœå•
                    document.querySelectorAll('.sidebar-submenu').forEach(submenu => {
                        submenu.classList.remove('active');
                        submenu.parentNode.classList.remove('active');
                    });
                    
                    // å±•å¼€å½“å‰å­èœå•
                    targetSubmenu.classList.add('active');
                    menuItem.classList.add('active');
                }
            }
        }
        
        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        function toggleMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('active');
            
            // åŒæ—¶åˆ‡æ¢æ±‰å ¡èœå•å›¾æ ‡
            const hamburgerLines = document.querySelectorAll('.hamburger-line');
            hamburgerLines[0].style.transform = sidebar.classList.contains('active') ? 'rotate(45deg) translate(5px, 5px)' : '';
            hamburgerLines[1].style.opacity = sidebar.classList.contains('active') ? '0' : '1';
            hamburgerLines[2].style.transform = sidebar.classList.contains('active') ? 'rotate(-45deg) translate(5px, -5px)' : '';
        }
        
        // ä¿®æ”¹å†…å®¹æ˜¾ç¤ºå‡½æ•°ï¼Œä¸å†éœ€è¦éšè—ä¸»èœå•ï¼Œç›´æ¥æ˜¾ç¤ºå†…å®¹
        function showContent(contentId, event) {
            if (event) {
                event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
            }
            
            // æƒé™æ£€æŸ¥ï¼šåˆ é™¤åŠŸèƒ½åªæœ‰ç®¡ç†å‘˜å¯ä»¥è®¿é—®
            if (contentId === 'delete-salon' || contentId === 'delete-employee') {
                if (!hasPermission('admin')) {
                    alert(contentId === 'delete-salon' ? getText('no-permission-delete-salon') : getText('no-permission-delete-employee'));
                    return;
                }
            }
            
            // å–æ¶ˆæ‰€æœ‰å­èœå•é¡¹çš„é«˜äº®
            document.querySelectorAll('.sidebar-submenu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // é«˜äº®è¢«ç‚¹å‡»çš„å­èœå•é¡¹
            if (event) {
                event.currentTarget.classList.add('active');
            }
            
            // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
            const allContent = document.querySelectorAll('.content-area');
            allContent.forEach(content => {
                content.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰æ‹©çš„å†…å®¹åŒºåŸŸ
            const targetContent = document.getElementById(contentId);
            if (targetContent) {
                targetContent.classList.add('active');
                
                // åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œæ˜¾ç¤ºå†…å®¹åè‡ªåŠ¨å…³é—­ä¾§è¾¹æ 
                if (window.innerWidth <= 900) {
                    document.querySelector('.sidebar').classList.remove('active');
                }
                
                // å¦‚æœæ˜¯æ²™é¾™ä¿¡æ¯é¡µé¢ï¼Œåˆ·æ–°åˆ—è¡¨å’Œç­›é€‰é€‰é¡¹
                if (contentId === 'salon-info') {
                    // é‡ç½®æ’åºçŠ¶æ€ä¸ºé»˜è®¤
                    currentSortField = 'default';
                    currentSortOrder = '';
                    updateResponsibleFilterOptions();
                    displaySalonList(null, 1); // åˆå§‹åŒ–æ—¶æ˜¾ç¤ºç¬¬ä¸€é¡µ
                    
                    // ç¡®ä¿æ²™é¾™æ•°é‡æ­£ç¡®æ˜¾ç¤º
                    setTimeout(() => {
                        const salons = getSalons();
                        const salonCountText = document.getElementById('salon-count-text');
                        if (salonCountText) {
                            salonCountText.textContent = getText('total-salons-count').replace('{count}', salons.length);
                        }
                    }, 100);
                }
                
                // å¦‚æœæ˜¯æ–°å¢æ²™é¾™é¡µé¢ï¼Œæ›´æ–°è´Ÿè´£èŒå‘˜é€‰é¡¹
                if (contentId === 'new-salon') {
                    updateResponsibleEmployeeOptions();
                    checkBatchUploadPermission();
                }
                
                // å¦‚æœæ˜¯åˆ é™¤æ²™é¾™é¡µé¢ï¼Œæ›´æ–°é€‰é¡¹
                if (contentId === 'delete-salon') {
                    updateDeleteSalonOptions();
                }
                
                // å¦‚æœæ˜¯èŒå‘˜åˆ—è¡¨é¡µé¢ï¼Œåˆ·æ–°åˆ—è¡¨
                if (contentId === 'employee-list') {
                    displayEmployeeList();
                }
                
                // å¦‚æœæ˜¯æ–°å¢èŒå‘˜é¡µé¢ï¼Œæ ¹æ®æƒé™è®¾ç½®èŒä½é€‰é¡¹
                if (contentId === 'new-employee') {
                    const positionSelect = document.getElementById('employeePosition');
                    if (currentUser && currentUser.position === 'manager') {
                        // ç»ç†åªèƒ½åˆ›å»ºä¸šåŠ¡å‘˜
                        positionSelect.innerHTML = `<option value="salesperson" data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>`;
                    } else {
                        // ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºæ‰€æœ‰çº§åˆ«
                        positionSelect.innerHTML = `
                            <option value="salesperson" data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>
                            <option value="manager" data-i18n="manager">ç»ç†</option>
                            <option value="admin" data-i18n="admin">ç®¡ç†å‘˜</option>
                        `;
                    }
                    updateTexts(); // æ›´æ–°ç¿»è¯‘
                }
                
                // å¦‚æœæ˜¯åˆ é™¤èŒå‘˜é¡µé¢ï¼Œæ›´æ–°é€‰é¡¹
                if (contentId === 'delete-employee') {
                    updateDeleteEmployeeOptions();
                }
                
                // å¦‚æœæ˜¯æ“ä½œå†å²é¡µé¢ï¼ŒåŠ è½½å†å²è®°å½•
                if (contentId === 'operation-history') {
                    displayOperationHistory();
                }
                
                // å¦‚æœæ˜¯å®¡è®¡æŠ¥å‘Šé¡µé¢ï¼Œç”ŸæˆæŠ¥å‘Š
                if (contentId === 'audit-report') {
                    displayAuditReport();
                }
                
                // å¦‚æœæ˜¯å®¡æ‰¹ç®¡ç†é¡µé¢ï¼Œæ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨
                if (contentId === 'approval-management') {
                    displayApprovalList();
                }
                
                // å¦‚æœæ˜¯äº§å“åˆ†ç±»é¡µé¢ï¼Œæ˜¾ç¤ºäº§å“åˆ†ç±»åˆ—è¡¨
                if (contentId === 'product-category') {
                    displayProductCategories();
                }
                
                // å¦‚æœæ˜¯æ·»åŠ äº§å“é¡µé¢ï¼ŒåŠ è½½äº§å“åˆ†ç±»é€‰é¡¹
                if (contentId === 'add-product') {
                    loadProductCategories();
                }
                
                // å¦‚æœæ˜¯äº§å“åˆ—è¡¨é¡µé¢ï¼Œæ˜¾ç¤ºäº§å“åˆ—è¡¨
                if (contentId === 'product-list') {
                    displayProductList();
                }
                
                // å¦‚æœæ˜¯ä¸šç»©ç›®æ ‡é¡µé¢ï¼Œæ˜¾ç¤ºä¸šç»©ç›®æ ‡
                if (contentId === 'performance-target') {
                    displayPerformanceTargets();
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–ç³»ç»Ÿ
        window.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–ç³»ç»Ÿ
            initializeSystem();
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ä»ç™»å½•é¡µé¢è·³è½¬è¿‡æ¥çš„
            const fromLogin = sessionStorage.getItem('fromLogin');
            if (fromLogin === 'true') {
                // æ¸…é™¤æ ‡è®°ï¼Œé˜²æ­¢åˆ·æ–°é¡µé¢æ—¶å†æ¬¡è§¦å‘
                sessionStorage.removeItem('fromLogin');
                
                // è‡ªåŠ¨ç‚¹å‡»æ¦‚å†µæ€»è§ˆèœå•
                showContent('dashboard');
                
                // æ ‡è®°æ¦‚å†µæ€»è§ˆèœå•ä¸ºæ¿€æ´»çŠ¶æ€
                document.querySelectorAll('.sidebar-menu-item').forEach(item => {
                    if (item.querySelector('[data-i18n="dashboard"]')) {
                        const header = item.querySelector('.sidebar-menu-header');
                        if (header) {
                            header.classList.add('active');
                        }
                    }
                });
            }
            
            // åˆå§‹åŒ–ç²’å­æ•ˆæœ
            if (typeof tsParticles !== 'undefined') {
                tsParticles.load("tsparticles", {
                    particles: {
                        number: {
                            value: 30,
                            density: {
                                enable: true,
                                value_area: 800
                            }
                        },
                        color: {
                            value: "#D4AF37"
                        },
                        shape: {
                            type: "circle",
                        },
                        opacity: {
                            value: 0.3,
                            random: true,
                            anim: {
                                enable: true,
                                speed: 1,
                                opacity_min: 0.1,
                                sync: false
                            }
                        },
                        size: {
                            value: 3,
                            random: true,
                            anim: {
                                enable: true,
                                speed: 2,
                                size_min: 0.1,
                                sync: false
                            }
                        },
                        line_linked: {
                            enable: true,
                            distance: 150,
                            color: "#D4AF37",
                            opacity: 0.2,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 1,
                            direction: "none",
                            random: true,
                            straight: false,
                            out_mode: "out",
                            bounce: false,
                        }
                    },
                    interactivity: {
                        detect_on: "canvas",
                        events: {
                            onhover: {
                                enable: true,
                                mode: "grab"
                            },
                            onclick: {
                                enable: true,
                                mode: "push"
                            },
                            resize: true
                        },
                        modes: {
                            grab: {
                                distance: 140,
                                line_linked: {
                                    opacity: 0.5
                                }
                            },
                            push: {
                                particles_nb: 3
                            }
                        }
                    },
                    retina_detect: true
                });
            }
        });
        
        // å…¼å®¹æ—§çš„showSubmenuå‡½æ•°ï¼Œé‡å®šå‘åˆ°æ–°çš„toggleSidebarSubmenuå‡½æ•°
        function showSubmenu(menuType) {
            toggleSidebarSubmenu(menuType);
        }
        
        // å…¼å®¹æ—§çš„backToMenuå‡½æ•°ï¼Œç°åœ¨ä¸éœ€è¦ä»»ä½•æ“ä½œ
        function backToMenu() {
            // ä¸æ‰§è¡Œä»»ä½•æ“ä½œ
        }

        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function switchLanguage(lang) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('btn-' + lang).classList.add('active');
            
            // ä¿å­˜è¯­è¨€è®¾ç½®
            localStorage.setItem('language', lang);
            
            // æ›´æ–°ç•Œé¢æ–‡æœ¬
            updateTexts();
            
            // ç‰¹åˆ«å¤„ç†æ²™é¾™æ•°é‡æ˜¾ç¤º
            const salonCountText = document.getElementById('salon-count-text');
            if (salonCountText) {
                const salons = getSalons();
                const key = salonCountText.getAttribute('data-i18n');
                if (key === 'total-salons-count' || key === 'district-salons-count') {
                    salonCountText.textContent = getText(key).replace('{count}', salons.length);
                }
            }
        }
        
        // è·å–ç¿»è¯‘æ–‡æœ¬
        function getText(key) {
            const currentLanguage = localStorage.getItem('language') || 'zh';
            const translations = {
                zh: {
                    'employee-management': 'èŒå‘˜ç®¡ç†',
                    'new-employee': 'æ–°å¢èŒå‘˜',
                    'employee-list': 'èŒå‘˜åˆ—è¡¨',
                    'delete-employee': 'åˆ é™¤èŒå‘˜',
                    'customer-management': 'å®¢æˆ·ä¿¡æ¯ç®¡ç†',
                    'new-salon': 'æ–°å¢æ²™é¾™',
                    'salon-info': 'æ²™é¾™ä¿¡æ¯',
                    'delete-salon': 'åˆ é™¤æ²™é¾™',
                    'product-management': 'äº§å“ä¿¡æ¯ç®¡ç†',
                    'add-product': 'æ–°å¢äº§å“',
                    'product-list': 'äº§å“åˆ—è¡¨',
                    'product-category': 'äº§å“åˆ†ç±»',
                    'inventory-management': 'åº“å­˜ä¿¡æ¯ç®¡ç†',
                    'stock-check': 'åº“å­˜ç›˜ç‚¹',
                    'restock-alert': 'è¡¥è´§æé†’',
                    'usage-record': 'ä½¿ç”¨è®°å½•',
                    'finance-management': 'è´¢åŠ¡ä¿¡æ¯ç®¡ç†',
                    'income-record': 'æ”¶å…¥è®°å½•',
                    'expense-record': 'æ”¯å‡ºè®°å½•',
                    'financial-report': 'è´¢åŠ¡æŠ¥è¡¨',
                    'performance-target': 'ä¸šç»©ç›®æ ‡',
                    'audit-management': 'æ“ä½œå†å²ç®¡ç†',
                    'operation-history': 'æ“ä½œå†å²è®°å½•',
                    'data-comparison': 'æ•°æ®å¯¹æ¯”æŸ¥çœ‹',
                    'audit-report': 'å®¡è®¡æŠ¥å‘Š',
                    'approval-management': 'å®¡æ‰¹ç®¡ç†',
                    'system-title': 'Mesiaé¦–å°”è¥¿éƒ¨åœ°åŒºç®¡ç†ç³»ç»Ÿ',
                    'logout': 'é€€å‡ºç™»å½•',
                    'employee-name': 'å§“å',
                    'employee-position': 'èŒä½',
                    'employee-mobile': 'æ‰‹æœºå·',
                    'actions': 'æ“ä½œ',
                    'edit-btn': 'ç¼–è¾‘',
                    'delete': 'åˆ é™¤',
                    'admin': 'ç®¡ç†å‘˜',
                    'manager': 'ç»ç†',
                    'salesperson': 'ä¸šåŠ¡å‘˜',
                    'system-admin': 'ç³»ç»Ÿç®¡ç†å‘˜',
                    'no-employees': 'æš‚æ— èŒå‘˜æ•°æ®',
                    'employee-list-desc': 'è¿™é‡Œæ˜¾ç¤ºæ‰€æœ‰èŒå‘˜çš„è¯¦ç»†ä¿¡æ¯åˆ—è¡¨ã€‚',
                    'dashboard': 'æ¦‚å†µæ€»è§ˆ',
                    'main-performance': 'ä¸»è¦ä¸šç»©',
                    'pending-business': 'ä¸»è¦æœªå¤„ç†ä¸šåŠ¡',
                    'category': 'åˆ†ç±»',
                    'target': 'ç›®æ ‡',
                    'actual': 'å®ç»©',
                    'progress-rate': 'è¿›åº¦ç‡(%)',
                    'my-performance': 'æˆ‘çš„ä¸šç»©',
                    'agency-total-performance': 'ä»£ç†åº—æ€»ä¸šç»©',
                    'transaction-salon-count': 'äº¤æ˜“æ²™é¾™æ•°',
                    'count': 'ä»¶æ•°',
                    'outbound-pending': 'å‡ºåº“æœªæ‰¹å‡†',
                    'payment-pending': 'æ”¶æ¬¾æœªæ‰¹å‡†',
                    'delivery-pending': 'æ´¾é€æœªå®Œæˆ',
                    'unit-label': '[å•ä½:åƒå…ƒ]',
                    'basic-info': 'åŸºæœ¬ä¿¡æ¯',
                    'login-account': 'ç™»å½•è´¦å·',
                    'password': 'å¯†ç ',
                    'contact-info': 'è”ç³»ä¿¡æ¯',
                    'mobile-number': 'æ‰‹æœºå·',
                    'bank-account-info': 'é“¶è¡Œè´¦æˆ·ä¿¡æ¯',
                    'bank-name': 'é“¶è¡Œåç§°',
                    'bank-account': 'é“¶è¡Œè´¦å·',
                    'account-holder': 'è´¦æˆ·æŒæœ‰äºº',
                    'bank-branch': 'å¤‡æ³¨',
                    'username-required': 'è¯·è¾“å…¥ç™»å½•è´¦å·',
                    'password-required': 'è¯·è¾“å…¥å¯†ç ',
                    'employee-name-required': 'è¯·è¾“å…¥èŒå‘˜å§“å',
                    'employee-added-success': 'èŒå‘˜æ·»åŠ æˆåŠŸ',
                    'username-already-exists': 'è¯¥ç™»å½•è´¦å·å·²å­˜åœ¨',
                    'employee-detail': 'èŒå‘˜è¯¦æƒ…',
                    'edit-employee': 'ç¼–è¾‘èŒå‘˜',
                    'employee-updated-success': 'èŒå‘˜ä¿¡æ¯æ›´æ–°æˆåŠŸ',
                    'cancel': 'å–æ¶ˆ',
                    'save': 'ä¿å­˜',
                    'add': 'æ·»åŠ ',
                    'create': 'åˆ›å»º',
                    'confirm-delete': 'ç¡®è®¤åˆ é™¤',
                    'all-districts': 'å…¨éƒ¨åŒºåŸŸ',
                    'district-guro': 'ä¹è€åŒº',
                    'district-yeongdeungpo': 'æ°¸ç™»æµ¦åŒº',
                    'district-geumcheon': 'è¡¿å·åŒº',
                    'district-overseas': 'æµ·å¤–åŒºåŸŸ',
                    'sort-by': 'æ’åºæ–¹å¼',
                    'sort-name': 'æ²™é¾™åç§°',
                    'sort-address': 'åœ°å€åç§°',
                    'sort-add-time': 'æ–°å¢æ—¶é—´',
                    'sort-last-transaction': 'æœ€åäº¤æ˜“',
                    'sort-overdue-days': 'æ¬ æ¬¾å¤©æ•°',
                    'sort-overdue-amount': 'æ¬ æ¬¾é‡‘é¢',
                    'sort-default': 'é»˜è®¤æ’åº',
                    'batch-upload-salon': 'æ‰¹é‡ä¸Šä¼ æ²™é¾™',
                    'batch-upload-desc': 'ä¸Šä¼ åŒ…å«æ²™é¾™ä¿¡æ¯çš„Excelæ–‡ä»¶ï¼Œæ ¼å¼è¦æ±‚ï¼šç¬¬1è¡Œä¸ºæ ‡é¢˜è¡Œï¼Œç¬¬2è¡Œå¼€å§‹ä¸ºæ²™é¾™æ•°æ®ï¼ˆæ²™é¾™åç§°ã€æ²™é¾™åœ°å€ã€é™¢é•¿å§“åã€æ‰‹æœºå·ç ã€åº—é“ºç”µè¯ã€ç”µå­é‚®ç®±ï¼‰ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è§£æå¹¶å¯¼å…¥åˆ°æ²™é¾™æ•°æ®åº“ã€‚',
                    'select-file': 'é€‰æ‹©æ–‡ä»¶',
                    'click-to-upload-file': 'ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶',
                    'file-format-hint': 'æ”¯æŒExcelæ ¼å¼(.xlsx, .xls)',
                    'process-file': 'å¤„ç†æ–‡ä»¶',
                    'download-template': 'ä¸‹è½½æ¨¡æ¿',
                    'salon-basic-info': 'æ²™é¾™åŸºæœ¬ä¿¡æ¯',
                    'director-info': 'é™¢é•¿ä¿¡æ¯',
                    'director-name': 'é™¢é•¿å§“å',
                    'director-mobile': 'æ‰‹æœºå·ç ',
                    'salon-email': 'ç”µå­é‚®ç®±',
                    'responsible-employee-info': 'è´Ÿè´£èŒå‘˜',
                    'salon-address-required': 'æ²™é¾™åœ°å€ä¸èƒ½ä¸ºç©º',
                    'please-select-file': 'è¯·é€‰æ‹©æ–‡ä»¶',
                    'remove-file': 'ç§»é™¤æ–‡ä»¶',
                    'data-preview': 'æ•°æ®é¢„è§ˆ',
                    'select-all': 'å…¨é€‰',
                    'selected-count': 'å·²é€‰æ‹© 0 ä¸ªæ²™é¾™',
                    'assign-responsible': 'æŒ‡å®šè´Ÿè´£äºº',
                    'assign-responsible-btn': 'åˆ†é…è´Ÿè´£äºº',
                    'confirm-batch-create': 'ç¡®è®¤æ‰¹é‡åˆ›å»º',
                    'salon-region': 'æ²™é¾™åŒºåŸŸ',
                    'director-name-col': 'é™¢é•¿å§“å',
                    'responsible-person': 'è´Ÿè´£äºº',
                    'unassigned': 'æœªæŒ‡å®š',
                    'select': 'é€‰æ‹©',
                    'business-license': 'è¥ä¸šæ‰§ç…§å·ç ',
                    'salon-name': 'æ²™é¾™åç§°',
                    'salon-address': 'æ²™é¾™åœ°å€',
                    'salon-name-required': 'è¯·è¾“å…¥æ²™é¾™åç§°',
                    'salon-added-success': 'æ²™é¾™æ·»åŠ æˆåŠŸ',
                    'no-salon-info': 'æš‚æ— æ²™é¾™ä¿¡æ¯',
                    'add-salon-tip': 'ç‚¹å‡»"æ–°å¢æ²™é¾™"æ¥æ·»åŠ ç¬¬ä¸€ä¸ªæ²™é¾™',
                    'salon-address-label': 'åœ°å€',
                    'business-license-label': 'è¥ä¸šæ‰§ç…§',
                    'responsible-employee': 'è´Ÿè´£èŒå‘˜',
                    'director-name': 'é™¢é•¿å§“å',
                    'director-mobile': 'é™¢é•¿æ‰‹æœº',
                    'salon-phone': 'åº—é“ºç”µè¯',
                    'salon-email': 'ç”µå­é‚®ç®±',
                    'add-time': 'æ·»åŠ æ—¶é—´',
                    'please-select-employee': 'è¯·é€‰æ‹©èŒå‘˜',
                    'please-select-to-assign': 'è¯·å…ˆé€‰æ‹©è¦åˆ†é…çš„æ²™é¾™',
                    'assign-success': 'å·²ä¸º {count} ä¸ªæ²™é¾™åˆ†é…è´Ÿè´£äººï¼š{name}',
                    'please-select-to-create': 'è¯·å…ˆé€‰æ‹©è¦åˆ›å»ºçš„æ²™é¾™',
                    'batch-create-complete': 'æ‰¹é‡åˆ›å»ºå®Œæˆï¼æˆåŠŸï¼š{success} ä¸ªï¼Œå¤±è´¥ï¼š{fail} ä¸ª',
                    'view-transactions-not-implemented': 'æŸ¥çœ‹äº¤æ˜“è®°å½•åŠŸèƒ½å°šæœªå®ç°',
                    'edit-salon-not-implemented': 'ç¼–è¾‘æ²™é¾™åŠŸèƒ½å°šæœªå®ç°',
                    'salon-list': 'æ²™é¾™åˆ—è¡¨',
                    'salon-detail': 'æ²™é¾™è¯¦æƒ…',
                    'basic-info': 'åŸºæœ¬ä¿¡æ¯',
                    'contact-info': 'è”ç³»ä¿¡æ¯',
                    'director-info': 'é™¢é•¿ä¿¡æ¯',
                    'other-info': 'å…¶ä»–ä¿¡æ¯',
                    'not-specified': 'æœªæŒ‡å®š',
                    'unspecified': 'æœªæŒ‡å®š',
                    'salon-not-found': 'æ²™é¾™æœªæ‰¾åˆ°',
                    'salon-updated-success': 'æ²™é¾™ä¿¡æ¯æ›´æ–°æˆåŠŸ',
                    'total-salons-count': 'æ€»è®¡ {count} å®¶æ²™é¾™',
                    'district-salons-count': 'å…± {count} å®¶æ²™é¾™',
                    'no-salon-info': 'æš‚æ— æ²™é¾™ä¿¡æ¯',
                    'add-salon-tip': 'ç‚¹å‡»"æ–°å¢æ²™é¾™"æ¥æ·»åŠ ç¬¬ä¸€ä¸ªæ²™é¾™',
                    'no-salesperson-salons': 'æ‚¨æš‚æœªåˆ†é…åˆ°ä»»ä½•æ²™é¾™',
                    'salesperson-salon-tip': 'è¯·è”ç³»ç®¡ç†å‘˜ä¸ºæ‚¨åˆ†é…æ²™é¾™',
                    'salon-name-required': 'è¯·è¾“å…¥æ²™é¾™åç§°',
                    'no-matching-salons': 'æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ²™é¾™',
                    'please-select-salon': 'è¯·é€‰æ‹©æ²™é¾™',
                    'salon-deleted-success': 'æ²™é¾™åˆ é™¤æˆåŠŸ',
                    'salon-delete-failed': 'æ²™é¾™åˆ é™¤å¤±è´¥',
                    'clear-filters': 'æ¸…ç©ºç­›é€‰',
                    'select': 'é€‰æ‹©',
                    'salon-region': 'åŒºåŸŸ',
                    'responsible-person': 'è´Ÿè´£äºº',
                    'all-employees': 'æ‰€æœ‰èŒå‘˜',
                    'unassigned': 'æœªåˆ†é…',
                    'admin': 'ç®¡ç†å‘˜',
                    'manager': 'ç»ç†',
                    'salesperson': 'ä¸šåŠ¡å‘˜',
                    'no-salons': 'æš‚æ— æ²™é¾™æ•°æ®',
                    'no-salon-info': 'æš‚æ— æ²™é¾™ä¿¡æ¯',
                    'add-salon-tip': 'ç‚¹å‡»"æ–°å¢æ²™é¾™"æ¥æ·»åŠ ç¬¬ä¸€ä¸ªæ²™é¾™',
                    'no-salesperson-salons': 'æ‚¨æš‚æœªåˆ†é…åˆ°ä»»ä½•æ²™é¾™',
                    'salesperson-salon-tip': 'è¯·è”ç³»ç®¡ç†å‘˜ä¸ºæ‚¨åˆ†é…æ²™é¾™',
                    'total-salons-count': 'æ€»è®¡ {count} å®¶æ²™é¾™',
                    'district-salons-count': 'å…± {count} å®¶æ²™é¾™',
                    'search-salon-placeholder': 'æœç´¢æ²™é¾™å/é™¢é•¿å/æ‰‹æœºå·...',
                    'salon-phone': 'åº—é“ºç”µè¯',
                    // å…¶ä»–ç¿»è¯‘...
                },
                ko: {
                    'employee-management': 'ì§ì› ê´€ë¦¬',
                    'new-employee': 'ì§ì› ì¶”ê°€',
                    'employee-list': 'ì§ì› ëª©ë¡',
                    'delete-employee': 'ì§ì› ì‚­ì œ',
                    'customer-management': 'ê³ ê° ì •ë³´ ê´€ë¦¬',
                    'new-salon': 'ì‚´ë¡± ì¶”ê°€',
                    'salon-info': 'ì‚´ë¡± ì •ë³´',
                    'delete-salon': 'ì‚´ë¡± ì‚­ì œ',
                    'product-management': 'ì œí’ˆ ì •ë³´ ê´€ë¦¬',
                    'add-product': 'ì œí’ˆ ì¶”ê°€',
                    'product-list': 'ì œí’ˆ ëª©ë¡',
                    'product-category': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬',
                    'inventory-management': 'ì¬ê³  ì •ë³´ ê´€ë¦¬',
                    'stock-check': 'ì¬ê³  í™•ì¸',
                    'restock-alert': 'ì¬ê³  ë³´ì¶© ì•Œë¦¼',
                    'usage-record': 'ì‚¬ìš© ê¸°ë¡',
                    'finance-management': 'ì¬ë¬´ ì •ë³´ ê´€ë¦¬',
                    'income-record': 'ìˆ˜ì… ê¸°ë¡',
                    'expense-record': 'ì§€ì¶œ ê¸°ë¡',
                    'financial-report': 'ì¬ë¬´ ë³´ê³ ì„œ',
                    'performance-target': 'ì‹¤ì  ëª©í‘œ',
                    'audit-management': 'ì‘ì—… ê¸°ë¡ ê´€ë¦¬',
                    'operation-history': 'ì‘ì—… ê¸°ë¡',
                    'data-comparison': 'ë°ì´í„° ë¹„êµ',
                    'audit-report': 'ê°ì‚¬ ë³´ê³ ì„œ',
                    'approval-management': 'ìŠ¹ì¸ ê´€ë¦¬',
                    'system-title': 'ë©”ì‹œì•„ì„œë¶€ì§€ì ê´€ë¦¬ì‹œìŠ¤í…œ',
                    'logout': 'ë¡œê·¸ì•„ì›ƒ',
                    'employee-name': 'ì´ë¦„',
                    'employee-position': 'ì§ìœ„',
                    'employee-mobile': 'íœ´ëŒ€í°',
                    'actions': 'ì‘ì—…',
                    'edit-btn': 'í¸ì§‘',
                    'delete': 'ì‚­ì œ',
                    'admin': 'ê´€ë¦¬ì',
                    'manager': 'ë§¤ë‹ˆì €',
                    'salesperson': 'ì˜ì—…ì‚¬ì›',
                    'system-admin': 'ì‹œìŠ¤í…œ ê´€ë¦¬ì',
                    'no-employees': 'ì§ì› ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'employee-list-desc': 'ëª¨ë“  ì§ì›ì˜ ìƒì„¸ ì •ë³´ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.',
                    'dashboard': 'ê°œìš”',
                    'main-performance': 'ì£¼ìš” ì‹¤ì ',
                    'pending-business': 'ì£¼ìš” ì—…ë¬´ ë¯¸ì²˜ë¦¬',
                    'category': 'ë¶„ë¥˜',
                    'target': 'ëª©í‘œ',
                    'actual': 'ì‹¤ì ',
                    'progress-rate': 'ì§„í–‰ë¥ (%)',
                    'my-performance': 'ë‚´ ì‹¤ì ',
                    'agency-total-performance': 'ëŒ€ë¦¬ì  ì´ì‹¤ì ',
                    'transaction-salon-count': 'ê±°ë˜ ì‚´ë¡± ìˆ˜',
                    'count': 'ê±´ìˆ˜',
                    'outbound-pending': 'ì¶œê³  ë¯¸ìŠ¹ì¸',
                    'payment-pending': 'ìˆ˜ê¸ˆ ë¯¸ìŠ¹ì¸',
                    'delivery-pending': 'ë°°ì†¡ ë¯¸ì™„ë£Œ',
                    'unit-label': '[ë‹¨ìœ„:ì²œì›]',
                    'basic-info': 'ê¸°ë³¸ ì •ë³´',
                    'login-account': 'ë¡œê·¸ì¸ ê³„ì •',
                    'password': 'ë¹„ë°€ë²ˆí˜¸',
                    'contact-info': 'ì—°ë½ì²˜ ì •ë³´',
                    'mobile-number': 'íœ´ëŒ€í° ë²ˆí˜¸',
                    'bank-account-info': 'ì€í–‰ ê³„ì¢Œ ì •ë³´',
                    'bank-name': 'ì€í–‰ëª…',
                    'bank-account': 'ê³„ì¢Œë²ˆí˜¸',
                    'account-holder': 'ì˜ˆê¸ˆì£¼',
                    'bank-branch': 'ë¹„ê³ ',
                    'username-required': 'ë¡œê·¸ì¸ ê³„ì •ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'password-required': 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”',
                    'employee-name-required': 'ì§ì› ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'employee-added-success': 'ì§ì› ì¶”ê°€ ì„±ê³µ',
                    'username-already-exists': 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë¡œê·¸ì¸ ê³„ì •ì…ë‹ˆë‹¤',
                    'employee-detail': 'ì§ì› ìƒì„¸ì •ë³´',
                    'edit-employee': 'ì§ì› í¸ì§‘',
                    'employee-updated-success': 'ì§ì› ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'cancel': 'ì·¨ì†Œ',
                    'save': 'ì €ì¥',
                    'add': 'ì¶”ê°€',
                    'create': 'ìƒì„±',
                    'confirm-delete': 'ì‚­ì œ í™•ì¸',
                    'all-districts': 'ì „ì²´ ì§€ì—­',
                    'district-guro': 'êµ¬ë¡œêµ¬',
                    'district-yeongdeungpo': 'ì˜ë“±í¬êµ¬',
                    'district-geumcheon': 'ê¸ˆì²œêµ¬',
                    'district-overseas': 'í•´ì™¸ ì§€ì—­',
                    'sort-by': 'ì •ë ¬ ë°©ì‹',
                    'sort-name': 'ì‚´ë¡± ì´ë¦„',
                    'sort-address': 'ì£¼ì†Œ ì´ë¦„',
                    'sort-add-time': 'ì¶”ê°€ ì‹œê°„',
                    'sort-last-transaction': 'ë§ˆì§€ë§‰ ê±°ë˜',
                    'sort-overdue-days': 'ì—°ì²´ ì¼ìˆ˜',
                    'sort-overdue-amount': 'ì—°ì²´ ê¸ˆì•¡',
                    'sort-default': 'ê¸°ë³¸ ì •ë ¬',
                    'batch-upload-salon': 'ì‚´ë¡± ì¼ê´„ ì—…ë¡œë“œ',
                    'batch-upload-desc': 'ì‚´ë¡± ì •ë³´ê°€ í¬í•¨ëœ Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”. í˜•ì‹ ìš”êµ¬ì‚¬í•­: ì²« ë²ˆì§¸ í–‰ì€ ì œëª© í–‰, ë‘ ë²ˆì§¸ í–‰ë¶€í„° ì‚´ë¡± ë°ì´í„°(ì‚´ë¡±ëª…, ì‚´ë¡± ì£¼ì†Œ, ì›ì¥ ì´ë¦„, íœ´ëŒ€í° ë²ˆí˜¸, ë§¤ì¥ ì „í™”, ì´ë©”ì¼)ë¥¼ ì…ë ¥í•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ì‚´ë¡± ë°ì´í„°ë² ì´ìŠ¤ì— ê°€ì ¸ì˜µë‹ˆë‹¤.',
                    'select-file': 'íŒŒì¼ ì„ íƒ',
                    'click-to-upload-file': 'íŒŒì¼ ì—…ë¡œë“œ í´ë¦­',
                    'file-format-hint': 'Excel í˜•ì‹ ì§€ì›(.xlsx, .xls)',
                    'process-file': 'íŒŒì¼ ì²˜ë¦¬',
                    'download-template': 'í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ',
                    'salon-basic-info': 'ì‚´ë¡± ê¸°ë³¸ ì •ë³´',
                    'director-info': 'ì›ì¥ ì •ë³´',
                    'director-name': 'ì›ì¥ ì„±í•¨',
                    'director-mobile': 'ì›ì¥ ì „í™”',
                    'salon-email': 'ì´ë©”ì¼',
                    'responsible-employee-info': 'ë‹´ë‹¹ ì§ì›',
                    'salon-address-required': 'ì‚´ë¡± ì£¼ì†ŒëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤',
                    'please-select-file': 'íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”',
                    'remove-file': 'íŒŒì¼ ì œê±°',
                    'data-preview': 'ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°',
                    'select-all': 'ì „ì²´ ì„ íƒ',
                    'selected-count': '0ê°œ ì‚´ë¡± ì„ íƒë¨',
                    'assign-responsible': 'ë‹´ë‹¹ì ì§€ì •',
                    'assign-responsible-btn': 'ë‹´ë‹¹ì ë°°ì •',
                    'confirm-batch-create': 'ì¼ê´„ ìƒì„± í™•ì¸',
                    'salon-region': 'ì‚´ë¡± ì§€ì—­',
                    'director-name-col': 'ì›ì¥ ì„±í•¨',
                    'responsible-person': 'ë‹´ë‹¹ì',
                    'unassigned': 'ë¯¸ì§€ì •',
                    'select': 'ì„ íƒ',
                    'business-license': 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸',
                    'salon-name': 'ì‚´ë¡± ì´ë¦„',
                    'salon-address': 'ì‚´ë¡± ì£¼ì†Œ',
                    'salon-name-required': 'ì‚´ë¡± ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'salon-added-success': 'ì‚´ë¡± ì¶”ê°€ ì„±ê³µ',
                    'no-salon-info': 'ì‚´ë¡± ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'add-salon-tip': 'ì‚´ë¡± ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì‚´ë¡±ì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'salon-address-label': 'ì£¼ì†Œ',
                    'business-license-label': 'ì‚¬ì—…ìë“±ë¡ì¦',
                    'responsible-employee': 'ë‹´ë‹¹ ì§ì›',
                    'director-name': 'ì›ì¥ ì„±í•¨',
                    'director-mobile': 'ì›ì¥ ì „í™”',
                    'salon-email': 'ì´ë©”ì¼',
                    'add-time': 'ì¶”ê°€ ì‹œê°„',
                    'please-select-employee': 'ì§ì›ì„ ì„ íƒí•˜ì„¸ìš”',
                    'please-select-to-assign': 'ë¨¼ì € í• ë‹¹í•  ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”',
                    'assign-success': '{count}ê°œ ì‚´ë¡±ì— ëŒ€í•œ ë‹´ë‹¹ìê°€ {name}ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'please-select-to-create': 'ë¨¼ì € ìƒì„±í•  ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”',
                    'batch-create-complete': 'ë°°ì¹˜ ìƒì„± ì™„ë£Œ! ì„±ê³µ: {success}ê°œ, ì‹¤íŒ¨: {fail}ê°œ',
                    'view-transactions-not-implemented': 'ê±°ë˜ ë‚´ì—­ ë³´ê¸° ê¸°ëŠ¥ì´ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤',
                    'edit-salon-not-implemented': 'ì‚´ë¡± í¸ì§‘ ê¸°ëŠ¥ì´ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤',
                    'salon-list': 'ì‚´ë¡± ëª©ë¡',
                    'salon-detail': 'ì‚´ë¡± ìƒì„¸ì •ë³´',
                    'basic-info': 'ê¸°ë³¸ ì •ë³´',
                    'contact-info': 'ì—°ë½ì²˜ ì •ë³´',
                    'director-info': 'ì›ì¥ ì •ë³´',
                    'other-info': 'ê¸°íƒ€ ì •ë³´',
                    'not-specified': 'ë¯¸ì§€ì •',
                    'unspecified': 'ë¯¸ì§€ì •',
                    'salon-not-found': 'ì‚´ë¡±ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
                    'salon-updated-success': 'ì‚´ë¡± ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'total-salons-count': 'ì´ {count}ê°œ ì‚´ë¡±',
                    'district-salons-count': 'ì´ {count}ê°œ ì‚´ë¡±',
                    'no-salon-info': 'ì‚´ë¡± ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'add-salon-tip': 'ì‚´ë¡± ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì‚´ë¡±ì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'no-salesperson-salons': 'í• ë‹¹ëœ ì‚´ë¡±ì´ ì—†ìŠµë‹ˆë‹¤',
                    'salesperson-salon-tip': 'ê´€ë¦¬ìì—ê²Œ ì‚´ë¡± í• ë‹¹ì„ ìš”ì²­í•˜ì„¸ìš”',
                    'salon-name-required': 'ì‚´ë¡± ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'no-matching-salons': 'ì¼ì¹˜í•˜ëŠ” ì‚´ë¡±ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
                    'please-select-salon': 'ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”',
                    'salon-deleted-success': 'ì‚´ë¡± ì‚­ì œ ì„±ê³µ',
                    'salon-delete-failed': 'ì‚´ë¡± ì‚­ì œ ì‹¤íŒ¨',
                    'clear-filters': 'í•„í„° ì§€ìš°ê¸°',
                    'select': 'ì„ íƒ',
                    'salon-region': 'ì§€ì—­',
                    'responsible-person': 'ë‹´ë‹¹ì',
                    'all-employees': 'ëª¨ë“  ì§ì›',
                    'unassigned': 'ë¯¸ë°°ì •',
                    'admin': 'ê´€ë¦¬ì',
                    'manager': 'ë§¤ë‹ˆì €',
                    'salesperson': 'ì˜ì—…ì‚¬ì›',
                    'no-salons': 'ì‚´ë¡± ë°ì´í„° ì—†ìŒ',
                    'no-salon-info': 'ì‚´ë¡± ì •ë³´ ì—†ìŒ',
                    'add-salon-tip': '"ì‚´ë¡± ì¶”ê°€"ë¥¼ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì‚´ë¡±ì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'no-salesperson-salons': 'í• ë‹¹ëœ ì‚´ë¡±ì´ ì—†ìŠµë‹ˆë‹¤',
                    'salesperson-salon-tip': 'ê´€ë¦¬ìì—ê²Œ ì‚´ë¡± í• ë‹¹ì„ ìš”ì²­í•˜ì„¸ìš”',
                    'total-salons-count': 'ì´ {count}ê°œ ì‚´ë¡±',
                    'district-salons-count': '{count}ê°œ ì‚´ë¡±',
                    'search-salon-placeholder': 'ì‚´ë¡±ëª…/ì›ì¥ëª…/íœ´ëŒ€í° ê²€ìƒ‰...',
                    'salon-phone': 'ì‚´ë¡± ì „í™”',
                    // å…¶ä»–ç¿»è¯‘...
                }
            };
            
            return translations[currentLanguage] && translations[currentLanguage][key] 
                ? translations[currentLanguage][key] 
                : key;
        }
        
        // æ›´æ–°ç•Œé¢æ–‡æœ¬
        function updateTexts() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                
                // ç‰¹æ®Šå¤„ç†æ²™é¾™æ•°é‡æ˜¾ç¤º
                if (key === 'total-salons-count' || key === 'district-salons-count') {
                    const salons = getSalons();
                    element.textContent = getText(key).replace('{count}', salons.length);
                } else {
                    element.textContent = getText(key);
                }
            });
            
            // æ›´æ–°å ä½ç¬¦æ–‡æœ¬
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                element.placeholder = getText(key);
            });
        }
        
        // ç”¨æˆ·èœå•åŠŸèƒ½
        function showUserMenu() {
            const dropdown = document.getElementById('userMenuDropdown');
            if (dropdown) {
                if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                    dropdown.style.display = 'block';
                    
                    // ç¡®ä¿ä¸‹æ‹‰èœå•ä¸­çš„æ–‡æœ¬ä¹Ÿæ›´æ–°
                    updateTexts();
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ï¼Œç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
                    setTimeout(() => {
                        document.addEventListener('click', closeMenuHandler);
                    }, 100);
                } else {
                    dropdown.style.display = 'none';
                    document.removeEventListener('click', closeMenuHandler);
                }
            }
        }
        
        // å…³é—­èœå•çš„å¤„ç†å‡½æ•°
        function closeMenuHandler(e) {
            const dropdown = document.getElementById('userMenuDropdown');
            const userName = document.getElementById('userName');
            
            // å¦‚æœç‚¹å‡»çš„ä¸æ˜¯ç”¨æˆ·åå’Œä¸‹æ‹‰èœå•ï¼Œåˆ™å…³é—­èœå•
            if (!userName.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
                document.removeEventListener('click', closeMenuHandler);
            }
        }
        
        // é€€å‡ºç™»å½•åŠŸèƒ½
        function logout() {
            // æ¸…é™¤ç™»å½•çŠ¶æ€
            localStorage.removeItem('isLoggedIn');
            // è·³è½¬åˆ°ç™»å½•é¡µé¢
            window.location.href = 'login.html';
        }
        
        // æ£€æŸ¥æƒé™
        function hasPermission(requiredPosition) {
            // å‡è®¾å½“å‰ç”¨æˆ·æ˜¯ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
            return true;
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            
            // å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
            if (isLoggedIn !== 'true') {
                window.location.href = 'login.html';
            }
        }
        
        // åˆå§‹åŒ–ç³»ç»Ÿ
        function initializeSystem() {
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            checkLoginStatus();
            
            // åˆå§‹åŒ–æµ‹è¯•æ•°æ®
            initializeTestData();
            
            // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
            const currentUserStr = localStorage.getItem('currentUser');
            if (currentUserStr) {
                window.currentUser = JSON.parse(currentUserStr);
                
                // æ›´æ–°ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯
                const userNameElement = document.getElementById('userName');
                const userPositionElement = document.getElementById('userPosition');
                
                if (userNameElement && window.currentUser.name) {
                    userNameElement.textContent = window.currentUser.name;
                    // ç§»é™¤data-i18nå±æ€§ï¼Œå› ä¸ºè¿™æ˜¯ç”¨æˆ·çš„å®é™…å§“å
                    userNameElement.removeAttribute('data-i18n');
                }
                
                if (userPositionElement && window.currentUser.position) {
                    // è®¾ç½®æ­£ç¡®çš„data-i18nå±æ€§
                    userPositionElement.setAttribute('data-i18n', window.currentUser.position);
                }
            }
            
            // åˆå§‹åŒ–è¯­è¨€
            const savedLanguage = localStorage.getItem('language') || 'zh';
            switchLanguage(savedLanguage);
            
            // æ˜¾ç¤ºé»˜è®¤å†…å®¹ - æ”¹ä¸ºæ˜¾ç¤ºæ¦‚å†µæ€»è§ˆ
            showContent('dashboard');
        }
        
        // åˆå§‹åŒ–æµ‹è¯•æ•°æ®
        function initializeTestData() {
            // å¦‚æœæ²¡æœ‰èŒå‘˜æ•°æ®ï¼Œåˆ›å»ºä¸€äº›æµ‹è¯•èŒå‘˜
            const employees = getEmployees();
            if (employees.length === 0) {
                const testEmployees = [
                    { id: 1, name: 'å¼ ç»ç†', position: 'manager', username: 'manager', password: '123456', mobile: '13800138001' },
                    { id: 2, name: 'æä¸šåŠ¡', position: 'salesperson', username: 'sales1', password: '123456', mobile: '13800138002' },
                    { id: 3, name: 'ç‹ä¸šåŠ¡', position: 'salesperson', username: 'sales2', password: '123456', mobile: '13800138003' },
                    { id: 4, name: 'åˆ˜ç®¡ç†å‘˜', position: 'admin', username: 'admin', password: '123456', mobile: '13800138004' }
                ];
                saveEmployees(testEmployees);
            }
            
            // å¦‚æœæ²¡æœ‰æ²™é¾™æ•°æ®ï¼Œåˆ›å»ºä¸€äº›æµ‹è¯•æ²™é¾™
            const salons = getSalons();
            if (salons.length === 0) {
                const testSalons = [
                    { 
                        id: 1, 
                        name: 'åä¸½ç¾å®¹å®¤', 
                        address: 'ì„œìš¸íŠ¹ë³„ì‹œ êµ¬ë¡œêµ¬ êµ¬ë¡œì¤‘ì•™ë¡œ 123', 
                        businessLicense: '123-45-67890',
                        responsibleEmployeeId: 2,
                        directorName: 'ê¹€ì›ì¥',
                        directorMobile: '010-1234-5678',
                        phone: '02-1234-5678',
                        email: 'salon1@example.com',
                        addTime: new Date().toISOString()
                    },
                    { 
                        id: 2, 
                        name: 'ì§€ì˜¤í—¤ì–´', 
                        address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 456', 
                        businessLicense: '234-56-78901',
                        responsibleEmployeeId: 3,
                        directorName: 'ì´ì‚¬ì¥',
                        directorMobile: '010-2345-6789',
                        phone: '02-2345-6789',
                        email: 'salon2@example.com',
                        addTime: new Date().toISOString()
                    },
                    { 
                        id: 3, 
                        name: 'ë“œë³´ë¼', 
                        address: 'ì„œìš¸íŠ¹ë³„ì‹œ ê¸ˆì²œêµ¬ ê¸ˆì²œë¡œ 789', 
                        businessLicense: '345-67-89012',
                        responsibleEmployeeId: 2,
                        directorName: 'ë°•ì›ì¥',
                        directorMobile: '010-3456-7890',
                        phone: '02-3456-7890',
                        email: 'salon3@example.com',
                        addTime: new Date().toISOString()
                    }
                ];
                saveSalons(testSalons);
            }
        }
        
        // æ›´æ–°äº§å“åˆ†ç±»
        function updateProductCategory() {
            const categoryId = parseInt(document.getElementById('editCategoryId').value);
            const categoryNameCN = document.getElementById('editCategoryNameCN').value.trim();
            const categoryNameKO = document.getElementById('editCategoryNameKO').value.trim();
            const categoryDescription = document.getElementById('editCategoryDescription').value.trim();
            
            // éªŒè¯è¾“å…¥
            if (!categoryNameCN || !categoryNameKO) {
                alert(getText('fill-category-names'));
                return false;
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒåç§°çš„åˆ†ç±»ï¼ˆæ’é™¤å½“å‰åˆ†ç±»ï¼‰
            const exists = productCategories.some(category => 
                category.id !== categoryId && 
                (category.nameCN === categoryNameCN || category.nameKO === categoryNameKO)
            );
            
            if (exists) {
                alert(getText('category-name-exists-edit'));
                return false;
            }
            
            // æ‰¾åˆ°å¹¶æ›´æ–°åˆ†ç±»
            const categoryIndex = productCategories.findIndex(cat => cat.id === categoryId);
            if (categoryIndex === -1) {
                alert('æœªæ‰¾åˆ°è¯¥äº§å“åˆ†ç±»ï¼');
                return false;
            }
            
            const oldCategory = { ...productCategories[categoryIndex] };
            
            // æ›´æ–°åˆ†ç±»ä¿¡æ¯
            productCategories[categoryIndex] = {
                ...productCategories[categoryIndex],
                nameCN: categoryNameCN,
                nameKO: categoryNameKO,
                description: categoryDescription,
                updateTime: new Date().toISOString(),
                updatedBy: currentUser?.name || 'ç³»ç»Ÿç®¡ç†å‘˜'
            };
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('productCategories', JSON.stringify(productCategories));
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'edit', 
                    'category', 
                    categoryId,
                    `${categoryNameCN}`,
                    `ç¼–è¾‘äº§å“åˆ†ç±»ï¼š${oldCategory.nameCN} (${oldCategory.nameKO}) â†’ ${categoryNameCN} (${categoryNameKO})`,
                    oldCategory,
                    productCategories[categoryIndex]
                );
            }
            
            // åˆ·æ–°åˆ†ç±»åˆ—è¡¨
            displayProductCategories();
            
            // å…³é—­æ¨¡æ€æ¡†
            closeEditCategoryModal();
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            alert(getText('category-updated-success'));
            
            return false;
        }
        
        // åˆ é™¤äº§å“åˆ†ç±»
        function deleteProductCategory(categoryId, categoryName) {
            if (!confirm(`ç¡®å®šè¦åˆ é™¤äº§å“åˆ†ç±»"${categoryName}"å—ï¼Ÿ\næ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                return;
            }
            
            // ä¿å­˜è¢«åˆ é™¤çš„åˆ†ç±»ä¿¡æ¯ï¼Œç”¨äºæ“ä½œè®°å½•
            const deletedCategory = productCategories.find(category => category.id === categoryId);
            
            // ä»æ•°ç»„ä¸­åˆ é™¤
            productCategories = productCategories.filter(category => category.id !== categoryId);
            
            // æ›´æ–°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('productCategories', JSON.stringify(productCategories));
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'delete', 
                    'category', 
                    categoryId,
                    categoryName,
                    `åˆ é™¤äº§å“åˆ†ç±»ï¼š${categoryName}`,
                    deletedCategory,
                    null
                );
            }
            
            // åˆ·æ–°åˆ—è¡¨
            displayProductCategories();
            
            alert('äº§å“åˆ†ç±»åˆ é™¤æˆåŠŸï¼');
        }

        // åŠ è½½äº§å“åˆ†ç±»é€‰é¡¹
        function loadProductCategories() {
            const selectElement = document.getElementById('productCategory');
            if (!selectElement) return;
            
            let optionsHtml = `<option value="" data-i18n="please-select-category">${getText('please-select-category')}</option>`;
            
            productCategories.forEach(category => {
                optionsHtml += `<option value="${category.id}">${category.nameCN} / ${category.nameKO}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // é¢„è§ˆäº§å“å›¾ç‰‡
        function previewProductImage(input) {
            const uploadIconArea = document.getElementById('uploadIconArea');
            const imagePreviewArea = document.getElementById('imagePreviewArea');
            const imagePreview = document.getElementById('productImagePreview');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    uploadIconArea.style.display = 'none';
                    imagePreviewArea.style.display = 'block';
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // ç§»é™¤äº§å“å›¾ç‰‡
        function removeProductImage(event) {
            event.stopPropagation();
            
            const uploadIconArea = document.getElementById('uploadIconArea');
            const imagePreviewArea = document.getElementById('imagePreviewArea');
            const productImageInput = document.getElementById('productImageInput');
            
            uploadIconArea.style.display = 'block';
            imagePreviewArea.style.display = 'none';
            productImageInput.value = '';
        }
        
        // æ ¼å¼åŒ–ä»·æ ¼è¾“å…¥
        function formatPriceInput(input) {
            // åªå…è®¸è¾“å…¥æ•°å­—å’Œå°æ•°ç‚¹
            let value = input.value.replace(/[^\d.]/g, '');
            
            // ç¡®ä¿åªæœ‰ä¸€ä¸ªå°æ•°ç‚¹
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts[0] + '.' + parts.slice(1).join('');
            }
            
            // æ ¼å¼åŒ–æ˜¾ç¤º
            if (value && !isNaN(parseFloat(value))) {
                const numValue = parseFloat(value);
                input.value = formatNumber(numValue);
            } else if (value === '') {
                input.value = '';
            }
        }
        
        // æ ¼å¼åŒ–æ•°å­—ä¸ºåƒåˆ†ä½
        function formatNumber(num) {
            return num.toLocaleString('en-US');
        }
        
        // æ ¼å¼åŒ–è´§å¸æ˜¾ç¤º
        function formatCurrency(amount) {
            return 'â‚© ' + formatNumber(amount);
        }
        
        // å¤„ç†åˆ›å»ºäº§å“åˆ†ç±»è¡¨å•æäº¤
        document.getElementById('createCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            createProductCategory();
        });
        
        // å¤„ç†ç¼–è¾‘äº§å“åˆ†ç±»è¡¨å•æäº¤
        document.getElementById('editCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            updateProductCategory();
        });
        
        // ==================== äº§å“ç®¡ç†åŠŸèƒ½ ====================
        
        // è·å–äº§å“åˆ—è¡¨
        function getProducts() {
            return JSON.parse(localStorage.getItem('products') || '[]');
        }
        
        // ä¿å­˜äº§å“åˆ—è¡¨
        function saveProducts(products) {
            localStorage.setItem('products', JSON.stringify(products));
        }
        
        // æ·»åŠ äº§å“
        function addProduct(product) {
            const products = getProducts();
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒç¼–ç çš„äº§å“
            if (product.code && products.some(p => p.code === product.code)) {
                return false;
            }
            
            // æ·»åŠ äº§å“IDå’Œåˆ›å»ºæ—¶é—´
            product.id = Date.now();
            product.createTime = new Date().toISOString();
            product.createdBy = currentUser?.name || 'ç³»ç»Ÿç®¡ç†å‘˜';
            
            products.push(product);
            saveProducts(products);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'create',
                    'product',
                    product.id,
                    `${product.nameCN}`,
                    `åˆ›å»ºäº§å“ï¼š${product.nameCN} (${product.nameKO})`,
                    null,
                    product
                );
            }
            
            return true;
        }
        
        // æ˜¾ç¤ºäº§å“åˆ—è¡¨
        function displayProductList() {
            const products = getProducts();
            const container = document.getElementById('product-list');
            
            if (!container) return;
            
            // æ·»åŠ äº§å“åˆ—è¡¨æ ‡é¢˜å’Œæœç´¢æ¡†
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <p data-i18n="product-list-desc">ç®¡ç†æ‰€æœ‰äº§å“ä¿¡æ¯</p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="productSearchInput" placeholder="${getText('search-products')}" oninput="searchProducts()" style="padding: 8px 12px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                        <select id="productCategoryFilter" onchange="searchProducts()" style="padding: 8px 12px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                            <option value="" data-i18n="all-categories">æ‰€æœ‰åˆ†ç±»</option>
                        </select>
                    </div>
                </div>
            `;
            
            // æ·»åŠ äº§å“è¡¨æ ¼
            html += `
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                        <thead>
                            <tr style="background: rgba(212, 175, 55, 0.1); border-bottom: 2px solid var(--gold);">
                                <th style="padding: 12px 15px; text-align: left; color: var(--gold);" data-i18n="product-name">äº§å“åç§°</th>
                                <th style="padding: 12px 15px; text-align: left; color: var(--gold);" data-i18n="product-category">åˆ†ç±»</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="product-code">ç¼–ç </th>
                                <th style="padding: 12px 15px; text-align: right; color: var(--gold);" data-i18n="product-price">å•ä»·</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="stock">åº“å­˜</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="status">çŠ¶æ€</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="actions">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="productTableBody">
            `;
            
            // å¡«å……äº§å“æ•°æ®
            if (products.length === 0) {
                html += `
                    <tr>
                        <td colspan="7" style="padding: 20px; text-align: center; color: #cccccc;" data-i18n="no-products">æš‚æ— äº§å“æ•°æ®</td>
                    </tr>
                `;
            } else {
                products.forEach(product => {
                    // è·å–äº§å“åˆ†ç±»åç§°
                    let categoryName = '';
                    if (product.categoryId) {
                        const category = productCategories.find(c => c.id === parseInt(product.categoryId));
                        if (category) {
                            categoryName = category.nameCN;
                        }
                    }
                    
                    // æ ¼å¼åŒ–ä»·æ ¼
                    const formattedPrice = formatCurrency(parseFloat(product.price) || 0);
                    
                    // çŠ¶æ€æ ‡ç­¾
                    const statusLabel = product.isActive ? 
                        `<span style="background: #4CAF50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="active">å¯ç”¨</span>` : 
                        `<span style="background: #f44336; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="inactive">åœç”¨</span>`;
                    
                    // ä¿ƒé”€æ ‡ç­¾
                    const promotionalLabel = product.isPromotional ? 
                        `<span style="background: #FF9800; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; margin-left: 5px;" data-i18n="promotional">ä¿ƒé”€</span>` : 
                        '';
                    
                    html += `
                        <tr style="border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                            <td style="padding: 12px 15px;">
                                <div style="font-weight: bold; color: var(--text-light);">${product.nameCN}</div>
                                <div style="font-size: 0.9em; color: #aaaaaa;">${product.nameKO}</div>
                            </td>
                            <td style="padding: 12px 15px; color: #cccccc;">${categoryName || '-'}</td>
                            <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.code || '-'}</td>
                            <td style="padding: 12px 15px; text-align: right; color: var(--gold);">${formattedPrice}</td>
                            <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.stock || '0'}</td>
                            <td style="padding: 12px 15px; text-align: center;">
                                ${statusLabel}
                                ${promotionalLabel}
                            </td>
                            <td style="padding: 12px 15px; text-align: center;">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button onclick="viewProductDetail(${product.id})" style="background: var(--gold); color: var(--black); border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="view">æŸ¥çœ‹</button>
                                    <button onclick="editProduct(${product.id})" style="background: #4CAF50; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="edit-btn">ç¼–è¾‘</button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
            }
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            container.innerHTML = html;
            
            // æ›´æ–°åˆ†ç±»ç­›é€‰é€‰é¡¹
            updateProductCategoryFilterOptions();
            
            // æ›´æ–°ç¿»è¯‘
            updateTexts();
        }
        
        // æ›´æ–°äº§å“åˆ†ç±»ç­›é€‰é€‰é¡¹
        function updateProductCategoryFilterOptions() {
            const selectElement = document.getElementById('productCategoryFilter');
            if (!selectElement) return;
            
            let optionsHtml = `<option value="" data-i18n="all-categories">${getText('all-categories')}</option>`;
            
            productCategories.forEach(category => {
                optionsHtml += `<option value="${category.id}">${category.nameCN}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // æœç´¢äº§å“
        function searchProducts() {
            const searchInput = document.getElementById('productSearchInput');
            const categoryFilter = document.getElementById('productCategoryFilter');
            
            if (!searchInput || !categoryFilter) return;
            
            const searchTerm = searchInput.value.toLowerCase();
            const categoryId = categoryFilter.value ? parseInt(categoryFilter.value) : null;
            
            const products = getProducts();
            const filteredProducts = products.filter(product => {
                const matchesSearch = 
                    !searchTerm || 
                    product.nameCN.toLowerCase().includes(searchTerm) ||
                    product.nameKO.toLowerCase().includes(searchTerm) ||
                    (product.code && product.code.toLowerCase().includes(searchTerm)) ||
                    (product.description && product.description.toLowerCase().includes(searchTerm));
                
                const matchesCategory = !categoryId || product.categoryId === categoryId;
                
                return matchesSearch && matchesCategory;
            });
            
            // æ›´æ–°äº§å“è¡¨æ ¼
            updateProductTable(filteredProducts);
        }
        
        // æ›´æ–°äº§å“è¡¨æ ¼
        function updateProductTable(products) {
            const tableBody = document.getElementById('productTableBody');
            if (!tableBody) return;
            
            if (products.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="padding: 20px; text-align: center; color: #cccccc;" data-i18n="no-products-found">æœªæ‰¾åˆ°åŒ¹é…çš„äº§å“</td>
                    </tr>
                `;
                updateTexts();
                return;
            }
            
            let html = '';
            products.forEach(product => {
                // è·å–äº§å“åˆ†ç±»åç§°
                let categoryName = '';
                if (product.categoryId) {
                    const category = productCategories.find(c => c.id === parseInt(product.categoryId));
                    if (category) {
                        categoryName = category.nameCN;
                    }
                }
                
                // æ ¼å¼åŒ–ä»·æ ¼
                const formattedPrice = formatCurrency(parseFloat(product.price) || 0);
                
                // çŠ¶æ€æ ‡ç­¾
                const statusLabel = product.isActive ? 
                    `<span style="background: #4CAF50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="active">å¯ç”¨</span>` : 
                    `<span style="background: #f44336; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="inactive">åœç”¨</span>`;
                
                // ä¿ƒé”€æ ‡ç­¾
                const promotionalLabel = product.isPromotional ? 
                    `<span style="background: #FF9800; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; margin-left: 5px;" data-i18n="promotional">ä¿ƒé”€</span>` : 
                    '';
                
                html += `
                    <tr style="border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                        <td style="padding: 12px 15px;">
                            <div style="font-weight: bold; color: var(--text-light);">${product.nameCN}</div>
                            <div style="font-size: 0.9em; color: #aaaaaa;">${product.nameKO}</div>
                        </td>
                        <td style="padding: 12px 15px; color: #cccccc;">${categoryName || '-'}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.code || '-'}</td>
                        <td style="padding: 12px 15px; text-align: right; color: var(--gold);">${formattedPrice}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.stock || '0'}</td>
                        <td style="padding: 12px 15px; text-align: center;">
                            ${statusLabel}
                            ${promotionalLabel}
                        </td>
                        <td style="padding: 12px 15px; text-align: center;">
                            <div style="display: flex; gap: 5px; justify-content: center;">
                                <button onclick="viewProductDetail(${product.id})" style="background: var(--gold); color: var(--black); border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="view">æŸ¥çœ‹</button>
                                <button onclick="editProduct(${product.id})" style="background: #4CAF50; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="edit-btn">ç¼–è¾‘</button>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            updateTexts();
        }
        
        // å¤„ç†æ·»åŠ äº§å“è¡¨å•æäº¤
        document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // è·å–è¡¨å•æ•°æ®
            const productNameCN = document.getElementById('productNameCN').value.trim();
            const productNameKO = document.getElementById('productNameKO').value.trim();
            const productCategory = document.getElementById('productCategory').value;
            const productCode = document.getElementById('productCode').value.trim();
            const productPrice = document.getElementById('productPrice').value.replace(/[^\d.]/g, '');
            const productVolumePerUnit = document.getElementById('productVolumePerUnit').value.trim();
            const productBrand = document.getElementById('productBrand').value.trim();
            const productDescription = document.getElementById('productDescription').value.trim();
            
            // åº“å­˜ä¿¡æ¯
            const initialStock = parseInt(document.getElementById('initialStock').value) || 0;
            const minimumStock = parseInt(document.getElementById('minimumStock').value) || 0;
            const stockLocation = document.getElementById('stockLocation').value.trim();
            const enableAutoReorder = document.getElementById('enableAutoReorder').checked;
            
            // å…¶ä»–è®¾ç½®
            const isActive = document.getElementById('isActive').checked;
            const isPromotional = document.getElementById('isPromotional').checked;
            const productTags = document.getElementById('productTags').value.trim();
            
            // å›¾ç‰‡æ•°æ®
            const productImageInput = document.getElementById('productImageInput');
            let imageData = null;
            if (productImageInput.files && productImageInput.files[0]) {
                const reader = new FileReader();
                reader.readAsDataURL(productImageInput.files[0]);
                reader.onload = function(e) {
                    imageData = e.target.result;
                    
                    // ç»§ç»­æäº¤äº§å“
                    submitProduct();
                };
            } else {
                // æ²¡æœ‰å›¾ç‰‡ï¼Œç›´æ¥æäº¤äº§å“
                submitProduct();
            }
            
            // æäº¤äº§å“å‡½æ•°
            function submitProduct() {
                // éªŒè¯å¿…å¡«å­—æ®µ
                if (!productNameCN || !productNameKO) {
                    alert(getText('product-name-required'));
                    return;
                }
                
                // åˆ›å»ºäº§å“å¯¹è±¡
                const product = {
                    nameCN: productNameCN,
                    nameKO: productNameKO,
                    categoryId: productCategory || null,
                    code: productCode,
                    price: parseFloat(productPrice) || 0,
                    volumePerUnit: productVolumePerUnit,
                    brand: productBrand,
                    description: productDescription,
                    stock: initialStock,
                    minimumStock: minimumStock,
                    stockLocation: stockLocation,
                    enableAutoReorder: enableAutoReorder,
                    isActive: isActive,
                    isPromotional: isPromotional,
                    tags: productTags ? productTags.split(',').map(tag => tag.trim()) : [],
                    imageData: imageData
                };
                
                // æ·»åŠ äº§å“
                if (addProduct(product)) {
                    alert(getText('product-added-success'));
                    
                    // æ¸…ç©ºè¡¨å•
                    document.getElementById('addProductForm').reset();
                    
                    // é‡ç½®å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ
                    const uploadIconArea = document.getElementById('uploadIconArea');
                    const imagePreviewArea = document.getElementById('imagePreviewArea');
                    if (uploadIconArea && imagePreviewArea) {
                        uploadIconArea.style.display = 'block';
                        imagePreviewArea.style.display = 'none';
                    }
                    
                    // è·³è½¬åˆ°äº§å“åˆ—è¡¨
                    showContent('product-list');
                } else {
                    alert(getText('product-code-exists'));
                }
            }
        });
        
        // ==================== èŒå‘˜ç®¡ç†åŠŸèƒ½ ====================
        
        // è·å–èŒå‘˜åˆ—è¡¨
        function getEmployees() {
            return JSON.parse(localStorage.getItem('employees') || '[]');
        }
        
        // ä¿å­˜èŒå‘˜åˆ—è¡¨
        function saveEmployees(employees) {
            localStorage.setItem('employees', JSON.stringify(employees));
        }
        
        // æ·»åŠ èŒå‘˜
        function addEmployee(employee) {
            const employees = getEmployees();
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒç”¨æˆ·åçš„èŒå‘˜
            if (employee.username && employees.some(e => e.username === employee.username)) {
                return false;
            }
            
            // æ·»åŠ èŒå‘˜IDå’Œåˆ›å»ºæ—¶é—´
            employee.id = Date.now();
            employee.createTime = new Date().toISOString();
            
            employees.push(employee);
            saveEmployees(employees);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'create',
                    'employee',
                    employee.id,
                    employee.name,
                    `åˆ›å»ºèŒå‘˜ï¼š${employee.name}`,
                    null,
                    employee
                );
            }
            
            return true;
        }
        
        // æ›´æ–°èŒå‘˜
        function updateEmployee(updatedEmployee) {
            const employees = getEmployees();
            const index = employees.findIndex(e => e.id === updatedEmployee.id);
            
            if (index === -1) return false;
            
            // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨ï¼ˆæ’é™¤å½“å‰èŒå‘˜ï¼‰
            if (updatedEmployee.username && employees.some(e => e.username === updatedEmployee.username && e.id !== updatedEmployee.id)) {
                return false;
            }
            
            const oldEmployee = { ...employees[index] };
            
            // å¦‚æœæ²¡æœ‰æä¾›æ–°å¯†ç ï¼Œä¿ç•™æ—§å¯†ç 
            if (!updatedEmployee.password) {
                updatedEmployee.password = oldEmployee.password;
            }
            
            // æ›´æ–°èŒå‘˜ä¿¡æ¯
            employees[index] = {
                ...oldEmployee,
                ...updatedEmployee,
                updateTime: new Date().toISOString()
            };
            
            saveEmployees(employees);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'edit',
                    'employee',
                    updatedEmployee.id,
                    updatedEmployee.name,
                    `ç¼–è¾‘èŒå‘˜ï¼š${oldEmployee.name} â†’ ${updatedEmployee.name}`,
                    oldEmployee,
                    employees[index]
                );
            }
            
            return true;
        }
        
        // åˆ é™¤èŒå‘˜
        function deleteEmployee(employeeId) {
            const employees = getEmployees();
            const employeeToDelete = employees.find(e => e.id === employeeId);
            
            if (!employeeToDelete) return false;
            
            // ä»æ•°ç»„ä¸­åˆ é™¤
            const newEmployees = employees.filter(e => e.id !== employeeId);
            saveEmployees(newEmployees);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'delete',
                    'employee',
                    employeeId,
                    employeeToDelete.name,
                    `åˆ é™¤èŒå‘˜ï¼š${employeeToDelete.name}`,
                    employeeToDelete,
                    null
                );
            }
            
            return true;
        }
        
        // æ˜¾ç¤ºèŒå‘˜åˆ—è¡¨
        function displayEmployeeList() {
            const employees = getEmployees();
            const container = document.getElementById('employee-list-content');
            
            if (!container) return;
            
            if (employees.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-employees">æš‚æ— èŒå‘˜æ•°æ®</p>`;
                updateTexts();
                return;
            }
            
            // åˆ›å»ºèŒå‘˜åˆ—è¡¨è¡¨æ ¼
            let html = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: rgba(212, 175, 55, 0.1); border-bottom: 2px solid var(--gold);">
                            <th style="padding: 12px 15px; text-align: left; color: var(--gold);" data-i18n="employee-name">å§“å</th>
                            <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="employee-position">èŒä½</th>
                            <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="employee-mobile">æ‰‹æœºå·</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            employees.forEach(employee => {
                // è·å–èŒä½æ–‡æœ¬
                let positionText = '';
                switch (employee.position) {
                    case 'admin': positionText = getText('admin'); break;
                    case 'manager': positionText = getText('manager'); break;
                    case 'salesperson': positionText = getText('salesperson'); break;
                    default: positionText = employee.position;
                }
                
                html += `
                    <tr style="border-bottom: 1px solid rgba(212, 175, 55, 0.2); cursor: pointer;" onclick="showEmployeeDetail(${employee.id})">
                        <td style="padding: 12px 15px; color: var(--gold); text-decoration: underline;">${employee.name}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${positionText}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${employee.mobile || '-'}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
            `;
            
            container.innerHTML = html;
            updateTexts();
        }
        
        // ç¡®è®¤åˆ é™¤èŒå‘˜
        function confirmDeleteEmployee(employeeId, employeeName) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤èŒå‘˜"${employeeName}"å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                if (deleteEmployee(employeeId)) {
                    alert(getText('employee-deleted-success'));
                    displayEmployeeList();
                } else {
                    alert(getText('employee-delete-failed'));
                }
            }
        }
        
        // æ›´æ–°åˆ é™¤èŒå‘˜é€‰é¡¹
        function updateDeleteEmployeeOptions() {
            const selectElement = document.getElementById('deleteEmployeeSelect');
            if (!selectElement) return;
            
            const employees = getEmployees();
            
            let optionsHtml = `<option value="" data-i18n="please-select-employee">${getText('please-select-employee')}</option>`;
            
            employees.forEach(employee => {
                optionsHtml += `<option value="${employee.id}">${employee.name} (${employee.position === 'admin' ? getText('admin') : employee.position === 'manager' ? getText('manager') : getText('salesperson')})</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // åˆ é™¤é€‰å®šçš„èŒå‘˜
        function deleteSelectedEmployee() {
            const selectElement = document.getElementById('deleteEmployeeSelect');
            const employeeId = parseInt(selectElement.value);
            
            if (!employeeId) {
                alert(getText('please-select-employee'));
                return;
            }
            
            const employees = getEmployees();
            const employee = employees.find(e => e.id === employeeId);
            
            if (!employee) {
                alert(getText('employee-not-found'));
                return;
            }
            
            if (confirm(`ç¡®å®šè¦åˆ é™¤èŒå‘˜"${employee.name}"å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                if (deleteEmployee(employeeId)) {
                    alert(getText('employee-deleted-success'));
                    updateDeleteEmployeeOptions();
                } else {
                    alert(getText('employee-delete-failed'));
                }
            }
        }
        
        // æœç´¢æ²™é¾™
        function searchSalons() {
            const searchInput = document.getElementById('salonSearchInput');
            const responsibleFilter = document.getElementById('responsibleFilter');
            
            if (!searchInput || !responsibleFilter) return;
            
            const searchTerm = searchInput.value.trim();
            const responsibleId = responsibleFilter.value ? parseInt(responsibleFilter.value) : null;
            
            displaySalonList({
                search: searchTerm,
                responsibleId: responsibleId
            });
        }
        
        // æ›´æ–°åˆ é™¤æ²™é¾™é€‰é¡¹
        function updateDeleteSalonOptions() {
            const selectElement = document.getElementById('deleteSalonSelect');
            if (!selectElement) return;
            
            const salons = getSalons();
            
            let optionsHtml = `<option value="" data-i18n="please-select-salon">${getText('please-select-salon')}</option>`;
            
            salons.forEach(salon => {
                optionsHtml += `<option value="${salon.id}">${salon.name}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // åˆ é™¤é€‰å®šçš„æ²™é¾™
        function deleteSelectedSalon() {
            const selectElement = document.getElementById('deleteSalonSelect');
            const salonId = parseInt(selectElement.value);
            
            if (!salonId) {
                alert(getText('please-select-salon'));
                return;
            }
            
            const salons = getSalons();
            const salon = salons.find(s => s.id === salonId);
            
            if (!salon) {
                alert(getText('salon-not-found'));
                return;
            }
            
            if (confirm(`ç¡®å®šè¦åˆ é™¤æ²™é¾™"${salon.name}"å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                if (deleteSalon(salonId)) {
                    alert(getText('salon-deleted-success'));
                    updateDeleteSalonOptions();
                } else {
                    alert(getText('salon-delete-failed'));
                }
            }
        }
        
        // æ›´æ–°è´Ÿè´£èŒå‘˜é€‰é¡¹
        function updateResponsibleEmployeeOptions() {
            const responsibleSelect = document.getElementById('responsibleEmployee');
            const responsibleBatchSelect = document.getElementById('responsibleEmployeeSelect');
            
            const employees = getEmployees();
            let optionsHtml = `<option value="">${getText('please-select-employee')}</option>`;
            
            employees.forEach(employee => {
                optionsHtml += `<option value="${employee.id}">${employee.name}</option>`;
            });
            
            if (responsibleSelect) {
                responsibleSelect.innerHTML = optionsHtml;
            }
            
            if (responsibleBatchSelect) {
                responsibleBatchSelect.innerHTML = optionsHtml;
            }
        }
        
        // æ£€æŸ¥æ‰¹é‡ä¸Šä¼ æƒé™
        function checkBatchUploadPermission() {
            // è¿™é‡Œå¯ä»¥å®ç°æƒé™æ£€æŸ¥é€»è¾‘
        }
        
        // é¢„è§ˆæ²™é¾™æ–‡ä»¶
        function previewSalonFile(input) {
            const file = input.files[0];
            if (file) {
                const fileName = document.getElementById('fileName');
                const fileUploadIconArea = document.getElementById('fileUploadIconArea');
                const filePreviewArea = document.getElementById('filePreviewArea');
                
                fileName.textContent = file.name;
                fileUploadIconArea.style.display = 'none';
                filePreviewArea.style.display = 'block';
            }
        }
        
        // ç§»é™¤æ²™é¾™æ–‡ä»¶
        function removeSalonFile(event) {
            event.stopPropagation();
            
            const fileInput = document.getElementById('salonFileInput');
            const fileUploadIconArea = document.getElementById('fileUploadIconArea');
            const filePreviewArea = document.getElementById('filePreviewArea');
            
            fileInput.value = '';
            fileUploadIconArea.style.display = 'block';
            filePreviewArea.style.display = 'none';
        }
        
        // å¤„ç†æ²™é¾™æ–‡ä»¶
        function processSalonFile() {
            // æ£€æŸ¥SheetJSåº“æ˜¯å¦å·²åŠ è½½
            if (typeof XLSX === 'undefined') {
                alert('Excelå¤„ç†åº“å°šæœªåŠ è½½å®Œæˆï¼Œè¯·ç¨åå†è¯•ï¼');
                return;
            }
            
            const fileInput = document.getElementById('salonFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert(getText('please-select-file'));
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶ç±»å‹
            const fileName = file.name.toLowerCase();
            if (!fileName.endsWith('.xlsx') && !fileName.endsWith('.xls')) {
                alert('ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼è¯·ä¸Šä¼ Excelæ–‡ä»¶ï¼ˆ.xlsxæˆ–.xlsæ ¼å¼ï¼‰');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = e.target.result;
                    const workbook = XLSX.read(data, { type: 'binary' });
                    
                    // è§£æExcelæ–‡ä»¶
                    batchSalonData = parseExcelFile(workbook);
                    
                    if (batchSalonData.length === 0) {
                        alert('Excelæ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„æ²™é¾™æ•°æ®');
                        return;
                    }
                    
                    // æ˜¾ç¤ºé¢„è§ˆ
                    displayBatchPreview();
                    alert(`æ–‡ä»¶å¤„ç†æˆåŠŸï¼å…±è§£æå‡º ${batchSalonData.length} ä¸ªæ²™é¾™ä¿¡æ¯`);
                    
                } catch (error) {
                    alert('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);
                    console.error('Excelè§£æé”™è¯¯:', error);
                }
            };
            
            reader.onerror = function() {
                alert('æ–‡ä»¶è¯»å–å¤±è´¥');
            };
            
            reader.readAsBinaryString(file);
        }
        
        // è§£æExcelæ–‡ä»¶
        function parseExcelFile(workbook) {
            // æ£€æŸ¥æ˜¯å¦æœ‰å·¥ä½œè¡¨
            if (!workbook.SheetNames || workbook.SheetNames.length === 0) {
                throw new Error('Excelæ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°å·¥ä½œè¡¨');
            }
            
            // è·å–ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨
            const sheetName = workbook.SheetNames[0];
            const worksheet = workbook.Sheets[sheetName];
            
            if (!worksheet) {
                throw new Error(`æ— æ³•è¯»å–å·¥ä½œè¡¨ï¼š${sheetName}`);
            }
            
            // è½¬æ¢ä¸ºJSONæ ¼å¼
            const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
            
            if (jsonData.length === 0) {
                throw new Error('å·¥ä½œè¡¨ä¸­æ²¡æœ‰æ•°æ®');
            }
            
            if (jsonData.length < 3) {
                throw new Error('å·¥ä½œè¡¨æ•°æ®ä¸è¶³ï¼Œè‡³å°‘éœ€è¦3è¡Œï¼ˆæ ‡é¢˜è¡Œ+åˆ—æ ‡é¢˜è¡Œ+æ•°æ®è¡Œï¼‰');
            }
            
            // ä»ç¬¬äºŒè¡Œå¼€å§‹æŸ¥æ‰¾åˆ—æ ‡é¢˜ï¼ˆç´¢å¼•ä¸º1ï¼‰
            const headers = jsonData[1] || [];
            
            // æŸ¥æ‰¾æ²™é¾™åç§°åˆ—
            const nameIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return headerStr.includes('ì—…ì†Œëª…') || 
                       headerStr.includes('ì‚¬ì—…ìëª…') || 
                       headerStr.includes('ì—…ì²´ëª…') ||
                       headerStr.includes('ìƒí˜¸ëª…') ||
                       headerStr.includes('ìƒí˜¸') ||
                       headerStr.includes('ë¯¸ìš©ì‹¤') ||
                       headerStr.includes('í—¤ì–´ìƒµ') ||
                       headerStr.includes('ì‚´ë¡±') ||
                       headerStr.includes('ë§¤ì¥ëª…') ||
                       headerStr.includes('ì í¬ëª…') ||
                       headerStr.includes('ë¦¬ìŠ¤íŠ¸') ||
                       (headerStr.includes('ì´ë¦„') && !headerStr.includes('ëŒ€í‘œ')) ||
                       headerStr.includes('name');
            });
            
            // æŸ¥æ‰¾åœ°å€åˆ—
            const addressIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return (headerStr.includes('ì˜ì—…ì†Œ') && headerStr.includes('ì£¼ì†Œ')) || 
                       headerStr.includes('ì£¼ì†Œ') ||
                       headerStr.includes('ìœ„ì¹˜') ||
                       headerStr.includes('ì†Œì¬ì§€') ||
                       headerStr.includes('address') ||
                       headerStr.includes('location');
            });
            
            if (nameIndex === -1 || addressIndex === -1) {
                const missingColumns = [];
                const foundColumns = headers.filter(h => h).join('ã€');
                
                if (nameIndex === -1) missingColumns.push('æ²™é¾™åç§°åˆ—ï¼ˆå¦‚ï¼šì—…ì†Œëª…ã€ë¯¸ìš©ì‹¤ã€ìƒí˜¸ëª…ç­‰ï¼‰');
                if (addressIndex === -1) missingColumns.push('åœ°å€åˆ—ï¼ˆå¦‚ï¼šì£¼ì†Œã€ì˜ì—…ì†Œ ì£¼ì†Œã€ìœ„ì¹˜ç­‰ï¼‰');
                
                throw new Error(`Excelæ–‡ä»¶æ ¼å¼ä¸ç¬¦åˆè¦æ±‚ï¼\n\nç¼ºå°‘å¿…éœ€çš„åˆ—ï¼š${missingColumns.join('ã€')}\n\nå½“å‰ç¬¬2è¡Œçš„åˆ—æ ‡é¢˜ï¼š${foundColumns}\n\næœŸæœ›çš„Excelæ ¼å¼ï¼š\nç¬¬1è¡Œï¼šè¡¨æ ¼æ ‡é¢˜\nç¬¬2è¡Œï¼šåˆ—æ ‡é¢˜ï¼ˆå¿…é¡»åŒ…å«æ²™é¾™åç§°å’Œåœ°å€åˆ—ï¼‰\nç¬¬3è¡Œå¼€å§‹ï¼šå®é™…æ•°æ®`);
            }
            
            const salons = [];
            // ä»ç¬¬3è¡Œå¼€å§‹è¯»å–æ•°æ®ï¼ˆç´¢å¼•ä¸º2ï¼‰
            for (let i = 2; i < jsonData.length; i++) {
                const row = jsonData[i];
                if (!row || row.length === 0) continue;
                
                const name = row[nameIndex] ? row[nameIndex].toString().trim() : '';
                const address = row[addressIndex] ? row[addressIndex].toString().trim() : '';
                
                if (name && address) {
                    salons.push({
                        name: name,
                        address: address,
                        businessLicense: '', // å¯ä»¥åç»­æ·»åŠ åˆ—è§£æ
                        directorName: 'æœªæŒ‡å®š', // é»˜è®¤å€¼
                        directorMobile: '', // å¯ä»¥åç»­æ·»åŠ åˆ—è§£æ
                        phone: '', // å¯ä»¥åç»­æ·»åŠ åˆ—è§£æ
                        email: '', // å¯ä»¥åç»­æ·»åŠ åˆ—è§£æ
                        responsibleEmployeeId: null
                    });
                }
            }
            
            return salons;
        }
        
        // æ˜¾ç¤ºæ‰¹é‡é¢„è§ˆ
        function displayBatchPreview() {
            const dataPreviewArea = document.getElementById('dataPreviewArea');
            const dataPreviewTable = document.getElementById('dataPreviewTable');
            const confirmBtn = document.getElementById('confirmBatchCreateBtn');
            const cancelBtn = document.getElementById('cancelBatchBtn');
            
            // æ›´æ–°è´Ÿè´£èŒå‘˜é€‰é¡¹
            updateResponsibleEmployeeOptions();
            
            // æ„å»ºè¡¨æ ¼HTML
            let tableHtml = `
                <table style="width: 100%; border-collapse: collapse; background: var(--dark-gray); table-layout: fixed;">
                    <colgroup>
                        <col style="width: 8%;">  <!-- é€‰æ‹©åˆ— -->
                        <col style="width: 18%;">  <!-- æ²™é¾™åç§° -->
                        <col style="width: 35%;">  <!-- åœ°å€ -->
                        <col style="width: 12%;">  <!-- è¥ä¸šæ‰§ç…§ -->
                        <col style="width: 10%;">  <!-- åŒºåŸŸ -->
                        <col style="width: 10%;">  <!-- é™¢é•¿å§“å -->
                        <col style="width: 7%;">   <!-- è´Ÿè´£äºº -->
                    </colgroup>
                    <thead>
                        <tr style="background: rgba(135, 206, 235, 0.2);">
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; text-align: center; font-size: 0.9em;" data-i18n="select">é€‰æ‹©</th>
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.9em;" data-i18n="salon-name">æ²™é¾™åç§°</th>
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.9em;" data-i18n="salon-address">åœ°å€</th>
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.9em;" data-i18n="business-license">è¥ä¸šæ‰§ç…§</th>
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.9em;" data-i18n="salon-region">åŒºåŸŸ</th>
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.9em;" data-i18n="director-name">é™¢é•¿å§“å</th>
                            <th style="padding: 8px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.9em;" data-i18n="responsible-person">è´Ÿè´£äºº</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            batchSalonData.forEach((salon, index) => {
                const region = salon.address.includes('ì˜ë“±í¬êµ¬') ? 'æ°¸ç™»æµ¦åŒº' : getText('unspecified');
                const responsibleText = salon.responsibleEmployeeId ? 
                    getEmployees().find(e => e.id === salon.responsibleEmployeeId)?.name || getText('unassigned') : 
                    getText('unassigned');
                
                tableHtml += `
                    <tr style="border-bottom: 1px solid #444;">
                        <td style="padding: 6px; border: 1px solid #444; text-align: center;">
                            <input type="checkbox" data-index="${index}" onchange="updateSelectedCount()" style="transform: scale(1.1);">
                        </td>
                        <td style="padding: 6px; border: 1px solid #444; color: var(--text-light); font-size: 0.9em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${salon.name}">${salon.name}</td>
                        <td style="padding: 6px; border: 1px solid #444; color: var(--text-light); font-size: 0.85em; line-height: 1.3; word-wrap: break-word;" title="${salon.address}">${salon.address}</td>
                        <td style="padding: 6px; border: 1px solid #444; color: var(--gold); font-size: 0.85em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${salon.businessLicense || '-'}</td>
                        <td style="padding: 6px; border: 1px solid #444; color: var(--gold); font-size: 0.85em;">${region}</td>
                        <td style="padding: 6px; border: 1px solid #444; color: var(--gold); font-size: 0.85em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${salon.directorName}</td>
                        <td class="responsible-cell" style="padding: 6px; border: 1px solid #444; color: #aaa; font-size: 0.8em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${responsibleText}</td>
                    </tr>
                `;
            });
            
            tableHtml += `
                    </tbody>
                </table>
            `;
            
            dataPreviewTable.innerHTML = tableHtml;
            dataPreviewArea.style.display = 'block';
            confirmBtn.style.display = 'inline-block';
            cancelBtn.style.display = 'inline-block';
            
            updateTexts();
            updateSelectedCount();
        }
        
        // æ‰¹é‡æ•°æ®å­˜å‚¨
        let batchSalonData = [];
        
        // æ²™é¾™æ•°æ®ç®¡ç†å‡½æ•°
        function getSalons() {
            const salons = localStorage.getItem('salons');
            return salons ? JSON.parse(salons) : [];
        }
        
        function saveSalons(salons) {
            localStorage.setItem('salons', JSON.stringify(salons));
        }
        
        function addSalon(salon) {
            const salons = getSalons();
            salon.id = Date.now(); // ç®€å•çš„IDç”Ÿæˆ
            salon.addTime = new Date().toLocaleString('zh-CN');
            salon.joinDate = new Date(); // åŠ å…¥æ—¥æœŸï¼Œç”¨äºè®¡ç®—
            salon.transactions = []; // åˆå§‹åŒ–äº¤æ˜“è®°å½•æ•°ç»„
            salon.lastTransactionDate = null; // æœ€åä¸€æ¬¡äº¤æ˜“æ—¥æœŸ
            salons.push(salon);
            saveSalons(salons);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'create', 
                    'salon', 
                    salon.id, 
                    salon.name, 
                    `åˆ›å»ºæ–°æ²™é¾™ï¼š${salon.name}ï¼Œé™¢é•¿ï¼š${salon.directorName}`,
                    null,
                    salon
                );
            }
            
            return true;
        }
        
        function deleteSalon(salonId) {
            const salons = getSalons();
            const salonToDelete = salons.find(salon => salon.id === salonId);
            const filteredSalons = salons.filter(salon => salon.id !== salonId);
            saveSalons(filteredSalons);
            
            // è®°å½•æ“ä½œå†å²
            if (salonToDelete && typeof recordOperation === 'function') {
                recordOperation(
                    'delete', 
                    'salon', 
                    salonToDelete.id, 
                    salonToDelete.name, 
                    `åˆ é™¤æ²™é¾™ï¼š${salonToDelete.name}ï¼Œé™¢é•¿ï¼š${salonToDelete.directorName}`,
                    salonToDelete,
                    null
                );
            }
        }
        
        function updateSalon(updatedSalon) {
            const salons = getSalons();
            const index = salons.findIndex(salon => salon.id === updatedSalon.id);
            
            if (index !== -1) {
                const beforeData = JSON.parse(JSON.stringify(salons[index]));
                
                // ä¿ç•™åŸæœ‰çš„åˆ›å»ºæ—¶é—´å’Œäº¤æ˜“è®°å½•
                updatedSalon.addTime = salons[index].addTime;
                updatedSalon.joinDate = salons[index].joinDate;
                updatedSalon.transactions = salons[index].transactions;
                updatedSalon.lastTransactionDate = salons[index].lastTransactionDate;
                
                salons[index] = updatedSalon;
                saveSalons(salons);
                
                // è®°å½•æ“ä½œå†å²
                if (typeof recordOperation === 'function') {
                    recordOperation(
                        'edit', 
                        'salon', 
                        updatedSalon.id, 
                        updatedSalon.name, 
                        `ç¼–è¾‘æ²™é¾™ä¿¡æ¯ï¼š${updatedSalon.name}`,
                        beforeData,
                        updatedSalon
                    );
                }
                
                return true;
            }
            return false;
        }
        
        // æ˜¾ç¤ºæ²™é¾™åˆ—è¡¨ - æ”¯æŒæ’åºå’Œç­›é€‰
        function displaySalonList(filteredByDistrict = null, page = 1) {
            const salonListContainer = document.getElementById('salon-list-content');
            const salonCountText = document.getElementById('salon-count-text');
            let salons = getSalons();
            
            if (!salonListContainer) {
                console.error('salon-list-content element not found');
                return;
            }
            
            // æ ¹æ®æƒé™ç­›é€‰æ²™é¾™åˆ—è¡¨
            if (currentUser && currentUser.position === 'salesperson') {
                // ä¸šåŠ¡å‘˜åªèƒ½çœ‹åˆ°æŒ‡å®šç»™è‡ªå·±è´Ÿè´£çš„æ²™é¾™
                salons = salons.filter(salon => canSalespersonViewSalon(salon, currentUser.id));
            }
            
            // å¦‚æœæœ‰åŒºåŸŸç­›é€‰
            if (filteredByDistrict) {
                salons = salons.filter(salon => salon.district === filteredByDistrict);
            }
            
            // åº”ç”¨æ’åº
            if (currentSortField !== 'default') {
                salons = applySalonSort(salons, currentSortField, currentSortOrder);
            }
            
            // ä¿å­˜å½“å‰æ•°æ®å’Œç­›é€‰æ¡ä»¶
            currentSalonsData = salons;
            currentFilter = filteredByDistrict;
            currentPage = page;
            
            // æ›´æ–°æ²™é¾™æ€»æ•°æ˜¾ç¤º
            if (salonCountText) {
                if (filteredByDistrict) {
                    salonCountText.setAttribute('data-i18n', 'district-salons-count');
                    salonCountText.setAttribute('data-i18n-params', `{"count": "${salons.length}"}`);
                    salonCountText.textContent = getText('district-salons-count').replace('{count}', salons.length);
                } else {
                    salonCountText.setAttribute('data-i18n', 'total-salons-count');
                    salonCountText.setAttribute('data-i18n-params', `{"count": "${salons.length}"}`);
                    salonCountText.textContent = getText('total-salons-count').replace('{count}', salons.length);
                }
            }
            
            if (salons.length === 0) {
                let noSalonMessage = getText('no-salon-info');
                let tipMessage = getText('add-salon-tip');
                
                if (currentUser && currentUser.position === 'salesperson') {
                    noSalonMessage = getText('no-salesperson-salons');
                    tipMessage = getText('salesperson-salon-tip');
                }
                
                salonListContainer.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p>${noSalonMessage}</p>
                        <p style="font-size: 0.9em;">${tipMessage}</p>
                    </div>
                `;
                
                // æ›´æ–°æ²™é¾™æ€»æ•°æ˜¾ç¤º
                if (salonCountText) {
                    if (filteredByDistrict) {
                        salonCountText.setAttribute('data-i18n', 'district-salons-count');
                        salonCountText.setAttribute('data-i18n-params', '{"count": "0"}');
                        salonCountText.textContent = getText('district-salons-count').replace('{count}', 0);
                    } else {
                        salonCountText.setAttribute('data-i18n', 'total-salons-count');
                        salonCountText.setAttribute('data-i18n-params', '{"count": "0"}');
                        salonCountText.textContent = getText('total-salons-count').replace('{count}', 0);
                    }
                }
                return;
            }
            
            let html = `<div style="display: flex; flex-direction: column; gap: 8px;">`;
            
            salons.forEach((salon, index) => {
                const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
                
                html += `
                    <div onclick="showSalonDetail(${salon.id})" style="
                        display: flex; 
                        justify-content: space-between; 
                        align-items: center; 
                        padding: 12px 15px; 
                        background: rgba(212, 175, 55, 0.1); 
                        border-radius: 6px; 
                        border: 1px solid rgba(212, 175, 55, 0.3);
                        cursor: pointer;
                        transition: all 0.3s ease;
                        hover: background-color: rgba(212, 175, 55, 0.2);
                    " 
                    onmouseover="this.style.backgroundColor='rgba(212, 175, 55, 0.2)'" 
                    onmouseout="this.style.backgroundColor='rgba(212, 175, 55, 0.1)'">
                        <!-- å·¦ä¾§ï¼šåº—å -->
                        <div style="flex: 1; color: var(--gold); font-weight: bold; font-size: 1.1em;">
                            ${salon.name}
                        </div>
                        <!-- å³ä¾§ï¼šè´Ÿè´£èŒå‘˜ -->
                        <div style="color: #cccccc; font-size: 0.9em;">
                            ${responsibleEmployeeName}
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            salonListContainer.innerHTML = html;
        }
        
        // åº”ç”¨æ²™é¾™æ’åº
        function applySalonSort(salons, sortField, sortOrder) {
            if (sortField === 'default') {
                return salons; // è¿”å›åŸå§‹é¡ºåº
            }
            
            return salons.sort((a, b) => {
                let valueA, valueB;
                
                switch (sortField) {
                    case 'name':
                        valueA = a.name ? a.name.toLowerCase() : '';
                        valueB = b.name ? b.name.toLowerCase() : '';
                        break;
                    case 'address':
                        valueA = a.address ? a.address.toLowerCase() : '';
                        valueB = b.address ? b.address.toLowerCase() : '';
                        break;
                    case 'addTime':
                        // ç¡®ä¿æ—¥æœŸå­—ç¬¦ä¸²å¯ä»¥æ­£ç¡®æ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰æ—¶é—´åˆ™ä½¿ç”¨é»˜è®¤å€¼
                        valueA = a.addTime ? new Date(a.addTime).getTime() : 0;
                        valueB = b.addTime ? new Date(b.addTime).getTime() : 0;
                        break;
                    case 'lastTransaction':
                        // æœ€åäº¤æ˜“æ—¶é—´æ’åº
                        valueA = a.lastTransactionDate ? new Date(a.lastTransactionDate).getTime() : 0;
                        valueB = b.lastTransactionDate ? new Date(b.lastTransactionDate).getTime() : 0;
                        break;
                    case 'overdueDays':
                        // æ¬ æ¬¾å¤©æ•°æ’åº
                        valueA = calculateOverdueDays(a);
                        valueB = calculateOverdueDays(b);
                        break;
                    case 'overdueAmount':
                        // æ¬ æ¬¾é‡‘é¢æ’åº
                        valueA = calculateOverdueAmount(a);
                        valueB = calculateOverdueAmount(b);
                        break;
                    default:
                        return 0;
                }
                
                // å¤„ç†å­—ç¬¦ä¸²æ¯”è¾ƒ
                if (typeof valueA === 'string' && typeof valueB === 'string') {
                    const result = valueA.localeCompare(valueB);
                    return sortOrder === 'asc' ? result : -result;
                }
                
                // å¤„ç†æ•°å­—æ¯”è¾ƒ
                if (sortOrder === 'asc') {
                    return valueA - valueB;
                } else {
                    return valueB - valueA;
                }
            });
        }
        
        // è®¡ç®—æ¬ æ¬¾å¤©æ•°
        function calculateOverdueDays(salon) {
            if (!salon.lastTransactionDate) {
                return 0; // æ²¡æœ‰äº¤æ˜“è®°å½•
            }
            
            const lastDate = new Date(salon.lastTransactionDate);
            const today = new Date();
            const diffTime = today - lastDate;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            return Math.max(0, diffDays);
        }
        
        // è®¡ç®—æ¬ æ¬¾é‡‘é¢
        function calculateOverdueAmount(salon) {
            if (!salon.transactions || salon.transactions.length === 0) {
                return 0;
            }
            
            let totalAmount = 0;
            salon.transactions.forEach(transaction => {
                if (transaction.status === 'pending' || transaction.status === 'overdue') {
                    totalAmount += parseFloat(transaction.amount) || 0;
                }
            });
            
            return totalAmount;
        }
        
        // æ£€æŸ¥ä¸šåŠ¡å‘˜æ˜¯å¦å¯ä»¥æŸ¥çœ‹æ²™é¾™
        function canSalespersonViewSalon(salon, salespersonId) {
            // ä¸šåŠ¡å‘˜å¯ä»¥æŸ¥çœ‹åˆ†é…ç»™è‡ªå·±çš„æ²™é¾™
            return salon.responsibleEmployeeId == salespersonId;
        }
        
        // è·å–èŒå‘˜å§“å
        function getEmployeeName(employeeId) {
            if (!employeeId || employeeId === 'unassigned' || employeeId === '') {
                return getText('unassigned');
            }
            const employees = getEmployees();
            const employee = employees.find(emp => emp.id == employeeId);
            return employee ? employee.name : getText('unassigned');
        }
        
        // è·å–èŒä½æ–‡æœ¬
        function getPositionText(position) {
            switch (position) {
                case 'admin': return getText('admin');
                case 'manager': return getText('manager');
                case 'salesperson': return getText('salesperson');
                default: return position;
            }
        }
        
        // æ›´æ–°è´Ÿè´£èŒå‘˜ç­›é€‰é€‰é¡¹
        function updateResponsibleFilterOptions() {
            const selectElement = document.getElementById('responsibleFilter');
            if (!selectElement) return;
            
            const employees = getEmployees();
            let optionsHtml = `<option value="" data-i18n="all-employees">${getText('all-employees')}</option>`;
            
            employees.forEach(employee => {
                const positionText = getPositionText(employee.position);
                optionsHtml += `<option value="${employee.id}">${employee.name} - ${positionText}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
            updateTexts(); // ç¡®ä¿ç¿»è¯‘æ›´æ–°
        }
        
        // ä¸‹è½½Excelæ¨¡æ¿
        function downloadTemplate() {
            // æ£€æŸ¥SheetJSåº“æ˜¯å¦å·²åŠ è½½
            if (typeof XLSX === 'undefined') {
                alert('Excelå¤„ç†åº“å°šæœªåŠ è½½å®Œæˆï¼Œè¯·ç¨åå†è¯•ï¼');
                return;
            }
            
            const sampleData = [
                ['ì‚´ë¡± ì •ë³´ ì¼ê´„ ì—…ë¡œë“œ í…œí”Œë¦¿', '', '', ''],  // ç¬¬1è¡Œï¼šè¡¨æ ¼æ ‡é¢˜
                ['ì—…ì†Œëª…', 'ì˜ì—…ì†Œ ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'ëŒ€í‘œìëª…'],    // ç¬¬2è¡Œï¼šåˆ—æ ‡é¢˜
                ['ë¯¸ìš©ì‹¤ A', 'ì„œìš¸ êµ¬ë¡œêµ¬ êµ¬ë¡œì¤‘ì•™ë¡œ 12', '02-1234-5678', 'ê¹€ëŒ€í‘œ'],
                ['í—¤ì–´ìƒµ B', 'ì„œìš¸ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 34', '02-2345-6789', 'ì´ì‚¬ì¥'],
                ['ë·°í‹°ìƒµ C', 'ì„œìš¸ ê¸ˆì²œêµ¬ ê¸ˆì²œë¡œ 56', '02-3456-7890', 'ë°•ì›ì¥'],
                ['ì‚´ë¡± D', 'ë¶€ì‚° í•´ìš´ëŒ€êµ¬ í•´ìš´ëŒ€ë¡œ 78', '051-4567-8901', 'ìµœì›ì¥']
            ];
            
            try {
                // åˆ›å»ºæ–°çš„å·¥ä½œç°¿
                const workbook = XLSX.utils.book_new();
                
                // åˆ›å»ºå·¥ä½œè¡¨
                const worksheet = XLSX.utils.aoa_to_sheet(sampleData);
                
                // è®¾ç½®åˆ—å®½
                worksheet['!cols'] = [
                    { width: 25 }, // ì—…ì†Œëª…/æ ‡é¢˜
                    { width: 35 }, // ì˜ì—…ì†Œ ì£¼ì†Œ
                    { width: 15 }, // ì „í™”ë²ˆí˜¸
                    { width: 15 }  // ëŒ€í‘œìëª…
                ];
                
                // åˆå¹¶ç¬¬ä¸€è¡Œçš„å•å…ƒæ ¼ä½œä¸ºæ ‡é¢˜
                worksheet['!merges'] = [
                    { s: { r: 0, c: 0 }, e: { r: 0, c: 3 } }  // åˆå¹¶ç¬¬1è¡Œçš„A1åˆ°D1å•å…ƒæ ¼
                ];
                
                // æ·»åŠ å·¥ä½œè¡¨åˆ°å·¥ä½œç°¿
                XLSX.utils.book_append_sheet(workbook, worksheet, 'æ²™é¾™ä¿¡æ¯');
                
                // ä¸‹è½½Excelæ–‡ä»¶
                XLSX.writeFile(workbook, 'salon_template_sample.xlsx');
            } catch (error) {
                // å¦‚æœExcelç”Ÿæˆå¤±è´¥ï¼Œå›é€€åˆ°CSVæ ¼å¼
                console.warn('Excelç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨CSVæ ¼å¼:', error);
                const csvData = [
                    ['ì—…ì†Œëª…', 'ì˜ì—…ì†Œ ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'ëŒ€í‘œìëª…'],
                    ['ë¯¸ìš©ì‹¤ A', 'ì„œìš¸ êµ¬ë¡œêµ¬ êµ¬ë¡œì¤‘ì•™ë¡œ 12', '02-1234-5678', 'ê¹€ëŒ€í‘œ'],
                    ['í—¤ì–´ìƒµ B', 'ì„œìš¸ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 34', '02-2345-6789', 'ì´ì‚¬ì¥'],
                    ['ë·°í‹°ìƒµ C', 'ì„œìš¸ ê¸ˆì²œêµ¬ ê¸ˆì²œë¡œ 56', '02-3456-7890', 'ë°•ì›ì¥'],
                    ['ì‚´ë¡± D', 'ë¶€ì‚° í•´ìš´ëŒ€êµ¬ í•´ìš´ëŒ€ë¡œ 78', '051-4567-8901', 'ìµœì›ì¥']
                ];
                
                const csvContent = csvData.map(row => row.join(',')).join('\n');
                const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                link.setAttribute('href', url);
                link.setAttribute('download', 'salon_template_sample.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
        
        // åˆ‡æ¢å…¨é€‰
        function toggleSelectAll() {
            const selectAllCheckbox = document.getElementById('selectAll');
            // åªé€‰æ‹©æ•°æ®è¡Œçš„å¤é€‰æ¡†ï¼Œä¸åŒ…æ‹¬å…¨é€‰å¤é€‰æ¡†æœ¬èº«
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
            
            updateSelectedCount();
        }
        
        // æ›´æ–°é€‰ä¸­è®¡æ•°
        function updateSelectedCount() {
            // åªæŸ¥è¯¢æ•°æ®è¡Œçš„å¤é€‰æ¡†ï¼Œä¸åŒ…æ‹¬å…¨é€‰å¤é€‰æ¡†
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]:checked');
            const selectedCountElement = document.querySelector('[data-i18n="selected-count"]');
            
            if (selectedCountElement) {
                const count = checkboxes.length;
                const currentLanguage = localStorage.getItem('language') || 'zh';
                selectedCountElement.textContent = currentLanguage === 'ko' ? 
                    `${count}ê°œ ì‚´ë¡± ì„ íƒë¨` : 
                    `å·²é€‰æ‹© ${count} ä¸ªæ²™é¾™`;
            }
        }
        
        // åˆ†é…è´Ÿè´£äºº
        function assignResponsible() {
            const responsibleSelect = document.getElementById('responsibleEmployeeSelect');
            const responsibleId = responsibleSelect.value;
            
            if (!responsibleId) {
                alert(getText('please-select-employee'));
                return;
            }
            
            // åªæŸ¥è¯¢æ•°æ®è¡Œçš„å¤é€‰æ¡†
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert(getText('please-select-to-assign'));
                return;
            }
            
            const employees = getEmployees();
            const employee = employees.find(e => e.id === parseInt(responsibleId));
            const employeeName = employee ? employee.name : getText('unassigned');
            
            checkboxes.forEach(checkbox => {
                const row = checkbox.closest('tr');
                const index = parseInt(checkbox.dataset.index);
                
                if (batchSalonData[index]) {
                    batchSalonData[index].responsibleEmployeeId = responsibleId;
                    
                    // æ›´æ–°è¡¨æ ¼æ˜¾ç¤º
                    const responsibleCell = row.querySelector('.responsible-cell');
                    if (responsibleCell) {
                        responsibleCell.textContent = employeeName;
                        responsibleCell.style.color = '#4CAF50';
                    }
                }
            });
            
            const message = getText('assign-success').replace('{count}', checkboxes.length).replace('{name}', employeeName);
            alert(message);
        }
        
        // ç¡®è®¤æ‰¹é‡åˆ›å»º
        function confirmBatchCreate() {
            // åªæŸ¥è¯¢æ•°æ®è¡Œçš„å¤é€‰æ¡†
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert(getText('please-select-to-create'));
                return;
            }
            
            let successCount = 0;
            let failCount = 0;
            
            checkboxes.forEach(checkbox => {
                const index = parseInt(checkbox.dataset.index);
                const salonData = batchSalonData[index];
                
                if (salonData) {
                    if (addSalon(salonData)) {
                        successCount++;
                    } else {
                        failCount++;
                    }
                }
            });
            
            const message = getText('batch-create-complete').replace('{success}', successCount).replace('{fail}', failCount);
            alert(message);
            
            if (successCount > 0) {
                cancelBatch();
                showContent('salon-info');
            }
        }
        
        // å–æ¶ˆæ‰¹é‡æ“ä½œ
        function cancelBatch() {
            batchSalonData = [];
            
            const dataPreviewArea = document.getElementById('dataPreviewArea');
            const confirmBtn = document.getElementById('confirmBatchCreateBtn');
            const cancelBtn = document.getElementById('cancelBatchBtn');
            const fileInput = document.getElementById('salonFileInput');
            const fileUploadIconArea = document.getElementById('fileUploadIconArea');
            const filePreviewArea = document.getElementById('filePreviewArea');
            const dataPreviewTable = document.getElementById('dataPreviewTable');
            
            if (dataPreviewArea) dataPreviewArea.style.display = 'none';
            if (confirmBtn) confirmBtn.style.display = 'none';
            if (cancelBtn) cancelBtn.style.display = 'none';
            if (dataPreviewTable) dataPreviewTable.innerHTML = '';
            
            fileInput.value = '';
            fileUploadIconArea.style.display = 'block';
            filePreviewArea.style.display = 'none';
        }
        
        // æŸ¥çœ‹æ²™é¾™äº¤æ˜“è®°å½•
        function viewTransactions(salonId) {
            // è¿™é‡Œå¯ä»¥å®ç°æŸ¥çœ‹äº¤æ˜“è®°å½•çš„é€»è¾‘
            alert(getText('view-transactions-not-implemented'));
        }
        
        // ç¼–è¾‘æ²™é¾™
        function editSalon(salonId) {
            // è¿™é‡Œå¯ä»¥å®ç°ç¼–è¾‘æ²™é¾™çš„é€»è¾‘
            alert('ç¼–è¾‘æ²™é¾™åŠŸèƒ½å°šæœªå®ç°');
        }
        
        // å¤„ç†æ–°å¢æ²™é¾™è¡¨å•æäº¤
        document.getElementById('newSalonForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const salonName = document.getElementById('salonName').value.trim();
            const salonAddress = document.getElementById('salonAddress').value.trim();
            const businessLicense = document.getElementById('businessLicense').value.trim();
            const responsibleEmployeeId = document.getElementById('responsibleEmployee').value;
            const directorName = document.getElementById('directorName').value.trim();
            const directorMobile = document.getElementById('directorMobile').value.trim();
            const salonPhone = document.getElementById('salonPhone').value.trim();
            const salonEmail = document.getElementById('salonEmail').value.trim();
            
            if (!salonName) {
                alert(getText('salon-name-required'));
                return;
            }
            
            if (!salonAddress) {
                alert(getText('salon-address-required'));
                return;
            }
            
            const salon = {
                name: salonName,
                address: salonAddress,
                businessLicense: businessLicense,
                responsibleEmployeeId: responsibleEmployeeId || null,
                directorName: directorName,
                directorMobile: directorMobile,
                phone: salonPhone,
                email: salonEmail
            };
            
            if (addSalon(salon)) {
                alert(getText('salon-added-success'));
                this.reset();
                showContent('salon-info');
            }
        });
        
        // å¤„ç†æ–°å¢èŒå‘˜è¡¨å•æäº¤
        document.getElementById('newEmployeeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const employeeName = document.getElementById('employeeName').value.trim();
            const employeePosition = document.getElementById('employeePosition').value;
            const employeeUsername = document.getElementById('employeeUsername').value.trim();
            const employeePassword = document.getElementById('employeePassword').value;
            const employeeMobile = document.getElementById('employeeMobile').value.trim();
            const bankName = document.getElementById('bankName').value.trim();
            const bankAccount = document.getElementById('bankAccount').value.trim();
            const accountHolder = document.getElementById('accountHolder').value.trim() || employeeName;
            const bankBranch = document.getElementById('bankBranch').value.trim();
            
            if (!employeeName) {
                alert(getText('employee-name-required'));
                return;
            }
            
            if (!employeeUsername) {
                alert(getText('username-required'));
                return;
            }
            
            if (!employeePassword) {
                alert(getText('password-required'));
                return;
            }
            
            const employee = {
                name: employeeName,
                position: employeePosition || 'salesperson',
                username: employeeUsername,
                password: employeePassword,
                mobile: employeeMobile,
                bankInfo: {
                    bankName: bankName,
                    bankAccount: bankAccount,
                    accountHolder: accountHolder,
                    bankBranch: bankBranch
                }
            };
            
            if (addEmployee(employee)) {
                alert(getText('employee-added-success'));
                this.reset();
                showContent('employee-list');
            } else {
                alert(getText('username-already-exists'));
            }
        });
        
        // è®°å½•æ“ä½œå†å²
        function recordOperation(operationType, objectType, objectId, objectName, description, beforeData = null, afterData = null) {
            // è¿™é‡Œå¯ä»¥å®ç°è®°å½•æ“ä½œå†å²çš„é€»è¾‘
            console.log(`è®°å½•æ“ä½œï¼š${operationType} ${objectType} ${objectName} - ${description}`);
        }
        
        // æ˜¾ç¤ºæ“ä½œå†å²è®°å½•
        function displayOperationHistory() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºæ“ä½œå†å²è®°å½•çš„é€»è¾‘
            console.log('æ˜¾ç¤ºæ“ä½œå†å²è®°å½•');
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('operation-history-list');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-operation-history">æš‚æ— æ“ä½œå†å²è®°å½•</p>`;
                updateTexts();
            }
        }
        
        // ç­›é€‰æ“ä½œå†å²è®°å½•
        function filterOperationHistory() {
            // è¿™é‡Œå¯ä»¥å®ç°ç­›é€‰æ“ä½œå†å²è®°å½•çš„é€»è¾‘
            console.log('ç­›é€‰æ“ä½œå†å²è®°å½•');
            displayOperationHistory();
        }
        
        // æ¸…ç©ºå†å²ç­›é€‰æ¡ä»¶
        function clearHistoryFilters() {
            // è¿™é‡Œå¯ä»¥å®ç°æ¸…ç©ºå†å²ç­›é€‰æ¡ä»¶çš„é€»è¾‘
            console.log('æ¸…ç©ºå†å²ç­›é€‰æ¡ä»¶');
            
            // é‡ç½®æ‰€æœ‰ç­›é€‰æ§ä»¶
            const userFilter = document.getElementById('history-user-filter');
            const operationFilter = document.getElementById('history-operation-filter');
            const objectFilter = document.getElementById('history-object-filter');
            const startDateInput = document.getElementById('history-start-date');
            const endDateInput = document.getElementById('history-end-date');
            
            if (userFilter) userFilter.value = '';
            if (operationFilter) operationFilter.value = '';
            if (objectFilter) objectFilter.value = '';
            if (startDateInput) startDateInput.value = '';
            if (endDateInput) endDateInput.value = '';
            
            // é‡æ–°æ˜¾ç¤ºæ‰€æœ‰å†å²è®°å½•
            displayOperationHistory();
        }
        
        // æ˜¾ç¤ºå®¡è®¡æŠ¥å‘Š
        function displayAuditReport() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºå®¡è®¡æŠ¥å‘Šçš„é€»è¾‘
            console.log('æ˜¾ç¤ºå®¡è®¡æŠ¥å‘Š');
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç»Ÿè®¡æ•°æ®
            document.getElementById('total-operations-count').textContent = '0';
            document.getElementById('today-operations-count').textContent = '0';
            document.getElementById('active-users-count').textContent = '0';
            document.getElementById('critical-operations-count').textContent = '0';
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('audit-report-content');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-audit-data">æš‚æ— å®¡è®¡æ•°æ®</p>`;
                updateTexts();
            }
        }
        
        // æ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨
        function displayApprovalList() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨çš„é€»è¾‘
            console.log('æ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨');
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('approvalList');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-pending-approvals">æš‚æ— å¾…å®¡æ‰¹é¡¹ç›®</p>`;
                updateTexts();
            }
        }
        
        // æ˜¾ç¤ºä¸šç»©ç›®æ ‡
        function displayPerformanceTargets() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºä¸šç»©ç›®æ ‡çš„é€»è¾‘
            console.log('æ˜¾ç¤ºä¸šç»©ç›®æ ‡');
            
            // è®¾ç½®å½“å‰æœˆä»½
            const now = new Date();
            const currentMonth = now.getMonth() + 1; // æœˆä»½ä»0å¼€å§‹ï¼Œæ‰€ä»¥è¦+1
            const monthSelect = document.getElementById('performance-month');
            if (monthSelect) {
                monthSelect.value = currentMonth;
            }
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºå›¢é˜Ÿç›®æ ‡æ•°æ®
            document.getElementById('team-target-amount').textContent = '10,000';
            document.getElementById('team-actual-amount').textContent = '0';
            document.getElementById('team-progress-text').textContent = '0%';
            document.getElementById('team-progress-bar').style.width = '0%';
            document.getElementById('team-target-display').textContent = '10,000';
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('performance-list');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-performance-data">æš‚æ— ä¸šç»©æ•°æ®</p>`;
                updateTexts();
            }
        }
        
        // é‡æ–°è®¡ç®—ä¸šç»©ç›®æ ‡
        function recalculatePerformanceTargets() {
            // è¿™é‡Œå¯ä»¥å®ç°é‡æ–°è®¡ç®—ä¸šç»©ç›®æ ‡çš„é€»è¾‘
            console.log('é‡æ–°è®¡ç®—ä¸šç»©ç›®æ ‡');
            alert(getText('recalculate-targets-success'));
            displayPerformanceTargets();
        }
        
        // é‡ç½®ä¸šç»©ç›®æ ‡
        function resetPerformanceTargets() {
            // è¿™é‡Œå¯ä»¥å®ç°é‡ç½®ä¸šç»©ç›®æ ‡çš„é€»è¾‘
            console.log('é‡ç½®ä¸šç»©ç›®æ ‡');
            if (confirm(getText('confirm-reset-targets'))) {
                alert(getText('reset-targets-success'));
                displayPerformanceTargets();
            }
        }
        
        // æ˜¾ç¤ºèŒå‘˜è¯¦æƒ…
        function showEmployeeDetail(employeeId) {
            const employees = getEmployees();
            const employee = employees.find(e => e.id === employeeId);
            
            if (!employee) return;
            
            // æ˜¾ç¤ºå³ä¾§è¯¦æƒ…é¢æ¿
            document.getElementById('employee-list-right').style.display = 'block';
            
            // è·å–èŒä½æ–‡æœ¬
            let positionText = '';
            switch (employee.position) {
                case 'admin': positionText = getText('admin'); break;
                case 'manager': positionText = getText('manager'); break;
                case 'salesperson': positionText = getText('salesperson'); break;
                default: positionText = employee.position;
            }
            
            // æ„å»ºè¯¦æƒ…HTML
            let detailHtml = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="color: var(--gold); margin: 0;" data-i18n="employee-detail">èŒå‘˜è¯¦æƒ…</h2>
                    <button onclick="editEmployee(${employee.id})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer;" data-i18n="edit-btn">ç¼–è¾‘</button>
                </div>
                
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="employee-name">å§“å</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.name}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="employee-position">èŒä½</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${positionText}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="login-account">ç™»å½•è´¦å·</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.username || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="mobile-number">æ‰‹æœºå·</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.mobile || '-'}</p>
                        </div>
                    </div>
                </div>
                
                <!-- é“¶è¡Œè´¦æˆ·ä¿¡æ¯ -->
                <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px;">
                    <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="bank-account-info">é“¶è¡Œè´¦æˆ·ä¿¡æ¯</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="bank-name">é“¶è¡Œåç§°</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.bankName || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="bank-account">é“¶è¡Œè´¦å·</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.bankAccount || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="account-holder">è´¦æˆ·æŒæœ‰äºº</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.accountHolder || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="bank-branch">å¤‡æ³¨</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.bankBranch || '-'}</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('employee-detail-content').innerHTML = detailHtml;
            updateTexts();
        }
        
        // ä¿å­˜èŒå‘˜ç¼–è¾‘
        function saveEmployeeEdit(employeeId) {
            const updatedEmployee = {
                id: employeeId,
                name: document.getElementById('editEmployeeName').value.trim(),
                position: document.getElementById('editEmployeePosition').value,
                username: document.getElementById('editEmployeeUsername').value.trim(),
                password: document.getElementById('editEmployeePassword').value,
                mobile: document.getElementById('editEmployeeMobile').value.trim(),
                bankInfo: {
                    bankName: document.getElementById('editBankName').value.trim(),
                    bankAccount: document.getElementById('editBankAccount').value.trim(),
                    accountHolder: document.getElementById('editAccountHolder').value.trim() || document.getElementById('editEmployeeName').value.trim(),
                    bankBranch: document.getElementById('editBankBranch').value.trim()
                }
            };
            
            if (updateEmployee(updatedEmployee)) {
                alert(getText('employee-updated-success'));
                displayEmployeeList();
                showEmployeeDetail(employeeId);
            } else {
                alert(getText('username-already-exists'));
            }
        }
        
        // ç¼–è¾‘èŒå‘˜
        function editEmployee(employeeId) {
            const employees = getEmployees();
            const employee = employees.find(e => e.id === employeeId);
            
            if (!employee) return;
            
            // è·å–å½“å‰è¯­è¨€çš„æŒ‰é’®æ–‡æœ¬
            const cancelText = getText('cancel');
            const saveText = getText('save');
            
            // æ„å»ºç¼–è¾‘è¡¨å•HTML
            let editHtml = `
                <h2 style="color: var(--gold); margin: 0 0 20px 0;" data-i18n="edit-employee">ç¼–è¾‘èŒå‘˜</h2>
                
                <form id="editEmployeeForm" onsubmit="saveEmployeeEdit(${employeeId}); return false;">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label for="editEmployeeName" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="employee-name">å§“åï¼š</label>
                                <input type="text" id="editEmployeeName" value="${employee.name}" required style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            <div>
                                <label for="editEmployeePosition" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="employee-position">èŒä½ï¼š</label>
                                <select id="editEmployeePosition" required style="width: 100%; padding: 10px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                    <option value="salesperson" ${employee.position === 'salesperson' ? 'selected' : ''} data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>
                                    <option value="manager" ${employee.position === 'manager' ? 'selected' : ''} data-i18n="manager">ç»ç†</option>
                                    <option value="admin" ${employee.position === 'admin' ? 'selected' : ''} data-i18n="admin">ç®¡ç†å‘˜</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label for="editEmployeeUsername" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="login-account">ç™»å½•è´¦å·ï¼š</label>
                                <input type="text" id="editEmployeeUsername" value="${employee.username || ''}" required style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            <div>
                                <label for="editEmployeePassword" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="password">å¯†ç ï¼ˆç•™ç©ºåˆ™ä¸ä¿®æ”¹ï¼‰ï¼š</label>
                                <input type="password" id="editEmployeePassword" placeholder="ç•™ç©ºåˆ™ä¸ä¿®æ”¹å¯†ç " style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                        </div>
                    </div>
                    
                    <!-- è”ç³»ä¿¡æ¯ -->
                    <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="contact-info">è”ç³»ä¿¡æ¯</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label for="editEmployeeMobile" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="mobile-number">æ‰‹æœºå·ï¼š</label>
                            <input type="tel" id="editEmployeeMobile" value="${employee.mobile || ''}" oninput="formatPhoneNumber(this)" placeholder="000-0000-0000" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                        </div>
                    </div>
                    
                    <!-- é“¶è¡Œè´¦æˆ·ä¿¡æ¯ -->
                    <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="bank-account-info">é“¶è¡Œè´¦æˆ·ä¿¡æ¯</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label for="editBankName" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="bank-name">é“¶è¡Œåç§°ï¼š</label>
                                <input type="text" id="editBankName" value="${employee.bankInfo?.bankName || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            <div>
                                <label for="editBankAccount" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="bank-account">é“¶è¡Œè´¦å·ï¼š</label>
                                <input type="text" id="editBankAccount" value="${employee.bankInfo?.bankAccount || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label for="editAccountHolder" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="account-holder">è´¦æˆ·æŒæœ‰äººï¼š</label>
                            <input type="text" id="editAccountHolder" value="${employee.bankInfo?.accountHolder || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                        </div>
                        
                        <div>
                            <label for="editBankBranch" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="bank-branch">å¤‡æ³¨ï¼š</label>
                            <input type="text" id="editBankBranch" value="${employee.bankInfo?.bankBranch || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" onclick="showEmployeeDetail(${employeeId})" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">${cancelText}</button>
                        <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">${saveText}</button>
                    </div>
                </form>
            `;
            
            document.getElementById('employee-detail-content').innerHTML = editHtml;
            updateTexts();
        }
        
        // æ‰‹æœºå·ç æ ¼å¼åŒ–å‡½æ•°
        function formatPhoneNumber(input) {
            // åªä¿ç•™æ•°å­—
            let value = input.value.replace(/\D/g, '');
            
            // é™åˆ¶æœ€å¤§é•¿åº¦ä¸º11ä½
            if (value.length > 11) {
                value = value.slice(0, 11);
            }
            
            // æ ¼å¼åŒ–ä¸º 000-0000-0000
            if (value.length >= 7) {
                value = value.replace(/(\d{3})(\d{4})(\d{0,4})/, '$1-$2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d{0,4})/, '$1-$2');
            }
            
            input.value = value;
        }
        
        // è¥ä¸šæ‰§ç…§å·ç æ ¼å¼åŒ–å‡½æ•°
        function formatBusinessLicense(input) {
            // åªä¿ç•™æ•°å­—
            let value = input.value.replace(/\D/g, '');
            
            // é™åˆ¶æœ€å¤§é•¿åº¦ä¸º10ä½
            if (value.length > 10) {
                value = value.slice(0, 10);
            }
            
            // æ ¼å¼åŒ–ä¸º 000-00-00000
            if (value.length >= 8) {
                value = value.replace(/(\d{3})(\d{2})(\d{0,5})/, '$1-$2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d{0,2})/, '$1-$2');
            }
            
            input.value = value;
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            
            // å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
            if (isLoggedIn !== 'true') {
                window.location.href = 'login.html';
            }
        }
        
        // æ˜¾ç¤ºæ²™é¾™è¯¦æƒ…
        function showSalonDetail(salonId) {
            const salons = getSalons();
            const salon = salons.find(s => s.id === salonId);
            
            if (!salon) {
                console.error('Salon not found:', salonId);
                return;
            }
            
            const salonDetailRight = document.getElementById('salon-detail-right');
            const salonDetailContent = document.getElementById('salon-detail-content');
            
            if (!salonDetailRight || !salonDetailContent) {
                console.error('Salon detail elements not found');
                return;
            }
            
            // æ˜¾ç¤ºå³ä¾§è¯¦æƒ…é¢æ¿
            salonDetailRight.style.display = 'flex';
            
            // ç”Ÿæˆè¯¦æƒ…å†…å®¹
            const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
            
            const detailHtml = `
                <div style="width: 100%; line-height: 1.6;">
                    <!-- ç¬¬ä¸€æ’ï¼šåŸºæœ¬ä¿¡æ¯å’Œé™¢é•¿ä¿¡æ¯ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <!-- åŸºæœ¬ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-name">æ²™é¾™åç§°ï¼š</span>
                                    <span style="color: var(--text-light); font-weight: bold; font-size: 1em; line-height: 1.4;">${salon.name}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-address-label">åœ°å€ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.address || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="business-license-label">è¥ä¸šæ‰§ç…§ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.businessLicense || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="responsible-employee">è´Ÿè´£èŒå‘˜ï¼š</span>
                                    <span style="color: var(--gold); line-height: 1.4;">${responsibleEmployeeName}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é™¢é•¿ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="director-info">é™¢é•¿ä¿¡æ¯</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="director-name">é™¢é•¿å§“åï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.directorName || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœºï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.directorMobile || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-phone">åº—é“ºç”µè¯ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.phone || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-email">ç”µå­é‚®ç®±ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.email || getText('not-specified')}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç¬¬äºŒæ’ï¼šå…¶ä»–ä¿¡æ¯ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- å…¶ä»–ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="other-info">å…¶ä»–ä¿¡æ¯</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="add-time">æ·»åŠ æ—¶é—´ï¼š</span>
                                    <span style="color: var(--text-light); font-size: 0.9em; line-height: 1.4;">${salon.addTime || getText('not-specified')}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç©ºç™½åŒºåŸŸ -->
                        <div>
                        </div>
                    </div>
                </div>
            `;
            
            salonDetailContent.innerHTML = detailHtml;
            
            // åœ¨æ ‡é¢˜è¡Œæ·»åŠ ç¼–è¾‘æŒ‰é’®
            const actionButtons = document.getElementById('salon-action-buttons');
            if (actionButtons) {
                actionButtons.innerHTML = `
                    <button onclick="editSalonDetail(${salon.id})" style="
                        background: linear-gradient(135deg, var(--gold), #e6c56c);
                        color: var(--dark-bg);
                        border: none;
                        padding: 8px 16px;
                        border-radius: 5px;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        font-size: 0.9em;
                        min-width: 60px;
                        height: 36px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" data-i18n="edit-btn">ç¼–è¾‘</button>
                `;
            }
            
            // æ›´æ–°ç¿»è¯‘æ–‡æœ¬
            updateTexts();
        }
        
        // ç¼–è¾‘æ²™é¾™è¯¦æƒ…
        function editSalonDetail(salonId) {
            const salons = getSalons();
            const salon = salons.find(s => s.id === salonId);
            
            if (!salon) {
                console.error('Salon not found:', salonId);
                return;
            }
            
            const salonDetailContent = document.getElementById('salon-detail-content');
            
            if (!salonDetailContent) {
                console.error('Salon detail content element not found');
                return;
            }
            
            // ç”Ÿæˆç¼–è¾‘è¡¨å•
            const editFormHtml = `
                <div class="edit-form-container" style="width: 100%; padding-bottom: 20px; line-height: 1.6;">
                    <form id="editSalonForm" style="width: 100%; box-sizing: border-box;">
                        <!-- ç¬¬ä¸€æ’ï¼šåŸºæœ¬ä¿¡æ¯å’Œé™¢é•¿ä¿¡æ¯ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                            <!-- åŸºæœ¬ä¿¡æ¯ -->
                            <div>
                                <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h4>
                                <div style="display: grid; gap: 12px;">
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-name">æ²™é¾™åç§°ï¼š</label>
                                        <input type="text" id="editSalonName" value="${salon.name}" required style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-address-label">åœ°å€ï¼š</label>
                                        <input type="text" id="editSalonAddress" value="${salon.address || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="business-license-label">è¥ä¸šæ‰§ç…§ï¼š</label>
                                        <input type="text" id="editBusinessLicense" value="${salon.businessLicense || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        " oninput="formatBusinessLicense(this)">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="responsible-employee">è´Ÿè´£èŒå‘˜ï¼š</label>
                                        <select id="editResponsibleEmployee" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                            <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- é™¢é•¿ä¿¡æ¯ -->
                            <div>
                                <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px;" data-i18n="director-info">é™¢é•¿ä¿¡æ¯</h4>
                                <div style="display: grid; gap: 12px;">
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="director-name">é™¢é•¿å§“åï¼š</label>
                                        <input type="text" id="editDirectorName" value="${salon.directorName || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœºï¼š</label>
                                        <input type="text" id="editDirectorMobile" value="${salon.directorMobile || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        " oninput="formatPhoneNumber(this)">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-phone">åº—é“ºç”µè¯ï¼š</label>
                                        <input type="text" id="editSalonPhone" value="${salon.phone || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-email">ç”µå­é‚®ç®±ï¼š</label>
                                        <input type="email" id="editSalonEmail" value="${salon.email || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            `;
            
            salonDetailContent.innerHTML = editFormHtml;
            
            // åœ¨æ ‡é¢˜è¡Œæ·»åŠ å–æ¶ˆå’Œä¿å­˜æŒ‰é’®
            const actionButtons = document.getElementById('salon-action-buttons');
            if (actionButtons) {
                actionButtons.innerHTML = `
                    <button onclick="cancelSalonEdit(${salon.id})" style="
                        background: transparent;
                        color: #cccccc;
                        border: 1px solid #cccccc;
                        padding: 8px 16px;
                        border-radius: 5px;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        font-size: 0.9em;
                        margin-right: 10px;
                        min-width: 60px;
                        height: 36px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    " onmouseover="this.style.backgroundColor='rgba(255,255,255,0.1)'" onmouseout="this.style.backgroundColor='transparent'" data-i18n="cancel">å–æ¶ˆ</button>
                    <button onclick="saveSalonEdit(${salon.id})" style="
                        background: linear-gradient(135deg, var(--gold), #e6c56c);
                        color: var(--dark-bg);
                        border: none;
                        padding: 8px 16px;
                        border-radius: 5px;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        font-size: 0.9em;
                        min-width: 60px;
                        height: 36px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" data-i18n="save">ä¿å­˜</button>
                `;
            }
            
            // å¡«å……èŒå‘˜ä¸‹æ‹‰é€‰é¡¹
            const employees = getEmployees();
            const responsibleSelect = document.getElementById('editResponsibleEmployee');
            if (responsibleSelect) {
                employees.forEach(employee => {
                    const option = document.createElement('option');
                    option.value = employee.id;
                    option.textContent = employee.name;
                    if (employee.id == salon.responsibleEmployeeId) {
                        option.selected = true;
                    }
                    responsibleSelect.appendChild(option);
                });
            }
            
            // æ›´æ–°ç¿»è¯‘æ–‡æœ¬
            updateTexts();
        }
        
        // å–æ¶ˆæ²™é¾™ç¼–è¾‘
        function cancelSalonEdit(salonId) {
            showSalonDetail(salonId);
        }
        
        // ä¿å­˜æ²™é¾™ç¼–è¾‘
        function saveSalonEdit(salonId) {
            const form = document.getElementById('editSalonForm');
            if (!form) return;
            
            const salonName = document.getElementById('editSalonName').value.trim();
            const salonAddress = document.getElementById('editSalonAddress').value.trim();
            const businessLicense = document.getElementById('editBusinessLicense').value.trim();
            const responsibleEmployeeId = document.getElementById('editResponsibleEmployee').value;
            const salonPhone = document.getElementById('editSalonPhone').value.trim();
            const salonEmail = document.getElementById('editSalonEmail').value.trim();
            const directorName = document.getElementById('editDirectorName').value.trim();
            const directorMobile = document.getElementById('editDirectorMobile').value.trim();
            
            if (!salonName) {
                alert(getText('salon-name-required'));
                return;
            }
            
            const salons = getSalons();
            const salonIndex = salons.findIndex(s => s.id === salonId);
            
            if (salonIndex === -1) {
                alert(getText('salon-not-found'));
                return;
            }
            
            // æ›´æ–°æ²™é¾™æ•°æ®
            salons[salonIndex] = {
                ...salons[salonIndex],
                name: salonName,
                address: salonAddress,
                businessLicense: businessLicense,
                responsibleEmployeeId: responsibleEmployeeId || null,
                phone: salonPhone,
                email: salonEmail,
                directorName: directorName,
                directorMobile: directorMobile
            };
            
            // ä¿å­˜åˆ°localStorage
            saveSalons(salons);
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            alert(getText('salon-updated-success'));
            
            // åˆ·æ–°åˆ—è¡¨å’Œè¯¦æƒ…
            displaySalonList();
            showSalonDetail(salonId);
        }
        
        // æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶
        function clearAllFilters() {
            document.getElementById('salonSearchInput').value = '';
            document.getElementById('responsibleFilter').value = '';
            document.getElementById('districtFilter').value = '';
            
            // é‡æ–°æ˜¾ç¤ºæ‰€æœ‰æ²™é¾™
            displaySalonList();
        }
        
        // å¢å¼ºçš„æœç´¢æ²™é¾™å‡½æ•°
        function searchSalons() {
            const searchInput = document.getElementById('salonSearchInput').value.toLowerCase();
            const responsibleFilter = document.getElementById('responsibleFilter').value;
            const districtFilter = document.getElementById('districtFilter').value;
            
            const salons = getSalons();
            let filteredSalons = salons;
            
            // æ–‡æœ¬æœç´¢ï¼šæ”¯æŒæ²™é¾™åã€é™¢é•¿åã€æ‰‹æœºå·
            if (searchInput) {
                filteredSalons = filteredSalons.filter(salon => {
                    return (salon.name && salon.name.toLowerCase().includes(searchInput)) ||
                           (salon.directorName && salon.directorName.toLowerCase().includes(searchInput)) ||
                           (salon.directorMobile && salon.directorMobile.includes(searchInput)) ||
                           (salon.phone && salon.phone.includes(searchInput));
                });
            }
            
            // è´Ÿè´£äººç­›é€‰
            if (responsibleFilter) {
                filteredSalons = filteredSalons.filter(salon => {
                    return salon.responsibleEmployeeId == responsibleFilter;
                });
            }
            
            // åŒºåŸŸç­›é€‰
            if (districtFilter) {
                filteredSalons = filteredSalons.filter(salon => {
                    if (!salon.address) return false;
                    
                    switch (districtFilter) {
                        case 'guro':
                            return salon.address.includes('êµ¬ë¡œêµ¬') || salon.address.includes('ä¹è€åŒº');
                        case 'yeongdeungpo':
                            return salon.address.includes('ì˜ë“±í¬êµ¬') || salon.address.includes('æ°¸ç™»æµ¦åŒº');
                        case 'geumcheon':
                            return salon.address.includes('ê¸ˆì²œêµ¬') || salon.address.includes('è¡¿å·åŒº');
                        case 'overseas':
                            return !salon.address.includes('êµ¬ë¡œêµ¬') && !salon.address.includes('ì˜ë“±í¬êµ¬') && 
                                   !salon.address.includes('ê¸ˆì²œêµ¬') && !salon.address.includes('ä¹è€åŒº') && 
                                   !salon.address.includes('æ°¸ç™»æµ¦åŒº') && !salon.address.includes('è¡¿å·åŒº');
                        default:
                            return true;
                    }
                });
            }
            
            // æ›´æ–°æ˜¾ç¤º
            displayFilteredSalonList(filteredSalons);
        }
        
        // æ˜¾ç¤ºç­›é€‰åçš„æ²™é¾™åˆ—è¡¨
        function displayFilteredSalonList(salons) {
            const salonListContainer = document.getElementById('salon-list-content');
            const salonCountText = document.getElementById('salon-count-text');
            
            if (!salonListContainer) return;
            
            // æ›´æ–°ç»Ÿè®¡æ•°å­—
            if (salonCountText) {
                salonCountText.textContent = getText('total-salons-count').replace('{count}', salons.length);
            }
            
            if (salons.length === 0) {
                salonListContainer.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p>${getText('no-matching-salons')}</p>
                    </div>
                `;
                return;
            }
            
            // åº”ç”¨æ’åº
            const sortedSalons = applySalonSort(salons);
            
            // ç”Ÿæˆåˆ—è¡¨HTML
            let listHtml = '';
            sortedSalons.forEach(salon => {
                const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
                
                listHtml += `
                    <div onclick="showSalonDetail(${salon.id})" style="
                        background: rgba(212, 175, 55, 0.1); 
                        margin-bottom: 10px; 
                        padding: 15px; 
                        border-radius: 8px; 
                        border: 1px solid rgba(212, 175, 55, 0.3); 
                        cursor: pointer; 
                        transition: all 0.3s;
                    " onmouseover="this.style.background='rgba(212, 175, 55, 0.2)'" onmouseout="this.style.background='rgba(212, 175, 55, 0.1)'">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                            <h4 style="color: var(--gold); margin: 0; font-size: 1.1em;">${salon.name}</h4>
                        </div>
                        <p style="margin: 2px 0; color: #cccccc; font-size: 0.9em;">${salon.address || getText('not-specified')}</p>
                        <p style="margin: 2px 0 0 0; color: #aaa; font-size: 0.8em;">${getText('responsible-employee')}ï¼š${responsibleEmployeeName}</p>
                    </div>
                `;
            });
            
            salonListContainer.innerHTML = listHtml;
        }
        
        // åº”ç”¨æ²™é¾™æ’åº
        function applySalonSort(salons) {
            if (currentSortField === 'default' || !currentSortField) {
                return salons;
            }
            
            return salons.sort((a, b) => {
                let aValue, bValue;
                
                switch (currentSortField) {
                    case 'name':
                        aValue = a.name || '';
                        bValue = b.name || '';
                        break;
                    case 'address':
                        aValue = a.address || '';
                        bValue = b.address || '';
                        break;
                    case 'addTime':
                        aValue = new Date(a.addTime || 0);
                        bValue = new Date(b.addTime || 0);
                        break;
                    case 'lastTransaction':
                        aValue = new Date(a.lastTransactionDate || 0);
                        bValue = new Date(b.lastTransactionDate || 0);
                        break;
                    case 'overdueDays':
                        aValue = calculateOverdueDays(a);
                        bValue = calculateOverdueDays(b);
                        break;
                    case 'overdueAmount':
                        aValue = calculateOverdueAmount(a);
                        bValue = calculateOverdueAmount(b);
                        break;
                    default:
                        return 0;
                }
                
                if (currentSortOrder === 'desc') {
                    return aValue < bValue ? 1 : aValue > bValue ? -1 : 0;
                } else {
                    return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;
                }
            });
        }
        
        // è®¡ç®—æ¬ æ¬¾å¤©æ•°
        function calculateOverdueDays(salon) {
            if (!salon.lastTransactionDate) return 0;
            const lastDate = new Date(salon.lastTransactionDate);
            const today = new Date();
            const diffTime = today - lastDate;
            return Math.floor(diffTime / (1000 * 60 * 60 * 24));
        }
        
        // è®¡ç®—æ¬ æ¬¾é‡‘é¢
        function calculateOverdueAmount(salon) {
            if (!salon.transactions) return 0;
            return salon.transactions.reduce((total, transaction) => {
                return total + (transaction.outstandingAmount || 0);
            }, 0);
        }
    </script>
</body>
</html> 