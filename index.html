<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mesiaé¦–å°”è¥¿éƒ¨åœ°åŒºç®¡ç†ç³»ç»Ÿ</title>
    
    <!-- å­—ä½“/ç²’å­/åŠ¨æ•ˆCDN -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:700,400|Poppins:400,700|Source+Han+Sans+SC:400,700&display=swap" rel="stylesheet">
    <!-- SheetJSåº“ç”¨äºå¤„ç†Excelæ–‡ä»¶ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.3.0/tsparticles.bundle.min.js"></script>
    
    <!-- Firebaseè®¤è¯ä¿æŠ¤ -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-database-compat.js"></script>
    
    <!-- Firebaseé…ç½®å’Œæ•°æ®ç®¡ç†å™¨ -->
    <script src="firebase-config.js"></script>
    <script src="firebase-data-manager.js"></script>
    
    <script>

        // è®¤è¯çŠ¶æ€æ£€æŸ¥å’Œæ•°æ®åˆå§‹åŒ–
        firebase.auth().onAuthStateChanged(async (user) => {
            if (!user) {
                // å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µé¢
                window.location.href = 'login.html';
            } else {
                console.log("ç”¨æˆ·å·²ç™»å½•ï¼š", user.email);
                
                try {
                    // åˆå§‹åŒ–Firebaseæ•°æ®ç®¡ç†å™¨
                    await window.firebaseDataManager.initializeData();
                    
                    // ç”¨æˆ·å·²ç™»å½•ï¼Œå¯ä»¥æ˜¾ç¤ºé¡µé¢å†…å®¹
                    document.body.style.display = 'block';
                    
                    // æ›´æ–°ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯
                    const userNameElement = document.getElementById('userName');
                    if (userNameElement) {
                        userNameElement.textContent = user.email;
                        userNameElement.removeAttribute('data-i18n');
                    }
                    
                    // åˆå§‹åŒ–ç³»ç»Ÿ
                    initializeSystem();
                    
                } catch (error) {
                    console.error('åˆå§‹åŒ–æ•°æ®å¤±è´¥:', error);
                    alert('æ•°æ®åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                }
            }
        });

        // ==================== Firebaseæ•°æ®åº“æ“ä½œå°è£… ====================
        
        // è·å–å½“å‰ç”¨æˆ·çš„æ•°æ®è·¯å¾„å‰ç¼€
        function getUserDataPath() {
            const user = firebase.auth().currentUser;
            if (!user) return null;
            // å°†é‚®ç®±ä¸­çš„ç‰¹æ®Šå­—ç¬¦æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ï¼Œä½œä¸ºæ•°æ®åº“è·¯å¾„
            return user.uid || user.email.replace(/[.@]/g, '_');
        }
        
        // åˆå§‹åŒ–Firebaseæ•°æ®è¿æ¥
        function initializeFirebaseData() {
            const userPath = getUserDataPath();
            if (!userPath) return;
            
            // è®¾ç½®å…¨å±€å˜é‡ï¼Œç”¨äºå­˜å‚¨å®æ—¶æ•°æ®
            window.firebaseData = {
                employees: [],
                salons: [],
                products: [],
                productCategories: [],
                customDistricts: [],
                userSettings: {}
            };
            
            // ç›‘å¬å„ç§æ•°æ®çš„å˜åŒ–
            setupFirebaseListeners(userPath);
        }
        
        // è®¾ç½®Firebaseæ•°æ®ç›‘å¬å™¨
        function setupFirebaseListeners(userPath) {
            // ç›‘å¬å‘˜å·¥æ•°æ®
            database.ref(`users/${userPath}/employees`).on('value', (snapshot) => {
                const data = snapshot.val();
                window.firebaseData.employees = data ? Object.values(data) : [];
                // å¦‚æœå½“å‰é¡µé¢æ˜¾ç¤ºå‘˜å·¥åˆ—è¡¨ï¼Œåˆ·æ–°æ˜¾ç¤º
                if (document.getElementById('employee-list').style.display !== 'none') {
                    displayEmployeeList();
                }
            });
            
            // ç›‘å¬æ²™é¾™æ•°æ®
            database.ref(`users/${userPath}/salons`).on('value', (snapshot) => {
                const data = snapshot.val();
                window.firebaseData.salons = data ? Object.values(data) : [];
                // å¦‚æœå½“å‰é¡µé¢æ˜¾ç¤ºæ²™é¾™ä¿¡æ¯ï¼Œåˆ·æ–°æ˜¾ç¤º
                if (document.getElementById('salon-info').style.display !== 'none') {
                    displaySalonList();
                }
            });
            
            // ç›‘å¬äº§å“æ•°æ®
            database.ref(`users/${userPath}/products`).on('value', (snapshot) => {
                const data = snapshot.val();
                window.firebaseData.products = data ? Object.values(data) : [];
                // å¦‚æœå½“å‰é¡µé¢æ˜¾ç¤ºäº§å“åˆ—è¡¨ï¼Œåˆ·æ–°æ˜¾ç¤º
                if (document.getElementById('product-list').style.display !== 'none') {
                    displayProductList();
                }
            });
            
            // ç›‘å¬äº§å“åˆ†ç±»æ•°æ®
            database.ref(`users/${userPath}/productCategories`).on('value', (snapshot) => {
                const data = snapshot.val();
                window.firebaseData.productCategories = data ? Object.values(data) : [];
                // å¦‚æœå½“å‰é¡µé¢æ˜¾ç¤ºäº§å“åˆ†ç±»ï¼Œåˆ·æ–°æ˜¾ç¤º
                if (document.getElementById('product-category').style.display !== 'none') {
                    displayProductCategories();
                }
            });
            
            // ç›‘å¬åŒºåŸŸæ•°æ®
            database.ref(`users/${userPath}/customDistricts`).on('value', (snapshot) => {
                const data = snapshot.val();
                window.firebaseData.customDistricts = data ? Object.values(data) : [];
            });
            
            // ç›‘å¬ç”¨æˆ·è®¾ç½®
            database.ref(`users/${userPath}/settings`).on('value', (snapshot) => {
                const data = snapshot.val();
                window.firebaseData.userSettings = data || {};
                // åº”ç”¨è¯­è¨€è®¾ç½®
                if (data && data.language) {
                    switchLanguage(data.language);
                }
            });
        }
        
        // Firebaseæ•°æ®æ“ä½œå‡½æ•°
        
        // ä¿å­˜å‘˜å·¥æ•°æ®
        async function saveEmployeesToFirebase(employees) {
            const userPath = getUserDataPath();
            if (!userPath) return false;
            
            try {
                const employeesRef = database.ref(`users/${userPath}/employees`);
                await employeesRef.set(employees.reduce((acc, emp) => {
                    acc[emp.id] = emp;
                    return acc;
                }, {}));
                return true;
            } catch (error) {
                console.error('ä¿å­˜å‘˜å·¥æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        // ä¿å­˜æ²™é¾™æ•°æ®
        async function saveSalonsToFirebase(salons) {
            const userPath = getUserDataPath();
            if (!userPath) return false;
            
            try {
                const salonsRef = database.ref(`users/${userPath}/salons`);
                await salonsRef.set(salons.reduce((acc, salon) => {
                    acc[salon.id] = salon;
                    return acc;
                }, {}));
                return true;
            } catch (error) {
                console.error('ä¿å­˜æ²™é¾™æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        // ä¿å­˜äº§å“æ•°æ®
        async function saveProductsToFirebase(products) {
            const userPath = getUserDataPath();
            if (!userPath) return false;
            
            try {
                const productsRef = database.ref(`users/${userPath}/products`);
                await productsRef.set(products.reduce((acc, product) => {
                    acc[product.id] = product;
                    return acc;
                }, {}));
                return true;
            } catch (error) {
                console.error('ä¿å­˜äº§å“æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        // ä¿å­˜äº§å“åˆ†ç±»æ•°æ®
        async function saveProductCategoriesToFirebase(categories) {
            const userPath = getUserDataPath();
            if (!userPath) return false;
            
            try {
                const categoriesRef = database.ref(`users/${userPath}/productCategories`);
                await categoriesRef.set(categories.reduce((acc, category) => {
                    acc[category.id] = category;
                    return acc;
                }, {}));
                return true;
            } catch (error) {
                console.error('ä¿å­˜äº§å“åˆ†ç±»æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        // ä¿å­˜åŒºåŸŸæ•°æ®
        async function saveDistrictsToFirebase(districts) {
            const userPath = getUserDataPath();
            if (!userPath) return false;
            
            try {
                const districtsRef = database.ref(`users/${userPath}/customDistricts`);
                await districtsRef.set(districts.reduce((acc, district, index) => {
                    acc[index] = district;
                    return acc;
                }, {}));
                return true;
            } catch (error) {
                console.error('ä¿å­˜åŒºåŸŸæ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        // ä¿å­˜ç”¨æˆ·è®¾ç½®
        async function saveUserSettingsToFirebase(settings) {
            const userPath = getUserDataPath();
            if (!userPath) return false;
            
            try {
                const settingsRef = database.ref(`users/${userPath}/settings`);
                await settingsRef.update(settings);
                return true;
            } catch (error) {
                console.error('ä¿å­˜ç”¨æˆ·è®¾ç½®å¤±è´¥:', error);
                return false;
            }
        }
        
        // æ•°æ®æ“ä½œå‡½æ•° - ä½¿ç”¨FirebaseDataManager
        function getEmployees() {
            return window.firebaseDataManager.getEmployees();
        }
        
        function getSalons() {
            return window.firebaseDataManager.getSalons();
        }
        
        function getProducts() {
            return window.firebaseDataManager.getProducts();
        }
        
        function getProductCategories() {
            return window.firebaseDataManager.getProductCategories();
        }
        
        function getCustomDistricts() {
            return window.firebaseDataManager.getCustomDistricts();
        }
        
        // ä¿å­˜æ•°æ®çš„å‡½æ•°
        async function saveEmployees(employees) {
            try {
                await window.firebaseDataManager.saveEmployees(employees);
                return true;
            } catch (error) {
                console.error('ä¿å­˜å‘˜å·¥æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        async function saveSalons(salons) {
            try {
                await window.firebaseDataManager.saveSalons(salons);
                return true;
            } catch (error) {
                console.error('ä¿å­˜æ²™é¾™æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        async function saveProducts(products) {
            try {
                await window.firebaseDataManager.saveProducts(products);
                return true;
            } catch (error) {
                console.error('ä¿å­˜äº§å“æ•°æ®å¤±è´¥:', error);
                return false;
            }
        }
        
        async function saveProductCategories(categories) {
            try {
                await window.firebaseDataManager.saveProductCategories(categories);
                return true;
            } catch (error) {
                console.error('ä¿å­˜äº§å“åˆ†ç±»å¤±è´¥:', error);
                return false;
            }
        }
        
        // ==================== Firebaseæ•°æ®åº“æ“ä½œå°è£…ç»“æŸ ====================
        
        // ==================== è¯­è¨€è®¾ç½®FirebaseåŒ– ====================
        
        // è·å–å½“å‰è¯­è¨€è®¾ç½®
        function getCurrentLanguage() {
            return window.firebaseDataManager.getCurrentLanguage();
        }
        
        // è®¾ç½®è¯­è¨€å¹¶ä¿å­˜åˆ°Firebase
        async function setLanguageToFirebase(language) {
            try {
                await window.firebaseDataManager.setLanguage(language);
                return true;
            } catch (error) {
                console.error('ä¿å­˜è¯­è¨€è®¾ç½®å¤±è´¥:', error);
                return false;
            }
        }
        
        // ==================== è¯­è¨€è®¾ç½®FirebaseåŒ–ç»“æŸ ====================
    </script>
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --black: #000000;
            --dark-gray: #1a1a1a;
            --text-light: #fff;
            --shadow: 0 10px 32px 0 rgba(212,175,55,0.13), 0 2px 4px rgba(0,0,0,0.23);
            --glass: rgba(24,24,24,0.76);
            --glass-blur: blur(20px) saturate(180%);
        }
        
        #tsparticles {
            position: fixed; left:0; top:0; width:100vw; height:100vh;
            pointer-events: none; z-index: 0;
        }
        
        body {
            font-family: 'Montserrat', 'Poppins', 'Source Han Sans SC', 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: #000000; /* æ”¹ä¸ºçº¯é»‘è‰²èƒŒæ™¯ï¼Œç§»é™¤æ·±ç°è‰²æ¸å˜ */
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            overflow: hidden; /* é˜²æ­¢æ•´ä½“é¡µé¢æ»šåŠ¨ */
            display: none; /* åˆå§‹éšè—ï¼Œç­‰å¾…è®¤è¯å®Œæˆåæ˜¾ç¤º */
        }
        
        /* æ–°å¢å¸ƒå±€æ ·å¼ */
        .layout-container {
            display: flex;
            width: 100%;
            min-height: 100vh;
        }
        
        /* ä¾§è¾¹æ æ ·å¼ */
        .sidebar {
            width: 280px;
            background: rgba(24,24,24,0.95);
            -webkit-backdrop-filter: var(--glass-blur);
            backdrop-filter: var(--glass-blur);
            border-right: 1.5px solid rgba(212,175,55,0.15);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 10;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(212,175,55,0.3);
        }
        
        .sidebar-logo {
            font-size: 2.5em;
            color: var(--gold);
            font-family: 'Montserrat', cursive;
            font-weight: 900;
            user-select: none;
            letter-spacing: 1px;
            text-shadow: 0 0 22px rgba(212,175,55,0.28);
        }
        
        .sidebar-subtitle {
            color: var(--gold-light);
            font-size: 0.9em;
            margin-top: 5px;
            font-style: italic;
        }
        
        .sidebar-title {
            color: var(--gold);
            font-size: 1em;
            margin-top: 10px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .sidebar-menu {
            padding: 15px 0;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .sidebar-menu-item {
            width: 100%;
        }
        
        .sidebar-menu-header {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            color: var(--gold);
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-menu-header:hover {
            background: rgba(212,175,55,0.15);
            border-left: 3px solid var(--gold);
        }
        
        .sidebar-menu-icon {
            margin-right: 12px;
            font-size: 1.2em;
        }
        
        .sidebar-menu-title {
            flex: 1;
        }
        
        .sidebar-menu-arrow {
            font-size: 0.8em;
            transition: transform 0.3s;
        }
        
        .sidebar-menu-item.active .sidebar-menu-arrow {
            transform: rotate(180deg);
        }
        
        .sidebar-submenu {
            display: none;
            background: rgba(0,0,0,0.3);
        }
        
        .sidebar-submenu.active {
            display: block;
        }
        
        .sidebar-submenu-item {
            padding: 10px 20px 10px 48px;
            cursor: pointer;
            color: #cccccc;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-submenu-item:hover {
            background: rgba(212,175,55,0.1);
            color: var(--gold-light);
            border-left: 3px solid var(--gold-light);
        }
        
        .sidebar-submenu-item.active {
            background: rgba(212,175,55,0.2);
            color: var(--gold-light);
            border-left: 3px solid var(--gold);
        }
        
        /* ä¸»å†…å®¹åŒºæ ·å¼ */
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»šåŠ¨ */
        }
        
        .content-container {
            flex: 1;
            padding: 20px 20px 30px 20px; /* è°ƒæ•´åº•éƒ¨paddingï¼Œé…åˆ0pxé—´è·è®¾ç½® */
            margin-top: 20px;
            overflow-y: auto; /* å†…å®¹åŒºåŸŸæ»šåŠ¨ */
            height: calc(100vh - 54px); /* å‡å»é¡¶éƒ¨å¯¼èˆªçš„é«˜åº¦54px */
        }
        
        /* ç§»é™¤è¿”å›æŒ‰é’®ï¼Œå› ä¸ºå¯¼èˆªç°åœ¨é€šè¿‡ä¾§è¾¹æ å®Œæˆ */
        .back-button {
            display: none;
        }
        
        /* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
        .hamburger-menu {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 100;
            background: var(--glass);
            -webkit-backdrop-filter: var(--glass-blur);
            backdrop-filter: var(--glass-blur);
            border-radius: 5px;
            border: 1px solid var(--gold);
            padding: 5px;
            cursor: pointer;
        }
        
        .hamburger-line {
            width: 25px;
            height: 3px;
            background-color: var(--gold);
            margin: 5px;
            transition: all 0.3s;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 900px) {
            .sidebar {
                width: 240px;
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                width: 100%;
            }
            
            .hamburger-menu {
                display: block;
            }
            
            .content-container {
                height: calc(100vh - 54px); /* ç§»åŠ¨ç«¯ä¿æŒä¸æ¡Œé¢ç«¯ä¸€è‡´çš„é«˜åº¦è®¡ç®— */
                padding-bottom: 74px; /* ç§»åŠ¨ç«¯ä¹Ÿä¸ºfooteré¢„ç•™ç©ºé—´ */
            }
            
            .content-area {
                height: calc(100vh - 170px); /* ç§»åŠ¨ç«¯ä¿æŒç›¸åŒçš„å†…å®¹åŒºåŸŸé«˜åº¦ */
                max-height: calc(100vh - 170px);
                margin-bottom: 0px; /* ç§»åŠ¨ç«¯é»„è‰²è¾¹æ¡†ä¸ç‰ˆæƒæ–‡å­—ä¹Ÿç´§è´´ï¼Œ0pxé—´è· */
            }
            
            .footer {
                left: 0; /* ç§»åŠ¨ç«¯æ—¶è¦†ç›–æ•´ä¸ªå®½åº¦ */
                bottom: 5px; /* ç§»åŠ¨ç«¯è·ç¦»åº•éƒ¨5px */
            }
            
            .top-nav {
                left: 0; /* ç§»åŠ¨ç«¯æ—¶è¦†ç›–æ•´ä¸ªå®½åº¦ */
            }
        }
        
        /* å¹³æ¿è®¾å¤‡é€‚é… */
        @media screen and (max-width: 768px) {
            .sidebar {
                width: 220px;
                z-index: 1000;
                box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            }
            
            .sidebar-header {
                padding: 15px;
            }
            
            .sidebar-logo {
                width: 60px;
                height: 60px;
                font-size: 1.8em;
            }
            
            .sidebar-title {
                font-size: 0.9em;
            }
            
            .sidebar-menu-header {
                padding: 10px 15px;
                font-size: 0.9em;
            }
            
            .sidebar-submenu-item {
                padding: 8px 15px 8px 40px;
                font-size: 0.85em;
            }
            
            .content-area {
                padding: 20px;
                margin-top: 15px;
                height: calc(100vh - 160px);
                max-height: calc(100vh - 160px);
            }
            
            .content-area h1 {
                font-size: 2.2em;
                margin-bottom: 15px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .form-row .form-group {
                margin-bottom: 15px;
            }
            
            input, select, textarea {
                padding: 12px;
                font-size: 16px; /* é˜²æ­¢iOSè‡ªåŠ¨ç¼©æ”¾ */
                border-radius: 6px;
            }
            
            button {
                padding: 12px 20px;
                font-size: 16px;
                border-radius: 6px;
                margin: 10px 5px;
            }
            
            .top-nav {
                padding: 0 15px;
                height: 50px;
            }
            
            .store-info, .user-info, .language-switcher {
                height: 36px;
                padding: 6px 12px;
                font-size: 0.9em;
            }
            
            .language-btn {
                padding: 4px 8px;
                font-size: 0.8em;
                min-width: 45px;
            }
            
            .hamburger-menu {
                top: 12px;
                left: 12px;
            }
            
            .hamburger-line {
                width: 22px;
                height: 2px;
                margin: 4px;
            }
        }
        
        /* æ‰‹æœºè®¾å¤‡é€‚é… */
        @media screen and (max-width: 480px) {
            .sidebar {
                width: 200px;
            }
            
            .sidebar-header {
                padding: 12px;
            }
            
            .sidebar-logo {
                width: 50px;
                height: 50px;
                font-size: 1.5em;
            }
            
            .sidebar-subtitle {
                font-size: 0.8em;
            }
            
            .sidebar-title {
                font-size: 0.8em;
            }
            
            .sidebar-menu-header {
                padding: 8px 12px;
                font-size: 0.85em;
            }
            
            .sidebar-menu-icon {
                font-size: 1em;
                margin-right: 8px;
            }
            
            .sidebar-submenu-item {
                padding: 6px 12px 6px 35px;
                font-size: 0.8em;
            }
            
            .content-area {
                padding: 15px;
                margin-top: 10px;
                height: calc(100vh - 150px);
                max-height: calc(100vh - 150px);
            }
            
            .content-area h1 {
                font-size: 1.8em;
                margin-bottom: 12px;
            }
            
            .form-group {
                margin-bottom: 12px;
            }
            
            input, select, textarea {
                padding: 10px;
                font-size: 16px;
            }
            
            button {
                padding: 10px 15px;
                font-size: 15px;
                margin: 8px 3px;
            }
            
            .top-nav {
                padding: 0 10px;
                height: 45px;
            }
            
            .store-info, .user-info, .language-switcher {
                height: 32px;
                padding: 5px 10px;
                font-size: 0.8em;
            }
            
            .language-btn {
                padding: 3px 6px;
                font-size: 0.75em;
                min-width: 40px;
            }
            
            .hamburger-menu {
                top: 10px;
                left: 10px;
                padding: 4px;
            }
            
            .hamburger-line {
                width: 20px;
                height: 2px;
                margin: 3px;
            }
            
            .footer {
                font-size: 0.75em;
                padding: 3px 10px;
            }
            
            /* è¡¨æ ¼å’Œåˆ—è¡¨åœ¨ç§»åŠ¨ç«¯çš„é€‚é… */
            .employee-table, .salon-table, .product-table {
                font-size: 0.85em;
            }
            
            .employee-table th, .employee-table td,
            .salon-table th, .salon-table td,
            .product-table th, .product-table td {
                padding: 8px 4px;
            }
            
            /* æœç´¢å’Œç­›é€‰æ§ä»¶é€‚é… */
            .search-controls, .filter-controls {
                flex-direction: column;
                gap: 8px;
            }
            
            .search-controls input, .filter-controls select {
                width: 100%;
                margin-bottom: 8px;
            }
        }
        
        /* æ¨ªå±æ¨¡å¼é€‚é… */
        @media screen and (max-height: 600px) and (orientation: landscape) {
            .content-area {
                height: calc(100vh - 120px);
                max-height: calc(100vh - 120px);
                padding: 10px;
            }
            
            .content-area h1 {
                font-size: 1.5em;
                margin-bottom: 8px;
            }
            
            .form-group {
                margin-bottom: 8px;
            }
            
            .sidebar {
                width: 180px;
            }
            
            .sidebar-header {
                padding: 8px;
            }
            
            .sidebar-logo {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
            
            .sidebar-menu-header {
                padding: 6px 10px;
                font-size: 0.8em;
            }
            
            .top-nav {
                height: 40px;
                padding: 0 8px;
            }
            
            .store-info, .user-info, .language-switcher {
                height: 28px;
                padding: 4px 8px;
                font-size: 0.7em;
            }
            
            .language-btn {
                padding: 2px 4px;
                font-size: 0.7em;
                min-width: 35px;
            }
        }
        
        /* ç§»åŠ¨ç«¯è§¦æ‘¸ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»åŠ¨è®¾å¤‡ç‰¹å®šæ ·å¼ */
            button, .sidebar-menu-header, .sidebar-submenu-item, .language-btn {
                -webkit-tap-highlight-color: rgba(212, 175, 55, 0.3);
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            input, select, textarea {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
            }
            
            /* é˜²æ­¢ç§»åŠ¨ç«¯é¡µé¢ç¼©æ”¾ */
            html {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
            }
            
            /* ä¼˜åŒ–ç§»åŠ¨ç«¯æ»šåŠ¨ */
            body, .content-area, .sidebar-menu {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
            }
            
            /* ç§»åŠ¨ç«¯è¾“å…¥æ¡†æ ·å¼ä¼˜åŒ– */
            input[type="email"], input[type="password"], input[type="text"], 
            input[type="tel"], input[type="number"], input[type="date"] {
                -webkit-appearance: none;
                border-radius: 6px;
                box-shadow: none;
            }
            
            /* ç§»åŠ¨ç«¯æŒ‰é’®è§¦æ‘¸åé¦ˆ */
            button:active, .sidebar-menu-header:active, .sidebar-submenu-item:active, .language-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            /* æ±‰å ¡èœå•æŒ‰é’®è§¦æ‘¸åé¦ˆ */
            .hamburger-menu:active {
                transform: scale(0.9);
                transition: transform 0.1s ease;
            }
            
            /* ä¼˜åŒ–è§¦æ‘¸æ»šåŠ¨åŒºåŸŸ */
            .content-area, .sidebar-menu {
                touch-action: pan-y;
            }
        }
        
        /* ç‰¹å®šiOSè®¾å¤‡ä¼˜åŒ– */
        @supports (-webkit-appearance: none) {
            .sidebar, .content-area, .top-nav {
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
            }
            
            input, select, textarea {
                -webkit-appearance: none;
                border-radius: 6px;
            }
            
            /* iOS Safariåœ°å€æ éšè—æ—¶çš„é«˜åº¦é€‚é… */
            @media screen and (max-height: 500px) {
                .content-area {
                    height: calc(100vh - 100px);
                    max-height: calc(100vh - 100px);
                }
            }
        }
        
        /* ä¿ç•™åŸæœ‰æ ·å¼ */
        .container, .content-area, .top-nav, .footer {
            background: var(--glass);
            -webkit-backdrop-filter: var(--glass-blur);
            backdrop-filter: var(--glass-blur);
            box-shadow: var(--shadow);
            border: 1.5px solid rgba(212,175,55,0.08);
        }
        
        .content-area {
            display: none;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid var(--gold);
            margin-top: 20px;
            margin-bottom: 0px; /* é»„è‰²è¾¹æ¡†ä¸ç‰ˆæƒæ–‡å­—ç´§è´´ï¼Œ0pxé—´è· */
            height: calc(100vh - 170px); /* è°ƒæ•´é«˜åº¦ï¼Œé…åˆ0pxé—´è· */
            max-height: calc(100vh - 170px); /* ç¡®ä¿é«˜åº¦ä¸€è‡´æ€§ */
            overflow: hidden; /* é»˜è®¤éšè—æ»šåŠ¨æ¡ */
        }
        
        /* éœ€è¦æ»šåŠ¨æ¡çš„é¡µé¢ */
        #new-employee.content-area,
        #new-salon.content-area,
        #add-product.content-area,
        #operation-history.content-area,
        #performance-target.content-area,
        #data-comparison.content-area,
        #audit-report.content-area,
        #approval-management.content-area,
        #product-category.content-area,
        #stock-check.content-area,
        #restock-alert.content-area,
        #usage-record.content-area,
        #income-record.content-area,
        #expense-record.content-area,
        #financial-report.content-area {
            overflow-y: auto; /* å…è®¸å‚ç›´æ»šåŠ¨ */
        }
        
        /* ç»Ÿä¸€çš„æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 12px; 
            background: #1a1a1a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(120deg, #d4af37 55%, #1a1a1a 100%);
            border-radius: 7px;
            box-shadow: 0 2px 10px rgba(212,175,55,0.13);
            border: 2px solid #232323;
        }
        
        ::-webkit-scrollbar-corner { 
            background: #191919;
        }
        
        .content-area.active {
            display: block;
        }
        

        

        

        
        .content-area h1 {
            color: var(--gold);
            border-bottom: 2px solid var(--gold);
            padding-bottom: 10px;
        }
        
        h1, h2, h3 {
            font-family: 'Montserrat', 'Poppins', 'Source Han Sans SC', Arial, sans-serif;
            font-weight: 700;
            letter-spacing: 0.03em;
        }
        
        h1 { 
            color: var(--gold); 
            font-size: 2.6em; 
            margin-bottom: 18px;
        }
        
        h2 { 
            color: var(--gold); 
            margin: 0 0 13px 0; 
            font-size: 1.44em; 
            transition: color .24s;
        }
        
        p { 
            color: var(--text-light); 
            margin: 0 0 12px 0; 
            line-height: 1.7; 
            font-size: 1.08em;
        }
        
        .footer {
            text-align: center;
            margin-top: auto;
            padding: 5px 15px; /* ä¸Šä¸‹é—´è·è®¾ä¸º5px */
            height: auto; /* è®©é«˜åº¦è‡ªé€‚åº”å†…å®¹ */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85em;
            position: fixed; /* å›ºå®šåœ¨åº•éƒ¨ */
            bottom: 5px; /* è·ç¦»åº•éƒ¨5px */
            left: 280px; /* ä¸ä¾§è¾¹æ å¯¹é½ */
            right: 0;
            background: transparent; /* ç§»é™¤èƒŒæ™¯ï¼Œè®©æ–‡å­—ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢èƒŒæ™¯ä¸Š */
            z-index: 999; /* é™ä½å±‚çº§ï¼Œä¸è¦†ç›–å†…å®¹è¾¹æ¡† */
        }
        
        /* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 26px;
            border: none;
            box-shadow: none;
            background: rgba(0,0,0,0.22);
            height: 54px;
            position: fixed; /* å›ºå®šé¡¶éƒ¨å¯¼èˆª */
            top: 0;
            right: 0;
            left: 280px; /* ä¸å·¦ä¾§èœå•å¯¹é½ */
            z-index: 5;
            border-radius: 0;
            margin: 0;
        }
        
        /* ä»£ç†åº—åç§°æ˜¾ç¤ºæ ·å¼ */
        .store-info, .user-info, .language-switcher {
            box-shadow: 0 2px 6px rgba(212,175,55,0.06);
            border: 1px solid rgba(212,175,55,0.12);
            background: rgba(25,25,25,0.70);
        }
        
        .store-info {
            padding: 8px 15px;
            border-radius: 8px;
            height: 40px;
            display: flex;
            align-items: center;
            box-sizing: border-box;
        }
        
        .store-info span, .user-position, .user-name, .language-btn {
            font-family: 'Montserrat', 'Source Han Sans SC', Arial, sans-serif;
        }
        
        .store-info span {
            color: var(--gold);
            font-size: 0.9em;
            font-weight: bold;
        }
        
        /* å³ä¾§å¯¼èˆªç»„ */
        .nav-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ ·å¼ */
        .user-info {
            padding: 8px 15px;
            border-radius: 8px;
            height: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-sizing: border-box;
        }
        
        .user-position {
            background: var(--gold);
            color: var(--black);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .user-name {
            color: var(--text-light);
            font-size: 0.9em;
            transition: all 0.2s ease;
        }
        
        .user-name:hover {
            background-color: rgba(212, 175, 55, 0.2);
            border-radius: 3px;
            padding: 2px 6px;
        }
        
        .user-name::after {
            content: ' â–¼';
            font-size: 0.8em;
            opacity: 0.7;
            margin-left: 5px;
        }
        
        /* è¯­è¨€åˆ‡æ¢æ ·å¼ */
        .language-switcher {
            display: flex;
            gap: 5px;
            padding: 8px 15px;
            border-radius: 8px;
            height: 40px;
            align-items: center;
            box-sizing: border-box;
        }
        
        .language-btn {
            background: transparent;
            color: var(--text-light);
            border: 1px solid var(--gold);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            min-width: 50px;
            white-space: nowrap;
        }
        
        .language-btn:hover {
            background: var(--gold);
            color: var(--black);
        }
        
        .language-btn.active {
            background: var(--gold);
            color: var(--black);
            font-weight: bold;
        }
        

        
        /* ä¿ç•™å…¶ä»–æ‰€æœ‰åŸå§‹æ ·å¼ */
    </style>
</head>
<body>
    <div id="tsparticles"></div>
    
    <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
    <div class="hamburger-menu" onclick="toggleMobileMenu()">
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
    </div>
    
    <!-- é¡µé¢æ•´ä½“å¸ƒå±€ -->
    <div class="layout-container">
        <!-- å·¦ä¾§èœå•æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">M</div>
                <div class="sidebar-subtitle">Mesia Professional</div>
                <div class="sidebar-title" data-i18n="system-title">Mesiaé¦–å°”è¥¿éƒ¨åœ°åŒºç®¡ç†ç³»ç»Ÿ</div>
            </div>
            
            <!-- ä¾§è¾¹æ èœå• -->
            <div class="sidebar-menu">
                <!-- æ¦‚å†µæ€»è§ˆ -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="showContent('dashboard', event)">
                        <span class="sidebar-menu-icon">ğŸ“Š</span>
                        <span class="sidebar-menu-title" data-i18n="dashboard">æ¦‚å†µæ€»è§ˆ</span>
                    </div>
                </div>
                
                <!-- èŒå‘˜ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('employee')">
                        <span class="sidebar-menu-icon">ğŸ‘¤</span>
                        <span class="sidebar-menu-title" data-i18n="employee-management">èŒå‘˜ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-employee-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('new-employee', event)" id="new-employee-menu">
                            <span data-i18n="new-employee">æ–°å¢èŒå‘˜</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('employee-list', event)">
                            <span data-i18n="employee-list">èŒå‘˜åˆ—è¡¨</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('delete-employee', event)" id="delete-employee-menu">
                            <span data-i18n="delete-employee">åˆ é™¤èŒå‘˜</span>
                        </div>
                    </div>
                </div>
                
                <!-- æ²™é¾™ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('customer')">
                        <span class="sidebar-menu-icon">ğŸ¢</span>
                        <span class="sidebar-menu-title" data-i18n="customer-management">æ²™é¾™ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-customer-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('new-salon', event)">
                            <span data-i18n="new-salon">æ–°å¢æ²™é¾™</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('salon-info', event)">
                            <span data-i18n="salon-info">æ²™é¾™ä¿¡æ¯</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('delete-salon', event)" id="delete-salon-menu">
                            <span data-i18n="delete-salon">åˆ é™¤æ²™é¾™</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('district-management', event)" id="district-management-menu">
                            <span data-i18n="district-management">åŒºåŸŸç®¡ç†</span>
                        </div>
                    </div>
                </div>
                
                <!-- äº§å“ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('product')">
                        <span class="sidebar-menu-icon">ğŸ“¦</span>
                        <span class="sidebar-menu-title" data-i18n="product-management">äº§å“ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-product-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('add-product', event)">
                            <span data-i18n="add-product">æ–°å¢äº§å“</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('product-list', event)">
                            <span data-i18n="product-list">äº§å“åˆ—è¡¨</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('product-category', event)">
                            <span data-i18n="product-category">äº§å“åˆ†ç±»</span>
                        </div>
                    </div>
                </div>
                
                <!-- åº“å­˜ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('inventory')">
                        <span class="sidebar-menu-icon">ğŸ”„</span>
                        <span class="sidebar-menu-title" data-i18n="inventory-management">åº“å­˜ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-inventory-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('stock-check', event)">
                            <span data-i18n="stock-check">åº“å­˜ç›˜ç‚¹</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('restock-alert', event)">
                            <span data-i18n="restock-alert">è¡¥è´§æé†’</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('usage-record', event)">
                            <span data-i18n="usage-record">ä½¿ç”¨è®°å½•</span>
                        </div>
                    </div>
                </div>
                
                <!-- è´¢åŠ¡ç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('finance')">
                        <span class="sidebar-menu-icon">ğŸ’°</span>
                        <span class="sidebar-menu-title" data-i18n="finance-management">è´¢åŠ¡ç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-finance-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('income-record', event)">
                            <span data-i18n="income-record">æ”¶å…¥è®°å½•</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('expense-record', event)">
                            <span data-i18n="expense-record">æ”¯å‡ºè®°å½•</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('financial-report', event)">
                            <span data-i18n="financial-report">è´¢åŠ¡æŠ¥è¡¨</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('performance-target', event)">
                            <span data-i18n="performance-target">ä¸šç»©ç›®æ ‡</span>
                        </div>
                    </div>
                </div>
                
                <!-- æ“ä½œç®¡ç† -->
                <div class="sidebar-menu-item">
                    <div class="sidebar-menu-header" onclick="toggleSidebarSubmenu('audit')">
                        <span class="sidebar-menu-icon">ğŸ“‹</span>
                        <span class="sidebar-menu-title" data-i18n="audit-management">æ“ä½œç®¡ç†</span>
                        <span class="sidebar-menu-arrow">â–¼</span>
                    </div>
                    <div class="sidebar-submenu" id="sidebar-audit-submenu">
                        <div class="sidebar-submenu-item" onclick="showContent('operation-history', event)">
                            <span data-i18n="operation-history">æ“ä½œå†å²è®°å½•</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('data-comparison', event)">
                            <span data-i18n="data-comparison">æ•°æ®å¯¹æ¯”æŸ¥çœ‹</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('audit-report', event)">
                            <span data-i18n="audit-report">å®¡è®¡æŠ¥å‘Š</span>
                        </div>
                        <div class="sidebar-submenu-item" onclick="showContent('approval-management', event)" id="approval-management-menu">
                            <span data-i18n="approval-management">å®¡æ‰¹ç®¡ç†</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <div class="top-nav">
                <!-- å·¦ä¾§ç©ºç™½åŒºåŸŸ -->
                <div>
                    <!-- æ­¤å¤„ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ -->
                </div>
                
                <!-- å³ä¾§ä¿¡æ¯ç»„ -->
                <div class="nav-right">
                    <!-- ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º -->
                    <div class="user-info" id="userInfo">
                        <span id="userPosition" class="user-position" data-i18n="admin">ç®¡ç†å‘˜</span>
                        <div class="user-name-container" style="position: relative;">
                            <span id="userName" class="user-name" onclick="showUserMenu()" style="cursor: pointer;" data-i18n="system-admin">ç³»ç»Ÿç®¡ç†å‘˜</span>
                            <!-- ç”¨æˆ·èœå•ä¸‹æ‹‰æ¡† -->
                            <div id="userMenuDropdown" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 8px; background: rgba(24,24,24,0.95); border: 1px solid var(--gold); border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 1000; width: 120px;">
                                <div class="user-menu-item" onclick="logout()" style="padding: 10px 15px; color: var(--text-light); cursor: pointer; transition: all 0.3s; text-align: center;">
                                    <span data-i18n="logout">é€€å‡ºç™»å½•</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
                    <div class="language-switcher">
                        <button class="language-btn active" onclick="setUserLanguage('zh')" id="btn-zh">ä¸­æ–‡</button>
                        <button class="language-btn" onclick="setUserLanguage('ko')" id="btn-ko">í•œêµ­ì–´</button>
                    </div>
                </div>
            </div>
            
            <!-- å†…å®¹åŒºåŸŸå®¹å™¨ -->
            <div class="content-container">
                <!-- æ¦‚å†µæ€»è§ˆé¡µé¢ -->
                <div id="dashboard" class="content-area">
                    <h1 data-i18n="dashboard">æ¦‚å†µæ€»è§ˆ</h1>
                    
                    <!-- ä¸»è¦ä¸šç»©é¢æ¿ -->
                    <div style="background: rgba(35,35,35,0.95); border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                            <h2 style="margin: 0; color: var(--text-light); font-size: 1.2em;" data-i18n="main-performance">ä¸»è¦ä¸šç»©</h2>
                            <div style="color: var(--gold);">
                                <span style="font-size: 1.1em;">&#x1F50D;</span>
                            </div>
                        </div>
                        <div style="padding: 0;">
                            <div style="text-align: right; padding: 10px 20px; color: #aaa; font-size: 0.9em;">
                                <span data-i18n="unit-label">[å•ä½:åƒå…ƒ]</span>
                            </div>
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="category">åˆ†ç±»</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="target">ç›®æ ‡</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="actual">å®ç»©</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 25%;" data-i18n="progress-rate">è¿›åº¦ç‡(%)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="my-performance">æˆ‘çš„ä¸šç»©</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: #4CAF50; border: 1px solid rgba(212, 175, 55, 0.1); font-weight: bold;">0</td>
                                    </tr>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="agency-total-performance">ä»£ç†åº—æ€»ä¸šç»©</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: #FFC107; border: 1px solid rgba(212, 175, 55, 0.1); font-weight: bold;">0</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="transaction-salon-count">äº¤æ˜“æ²™é¾™æ•°</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);">0</td>
                                        <td style="padding: 15px; text-align: center; color: #F44336; border: 1px solid rgba(212, 175, 55, 0.1); font-weight: bold;">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ä¸»è¦æœªå¤„ç†ä¸šåŠ¡é¢æ¿ -->
                    <div style="background: rgba(35,35,35,0.95); border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                            <h2 style="margin: 0; color: var(--text-light); font-size: 1.2em;" data-i18n="pending-business">ä¸»è¦æœªå¤„ç†ä¸šåŠ¡</h2>
                            <div style="color: var(--gold);">
                                <span style="font-size: 1.1em;">&#x1F50D;</span>
                            </div>
                        </div>
                        <div style="padding: 0;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 70%;" data-i18n="category">åˆ†ç±»</th>
                                        <th style="padding: 12px 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1); width: 30%;" data-i18n="count">ä»¶æ•°</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="outbound-pending">å‡ºåº“æœªæ‰¹å‡†</td>
                                        <td style="padding: 15px; text-align: center; border: 1px solid rgba(212, 175, 55, 0.1);">
                                            <a href="#" style="color: var(--gold); text-decoration: none; font-weight: bold; font-size: 1.1em;">0</a>
                                        </td>
                                    </tr>
                                    <tr style="background: rgba(240,240,240,0.05);">
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="payment-pending">æ”¶æ¬¾æœªæ‰¹å‡†</td>
                                        <td style="padding: 15px; text-align: center; border: 1px solid rgba(212, 175, 55, 0.1);">
                                            <a href="#" style="color: var(--gold); text-decoration: none; font-weight: bold; font-size: 1.1em;">0</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 15px; text-align: center; color: var(--text-light); border: 1px solid rgba(212, 175, 55, 0.1);" data-i18n="delivery-pending">é…é€æœªå®Œæˆ</td>
                                        <td style="padding: 15px; text-align: center; border: 1px solid rgba(212, 175, 55, 0.1);">
                                            <a href="#" style="color: var(--gold); text-decoration: none; font-weight: bold; font-size: 1.1em;">0</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- èŒå‘˜ç®¡ç†é¡µé¢ -->
                <div id="new-employee" class="content-area">
                    <h1 data-i18n="new-employee">æ–°å¢èŒå‘˜</h1>
                    <form id="newEmployeeForm">
                        <!-- ç¬¬ä¸€æ’ï¼šåŸºæœ¬ä¿¡æ¯å’Œè”ç³»ä¿¡æ¯ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                            <!-- åŸºæœ¬ä¿¡æ¯ -->
                            <div style="background: rgba(212, 175, 55, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3);">
                                <h3 style="color: var(--gold); margin: 0 0 12px 0; font-size: 1.1em;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h3>
                                
                                <div style="display: grid; gap: 10px;">
                                    <div>
                                        <label for="employeeName" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="employee-name">å§“åï¼š</label>
                                        <input type="text" id="employeeName" required style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                    </div>
                                    <div>
                                        <label for="employeePosition" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="employee-position">èŒä½ï¼š</label>
                                        <select id="employeePosition" required style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                            <option value="salesperson" data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>
                                            <option value="manager" data-i18n="manager">ç»ç†</option>
                                            <option value="admin" data-i18n="admin">ç®¡ç†å‘˜</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="employeeEmail" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="work-email">å·¥ä½œé‚®ç®±ï¼š</label>
                                        <input type="email" id="employeeEmail" style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                        <div style="font-size: 0.8em; color: #999; margin-top: 2px;">å‘˜å·¥å¯ä½¿ç”¨æ­¤é‚®ç®±åœ¨ç™»å½•é¡µé¢è‡ªä¸»æ³¨å†Œ</div>
                                    </div>
                                    <div>
                                        <label for="employeeJoinDate" style="display: block; color: var(--gold); margin-bottom: 4px; font-size: 0.9em;" data-i18n="join-date">å…¥èŒæ—¥æœŸï¼š</label>
                                        <input type="date" id="employeeJoinDate" style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- è”ç³»ä¿¡æ¯ -->
                            <div style="background: rgba(135, 206, 235, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3);">
                                <h3 style="color: #87CEEB; margin: 0 0 12px 0; font-size: 1.1em;" data-i18n="contact-info">è”ç³»ä¿¡æ¯</h3>
                                
                                <div>
                                    <label for="employeeMobile" style="display: block; color: #87CEEB; margin-bottom: 4px; font-size: 0.9em;" data-i18n="mobile-number">æ‰‹æœºå·ï¼š</label>
                                    <input type="tel" id="employeeMobile" oninput="formatPhoneNumber(this)" placeholder="13812345678 æˆ– 01029968866" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç¬¬äºŒæ’ï¼šé“¶è¡Œè´¦æˆ·ä¿¡æ¯ -->
                        <div style="background: rgba(144, 238, 144, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); margin-bottom: 15px;">
                            <h3 style="color: #90EE90; margin: 0 0 12px 0; font-size: 1.1em;" data-i18n="bank-account-info">é“¶è¡Œè´¦æˆ·ä¿¡æ¯</h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 12px; margin-bottom: 10px;">
                                <div>
                                    <label for="bankName" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="bank-name">é“¶è¡Œåç§°ï¼š</label>
                                    <input type="text" id="bankName" placeholder="ä¾‹ï¼šä¸­å›½é“¶è¡Œ" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                                <div>
                                    <label for="bankAccount" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="bank-account">é“¶è¡Œè´¦å·ï¼š</label>
                                    <input type="text" id="bankAccount" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                                <div>
                                    <label for="accountHolder" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="account-holder">è´¦æˆ·æŒæœ‰äººï¼š</label>
                                    <input type="text" id="accountHolder" placeholder="é»˜è®¤ä½¿ç”¨èŒå‘˜å§“å" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                                </div>
                            </div>
                            
                            <div>
                                <label for="bankBranch" style="display: block; color: #90EE90; margin-bottom: 4px; font-size: 0.9em;" data-i18n="bank-branch">å¤‡æ³¨ï¼š</label>
                                <input type="text" id="bankBranch" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.9em;">
                            </div>
                        </div>
                        
                        <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="add">æ·»åŠ </button>
                    </form>
                </div>
                
                <div id="employee-list" class="content-area">
                    <h1 data-i18n="employee-list">èŒå‘˜åˆ—è¡¨</h1>
                    <p data-i18n="employee-list-desc">è¿™é‡Œæ˜¾ç¤ºæ‰€æœ‰èŒå‘˜çš„è¯¦ç»†ä¿¡æ¯åˆ—è¡¨ã€‚</p>
                    
                    <!-- ä¸»å®¹å™¨ï¼šåˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ† -->
                    <div id="employee-list-container" style="display: flex; gap: 20px; margin-top: 20px; height: calc(100vh - 320px); min-height: 400px;">
                        <!-- å·¦ä¾§ï¼šèŒå‘˜åˆ—è¡¨ -->
                        <div id="employee-list-left" style="flex: 0 0 40%; overflow-y: auto; padding-right: 10px; box-sizing: border-box;">
                            <div id="employee-list-content">
                                <!-- èŒå‘˜åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                        
                        <!-- å³ä¾§ï¼šèŒå‘˜è¯¦æƒ… -->
                        <div id="employee-list-right" style="flex: 1; display: none; box-sizing: border-box; padding-bottom: 30px;">
                            <div id="employee-detail-content" style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-bottom: 20px;">
                                <!-- èŒå‘˜è¯¦æƒ…å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ–°å¢äº§å“é¡µé¢ -->
                <div id="add-product" class="content-area">
                    <h1 style="margin-bottom: 15px;" data-i18n="add-product">æ–°å¢äº§å“</h1>
                    
                    <form id="addProductForm">
                        <!-- äº§å“åŸºæœ¬ä¿¡æ¯ -->
                        <div style="background: rgba(212, 175, 55, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-bottom: 15px;">
                            <h3 style="color: var(--gold); margin: 0 0 15px 0; font-size: 1.1em;" data-i18n="product-basic-info">äº§å“åŸºæœ¬ä¿¡æ¯</h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="productName" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-name">äº§å“åç§°ï¼š</label>
                                    <input type="text" id="productName" required style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="brandName" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="brand-name">å“ç‰Œåç§°ï¼š</label>
                                    <input type="text" id="brandName" style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="productModel" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-model">å‹å·ï¼š</label>
                                    <input type="text" id="productModel" style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="productSku" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-sku">è´§å·ï¼š</label>
                                    <input type="text" id="productSku" style="width: 100%; padding: 8px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="productCategory" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="product-category-select">äº§å“åˆ†ç±»ï¼š</label>
                                <select id="productCategory" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                    <option value="" data-i18n="please-select-category">è¯·é€‰æ‹©äº§å“åˆ†ç±»...</option>
                                    <option value="uncategorized" data-i18n="uncategorized">æœªåˆ†ç±»</option>
                                    <!-- å…¶ä»–åˆ†ç±»é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                                </select>
                            </div>
                        </div>
                        
                        <!-- è§„æ ¼ä¿¡æ¯ -->
                        <div style="background: rgba(135, 206, 235, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); margin-bottom: 15px;">
                            <h3 style="color: #87CEEB; margin: 0 0 15px 0; font-size: 1.1em;" data-i18n="product-specifications">è§„æ ¼ä¿¡æ¯</h3>
                            
                            <!-- å•ä½è§„æ ¼ -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="unitType" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="unit-type">æ•°é‡å•ä½ï¼š</label>
                                    <select id="unitType" onchange="updateUnitExample()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                        <option value="ä¸ª" data-i18n="unit-piece">ä¸ª</option>
                                        <option value="åª" data-i18n="unit-only">åª</option>
                                        <option value="æ”¯" data-i18n="unit-stick">æ”¯</option>
                                        <option value="ç“¶" data-i18n="unit-bottle">ç“¶</option>
                                        <option value="ç›’" data-i18n="unit-box">ç›’</option>
                                        <option value="è¢‹" data-i18n="unit-bag">è¢‹</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="weightVolume" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="weight-volume">é‡é‡/ä½“ç§¯ï¼š</label>
                                    <input type="number" id="weightVolume" min="0" step="0.1" onchange="calculateTotalWeight()" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="weightUnit" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="weight-unit">é‡é‡å•ä½ï¼š</label>
                                    <select id="weightUnit" onchange="calculateTotalWeight()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                        <option value="g" data-i18n="unit-gram">gï¼ˆå…‹ï¼‰</option>
                                        <option value="ml" data-i18n="unit-ml">mlï¼ˆæ¯«å‡ï¼‰</option>
                                        <option value="kg" data-i18n="unit-kg">kgï¼ˆåƒå…‹ï¼‰</option>
                                        <option value="l" data-i18n="unit-liter">Lï¼ˆå‡ï¼‰</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- åŒ…è£…è§„æ ¼ -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="perBoxCount" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="per-box-count">æ¯ç›’æ•°é‡ï¼š</label>
                                    <div style="display: flex; gap: 8px; align-items: center;">
                                        <span style="color: #87CEEB; font-size: 0.9em;">æ¯ç›’</span>
                                        <input type="number" id="perBoxCount" min="1" value="1" onchange="calculateTotalWeight()" style="flex: 1; padding: 8px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                        <span id="perBoxUnit" style="color: #87CEEB; font-size: 0.9em;">ç“¶</span>
                                    </div>
                                </div>
                                <div>
                                    <label for="perCaseCount" style="display: block; color: #87CEEB; margin-bottom: 5px;" data-i18n="per-case-count">ç®±è§„ï¼š</label>
                                    <div style="display: flex; gap: 8px; align-items: center;">
                                        <span style="color: #87CEEB; font-size: 0.9em;">æ¯ç®±</span>
                                        <input type="number" id="perCaseCount" min="1" value="1" onchange="calculateTotalWeight()" style="flex: 1; padding: 8px; background: transparent; border: 1px solid #87CEEB; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                        <span style="color: #87CEEB; font-size: 0.9em;">ç›’</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- è§„æ ¼è®¡ç®—ç»“æœ -->
                            <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 5px; border: 1px solid #87CEEB;">
                                <p style="color: #87CEEB; margin: 0; font-size: 0.95em;">
                                    <strong data-i18n="specification-summary">è§„æ ¼æ±‡æ€»ï¼š</strong>
                                    <span id="specificationSummary">æ¯ç“¶ 0gï¼Œæ¯ç›’ 1ç“¶ï¼Œæ¯ç®± 1ç›’ï¼Œæ¯ç®±æ€»é‡é‡ 0g</span>
                                </p>
                            </div>
                        </div>
                        
                        <!-- ä»·æ ¼ä¿¡æ¯ -->
                        <div style="background: rgba(144, 238, 144, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); margin-bottom: 15px;">
                            <h3 style="color: #90EE90; margin: 0 0 15px 0; font-size: 1.1em;" data-i18n="price-info">ä»·æ ¼ä¿¡æ¯</h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div>
                                    <label for="purchasePrice" style="display: block; color: #90EE90; margin-bottom: 5px;" data-i18n="purchase-price">è¿›è´§ä»·ï¼ˆâ‚©ï¼‰ï¼š</label>
                                    <input type="text" id="purchasePrice" oninput="formatKoreanPrice(this)" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="wholesalePrice" style="display: block; color: #90EE90; margin-bottom: 5px;" data-i18n="wholesale-price">æ‰¹å‘ä»·ï¼ˆâ‚©ï¼‰ï¼š</label>
                                    <input type="text" id="wholesalePrice" oninput="formatKoreanPrice(this)" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label for="retailPrice" style="display: block; color: #90EE90; margin-bottom: 5px;" data-i18n="retail-price">é›¶å”®ä»·ï¼ˆâ‚©ï¼‰ï¼š</label>
                                    <input type="text" id="retailPrice" oninput="formatKoreanPrice(this)" style="width: 100%; padding: 8px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label style="display: flex; align-items: center; color: #90EE90; cursor: pointer;">
                                    <input type="checkbox" id="isOnSale" checked style="margin-right: 8px;">
                                    <span data-i18n="is-on-sale">åœ¨å”®</span>
                                </label>
                                <label style="display: flex; align-items: center; color: #90EE90; cursor: pointer; margin-top: 8px;">
                                    <input type="checkbox" id="isDiscontinued" style="margin-right: 8px;">
                                    <span data-i18n="is-discontinued">åœäº§</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- å¤‡æ³¨ä¿¡æ¯ -->
                        <div style="background: rgba(255, 182, 193, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 182, 193, 0.3); margin-bottom: 20px;">
                            <h3 style="color: #FFB6C1; margin: 0 0 15px 0; font-size: 1.1em;" data-i18n="notes-info">å¤‡æ³¨ä¿¡æ¯</h3>
                            
                            <div style="margin-bottom: 15px;">
                                <label for="productNotes" style="display: block; color: #FFB6C1; margin-bottom: 5px;" data-i18n="product-notes">å¤‡æ³¨ï¼š</label>
                                <textarea id="productNotes" data-i18n-placeholder="product-notes-placeholder" placeholder="è¯·è¾“å…¥äº§å“å¤‡æ³¨ä¿¡æ¯..." style="width: 100%; padding: 10px; background: transparent; border: 1px solid #FFB6C1; color: var(--text-light); border-radius: 5px; box-sizing: border-box; min-height: 80px; resize: vertical;"></textarea>
                            </div>
                        </div>
                        
                        <!-- æ“ä½œæŒ‰é’® -->
                        <div style="display: flex; gap: 15px; justify-content: flex-end;">
                            <button type="button" onclick="resetProductForm()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="cancel">å–æ¶ˆ</button>
                            <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="add-product-submit">æ·»åŠ äº§å“</button>
                        </div>
                    </form>
                </div>

                <div id="product-category" class="content-area">
                    <h1 data-i18n="product-category">äº§å“åˆ†ç±»</h1>
                    
                    <!-- æ·»åŠ äº§å“åˆ†ç±»æŒ‰é’® -->
                    <div style="margin: 20px 0; display: flex; justify-content: space-between; align-items: center;">
                        <p data-i18n="product-category-content">ç®¡ç†äº§å“åˆ†ç±»ä¿¡æ¯</p>
                        <button onclick="openCreateCategoryModal()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="create-product-category">åˆ›å»ºäº§å“åˆ†ç±»</button>
                    </div>
                    
                    <!-- äº§å“åˆ†ç±»åˆ—è¡¨ -->
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-top: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="category-list">äº§å“åˆ†ç±»åˆ—è¡¨</h3>
                        <div id="categoryList" style="margin-top: 15px; max-height: calc(100vh - 320px); overflow-y: auto;">
                            <!-- äº§å“åˆ†ç±»åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            <div style="text-align: center; color: #cccccc; padding: 20px;" data-i18n="no-categories">æš‚æ— äº§å“åˆ†ç±»ï¼Œè¯·ç‚¹å‡»"åˆ›å»ºäº§å“åˆ†ç±»"æ·»åŠ </div>
                        </div>
                    </div>
                </div>

                <div id="product-list" class="content-area">
                    <h1 style="margin-bottom: 15px;" data-i18n="product-list">äº§å“åˆ—è¡¨</h1>
                    
                    <!-- æœç´¢ç­›é€‰å’Œæ’åºæ§åˆ¶ -->
                    <div id="product-count-display" style="margin: 10px 0; padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <!-- å·¦ä¾§ï¼šæœç´¢æ¡†å’Œç­›é€‰ -->
                            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                                <input type="text" id="productSearchInput" data-i18n-placeholder="search-product-placeholder" placeholder="æœç´¢äº§å“å/å“ç‰Œ/è´§å·..." oninput="searchProducts()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; min-width: 200px; font-size: 0.9em;">
                                <select id="productCategoryFilter" onchange="searchProducts()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; font-size: 0.9em;">
                                    <option value="" data-i18n="all-categories">å…¨éƒ¨åˆ†ç±»</option>
                                    <option value="uncategorized" data-i18n="uncategorized">æœªåˆ†ç±»</option>
                                    <!-- å…¶ä»–åˆ†ç±»é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                                </select>
                                <select id="productStatusFilter" onchange="searchProducts()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; font-size: 0.9em;">
                                    <option value="" data-i18n="all-status">å…¨éƒ¨çŠ¶æ€</option>
                                    <option value="on-sale" data-i18n="on-sale">åœ¨å”®</option>
                                    <option value="discontinued" data-i18n="discontinued">åœäº§</option>
                                </select>
                                <button onclick="clearProductFilters()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="clear-filters">æ¸…ç©ºç­›é€‰</button>
                            </div>
                            
                            <!-- å³ä¾§ï¼šæ’åºæŒ‰é’® -->
                            <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                                <button id="sort-product-name" onclick="toggleProductSort('name')" style="background: var(--gold); color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.85em; opacity: 0.7;" data-i18n="sort-by-name">äº§å“åç§°</button>
                                <button id="sort-brand" onclick="toggleProductSort('brand')" style="background: var(--gold); color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.85em; opacity: 0.7;" data-i18n="sort-by-brand">å“ç‰Œ</button>
                                <button id="sort-category" onclick="toggleProductSort('category')" style="background: var(--gold); color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.85em; opacity: 0.7;" data-i18n="sort-by-category">åˆ†ç±»</button>
                                <button id="sort-price" onclick="toggleProductSort('price')" style="background: var(--gold); color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.85em; opacity: 0.7;" data-i18n="sort-by-price">è¿›è´§ä»·</button>
                                <button id="sort-default" onclick="toggleProductSort('default')" style="background: var(--gold); color: var(--black); border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.85em; opacity: 1;" data-i18n="sort-default">é»˜è®¤æ’åº</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                    <div style="margin: 10px 0; padding: 10px; background: rgba(135, 206, 235, 0.1); border-radius: 5px; border: 1px solid rgba(135, 206, 235, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; color: #87CEEB;">
                            <span id="product-statistics">ç­›é€‰ç»“æœï¼šæ˜¾ç¤º 0 ä¸ªäº§å“</span>
                            <div style="display: flex; gap: 15px; font-size: 0.9em;">
                                <span id="total-products">æ€»äº§å“æ•°ï¼š0</span>
                                <span id="filtered-products">ç­›é€‰ç»“æœï¼š0</span>
                                <span id="on-sale-products">åœ¨å”®ï¼š0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ†é¡µæ§åˆ¶é¢æ¿ -->
                    <div id="product-pagination-controls" style="margin: 10px 0; padding: 10px; background: rgba(144, 238, 144, 0.1); border-radius: 5px; border: 1px solid rgba(144, 238, 144, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div style="display: flex; align-items: center; gap: 15px; color: #90EE90;">
                                <span style="font-weight: bold; font-size: 1em;" data-i18n="pagination-info">åˆ†é¡µä¿¡æ¯ï¼š</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-size: 0.9em;" data-i18n="go-to-page">è·³è½¬åˆ°ç¬¬</span>
                                    <input type="number" id="product-page-jump-input" min="1" onkeypress="handleProductPageJumpKeypress(event)" style="width: 60px; padding: 6px 8px; background: var(--dark-gray); border: 1px solid #90EE90; color: #90EE90; border-radius: 3px; text-align: center; font-size: 0.9em;">
                                    <span style="font-size: 0.9em;" data-i18n="page-unit">é¡µ</span>
                                    <button onclick="jumpToProductPage()" style="background: #90EE90; color: var(--black); border: none; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="jump-btn">è·³è½¬</button>
                                </div>
                            </div>
                            <div id="product-pagination" style="display: flex; align-items: center; gap: 8px; color: #90EE90; font-size: 0.9em;">
                                <button id="product-first-page" onclick="goToProductPage(1)" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="first-page">é¦–é¡µ</button>
                                <button id="product-prev-page" onclick="goToPrevProductPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="prev-page">ä¸Šä¸€é¡µ</button>
                                <span id="product-page-info" style="background: var(--gold); color: var(--black); padding: 6px 16px; border-radius: 3px; font-weight: bold; font-size: 0.9em;">ç¬¬ 1 é¡µ / å…± 1 é¡µ (0 ä¸ªé¡¹ç›®)</span>
                                <button id="product-next-page" onclick="goToNextProductPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="next-page">ä¸‹ä¸€é¡µ</button>
                                <button id="product-last-page" onclick="goToLastProductPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="last-page">æœ«é¡µ</button>
                                <select id="product-items-per-page" onchange="changeProductItemsPerPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; font-size: 0.9em; margin-left: 10px;">
                                    <option value="10" data-i18n="items-per-page-10">æ¯é¡µæ˜¾ç¤º: 10</option>
                                    <option value="20" selected data-i18n="items-per-page-20">æ¯é¡µæ˜¾ç¤º: 20</option>
                                    <option value="50" data-i18n="items-per-page-50">æ¯é¡µæ˜¾ç¤º: 50</option>
                                </select>
                                <span style="font-size: 0.9em;" data-i18n="items-unit">æ¡</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å·¦å³åˆ†æ å¸ƒå±€ -->
                    <div style="display: flex; gap: 20px; height: calc(100vh - 500px); min-height: 400px;">
                        <!-- å·¦ä¾§äº§å“åˆ—è¡¨ -->
                        <div id="product-list-left" style="width: 40%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); display: flex; flex-direction: column; height: 100%;">
                            <div style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); flex-shrink: 0; height: 53px; box-sizing: border-box; display: flex; align-items: center; justify-content: space-between;">
                                <h3 style="color: var(--gold); margin: 0;" data-i18n="product-list">äº§å“åˆ—è¡¨</h3>
                                <span style="color: var(--gold); font-weight: bold; font-size: 0.9em;" id="product-count-text" data-i18n="total-products-count" data-i18n-params='{"count": "0"}'>æ€»è®¡ 0 ä¸ªäº§å“</span>
                            </div>
                            <div id="product-list-content" style="padding: 15px; flex: 1; overflow-y: auto; box-sizing: border-box;">
                                <!-- äº§å“åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-products">æš‚æ— äº§å“æ•°æ®</p>
                            </div>
                        </div>
                        
                        <!-- å³ä¾§äº§å“è¯¦æƒ… -->
                        <div id="product-detail-right" style="width: 60%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); display: none; flex-direction: column; height: 100%;">
                            <div id="product-detail-header" style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; height: 53px; box-sizing: border-box;">
                                <h3 style="color: var(--gold); margin: 0;" data-i18n="product-detail">äº§å“è¯¦æƒ…</h3>
                                <div id="product-action-buttons" style="display: flex; gap: 10px;">
                                    <!-- æŒ‰é’®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                            <div id="product-detail-content" style="padding: 20px; flex: 1; overflow-y: visible; line-height: 1.6; box-sizing: border-box;">
                                <!-- äº§å“è¯¦æƒ…å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- åˆ é™¤èŒå‘˜é¡µé¢ -->
                <div id="delete-employee" class="content-area">
                    <h1 data-i18n="delete-employee">åˆ é™¤èŒå‘˜</h1>
                    <div style="margin-top: 20px;">
                        <label for="deleteEmployeeSelect" style="display: block; color: var(--gold); margin-bottom: 10px;" data-i18n="select-employee-to-delete">é€‰æ‹©è¦åˆ é™¤çš„èŒå‘˜ï¼š</label>
                        <select id="deleteEmployeeSelect" style="width: 100%; padding: 10px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                            <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜...</option>
                        </select>
                        <button onclick="deleteSelectedEmployee()" style="background: #ff6666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 20px;" data-i18n="confirm-delete">ç¡®è®¤åˆ é™¤</button>
                    </div>
                </div>
                
                <!-- æ–°å¢æ²™é¾™é¡µé¢ -->
                <div id="new-salon" class="content-area">
                    <h1 data-i18n="new-salon">æ–°å¢æ²™é¾™</h1>
                    
                    <!-- å·¦å³åˆ†æ å¸ƒå±€ -->
                    <div style="display: flex; gap: 20px; height: calc(100vh - 320px); min-height: 500px;">
                        <!-- å·¦ä¾§ï¼šå•ä¸ªæ–°å¢é¡µé¢ -->
                        <div style="flex: 0 0 40%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); padding: 20px; height: 100%; overflow-y: auto; box-sizing: border-box;">
                            <h2 style="color: var(--gold); margin: 0 0 15px 0; text-align: center; font-size: 1.1em;" data-i18n="single-add-salon">å•ä¸ªæ–°å¢æ²™é¾™</h2>
                    
                    <form id="newSalonForm">
                            <!-- æ²™é¾™åŸºæœ¬ä¿¡æ¯ -->
                                <div style="background: rgba(212, 175, 55, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-bottom: 12px;">
                                    <h3 style="color: var(--gold); margin: 0 0 10px 0; font-size: 0.95em;" data-i18n="salon-basic-info">æ²™é¾™åŸºæœ¬ä¿¡æ¯</h3>
                                
                                <div style="display: grid; gap: 8px;">
                                    <div>
                                        <label for="salonName" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-name">æ²™é¾™åç§°ï¼š</label>
                                        <input type="text" id="salonName" required style="width: 100%; padding: 6px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonAddress" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-address">æ²™é¾™åœ°å€ï¼š</label>
                                        <input type="text" id="salonAddress" required style="width: 100%; padding: 6px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="businessLicense" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="business-license">è¥ä¸šæ‰§ç…§å·ç ï¼š</label>
                                        <input type="text" id="businessLicense" oninput="formatBusinessLicense(this)" placeholder="000-00-00000" style="width: 100%; padding: 6px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="responsibleEmployee" style="display: block; color: var(--gold); margin-bottom: 3px; font-size: 0.85em;" data-i18n="responsible-employee">è´Ÿè´£èŒå‘˜ï¼š</label>
                                        <select id="responsibleEmployee" style="width: 100%; padding: 6px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                            <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- é™¢é•¿ä¿¡æ¯å’Œè”ç³»ä¿¡æ¯ -->
                                <div style="background: rgba(144, 238, 144, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); margin-bottom: 15px;">
                                    <h3 style="color: #90EE90; margin: 0 0 10px 0; font-size: 0.95em;" data-i18n="director-info">é™¢é•¿ä¿¡æ¯</h3>
                                
                                <div style="display: grid; gap: 8px;">
                                    <div>
                                        <label for="directorName" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="director-name">é™¢é•¿å§“åï¼š</label>
                                        <input type="text" id="directorName" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="directorMobile" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœºï¼š</label>
                                        <input type="tel" id="directorMobile" oninput="formatPhoneNumber(this)" placeholder="000-0000-0000" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonPhone" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-phone">åº—é“ºç”µè¯ï¼š</label>
                                        <input type="tel" id="salonPhone" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonEmail" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="salon-email">ç”µå­é‚®ç®±ï¼š</label>
                                        <input type="email" id="salonEmail" style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em;">
                                    </div>
                                    <div>
                                        <label for="salonNotes" style="display: block; color: #90EE90; margin-bottom: 3px; font-size: 0.85em;" data-i18n="notes">å¤‡æ³¨ï¼š</label>
                                        <textarea id="salonNotes" data-i18n-placeholder="notes-placeholder" placeholder="åœ¨è¿™é‡Œæ·»åŠ å¤‡æ³¨ä¿¡æ¯..." style="width: 100%; padding: 6px; background: transparent; border: 1px solid #90EE90; color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-size: 0.85em; min-height: 60px; resize: vertical; font-family: inherit;"></textarea>
                                </div>
                            </div>
                        </div>
                        
                                <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; font-size: 0.85em;" data-i18n="add">æ·»åŠ </button>
                    </form>
                        </div>
                        
                        <!-- å³ä¾§ï¼šæ‰¹é‡æ–°å¢é¡µé¢ -->
                        <div style="flex: 1; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); padding: 20px; height: 100%; overflow: hidden; display: flex; flex-direction: column; box-sizing: border-box;">
                            <h2 style="color: #87CEEB; margin: 0 0 15px 0; text-align: center; font-size: 1.1em;" data-i18n="batch-add-salon">æ‰¹é‡æ–°å¢æ²™é¾™</h2>
                            
                            <!-- æ‰¹é‡ä¸Šä¼ æ²™é¾™ -->
                            <div style="background: rgba(135, 206, 235, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); margin-bottom: 12px; flex-shrink: 0;">
                                <h3 style="color: #87CEEB; margin: 0 0 10px 0; font-size: 0.95em;" data-i18n="batch-upload-salon">æ‰¹é‡ä¸Šä¼ æ²™é¾™</h3>
                                
                                <div style="margin-bottom: 10px;">
                                    <label style="display: block; color: #87CEEB; margin-bottom: 6px; font-size: 0.85em;" data-i18n="select-file">é€‰æ‹©æ–‡ä»¶ï¼š</label>
                                    
                                    <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                                    <div id="fileUploadArea" style="border: 2px dashed #87CEEB; border-radius: 5px; padding: 8px; text-align: center; cursor: pointer; position: relative; background: rgba(0,0,0,0.3); min-height: 45px;" onclick="document.getElementById('salonFileInput').click()">
                                        <input type="file" id="salonFileInput" accept=".xlsx,.xls" style="display: none;" onchange="previewSalonFile(this)">
                                        <div id="fileUploadIconArea" style="display: flex; align-items: center; justify-content: center; gap: 8px; height: 45px;">
                                            <span style="font-size: 1.2em; color: #87CEEB;">ğŸ“</span>
                                            <span style="color: #87CEEB; font-size: 0.85em;" data-i18n="click-to-upload-file">ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶</span>
                                        </div>
                                        <!-- æ–‡ä»¶é¢„è§ˆåŒºåŸŸ -->
                                        <div id="filePreviewArea" style="display: none;">
                                            <p id="fileName" style="color: var(--text-light); font-size: 0.85em; margin: 4px 0;"></p>
                                            <button type="button" onclick="removeSalonFile(event)" style="background: var(--gold); color: var(--black); border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; font-size: 0.85em;" data-i18n="remove-file">ç§»é™¤æ–‡ä»¶</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap;">
                                    <button type="button" onclick="processSalonFile()" style="background: var(--gold); color: var(--black); border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; font-size: 0.85em;" data-i18n="process-file">å¤„ç†æ–‡ä»¶</button>
                                    <button type="button" onclick="downloadTemplate()" style="background: var(--gold); color: var(--black); border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; font-size: 0.85em;" data-i18n="download-template">ä¸‹è½½æ ·ä¾‹æ¨¡æ¿</button>
                                    <button type="button" id="confirmBatchCreateBtn" onclick="confirmBatchCreate()" style="display: none; background: var(--gold); color: var(--black); border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; font-size: 0.85em;" data-i18n="confirm-batch-create">ç¡®è®¤æ‰¹é‡åˆ›å»º</button>
                                    <button type="button" id="cancelBatchBtn" onclick="cancelBatch()" style="display: none; background: var(--gold); color: var(--black); border: none; padding: 6px 16px; border-radius: 5px; cursor: pointer; font-size: 0.85em;" data-i18n="cancel">å–æ¶ˆ</button>
                                </div>
                            </div>
                            
                            <!-- æ•°æ®é¢„è§ˆåŒºåŸŸ -->
                            <div id="dataPreviewArea" style="display: none; flex: 1; flex-direction: column; min-height: 0;">
                                <label style="display: block; color: #87CEEB; margin-bottom: 8px; font-size: 0.9em; flex-shrink: 0;" data-i18n="data-preview">æ•°æ®é¢„è§ˆï¼š</label>
                                <div style="display: flex; align-items: center; margin-bottom: 8px; flex-wrap: wrap; gap: 8px; flex-shrink: 0;">
                                    <input type="checkbox" id="selectAll" onchange="toggleSelectAll()" style="margin-right: 3px;">
                                    <label for="selectAll" style="color: var(--text-light); margin-right: 10px; font-size: 0.85em;" data-i18n="select-all">å…¨é€‰</label>
                                    <span style="color: var(--text-light); margin-right: 10px; font-size: 0.85em;" data-i18n="selected-count">å·²é€‰æ‹© 0 ä¸ªæ²™é¾™</span>
                                    <label for="responsibleEmployeeSelect" style="color: #87CEEB; margin-right: 5px; font-size: 0.85em;" data-i18n="assign-responsible">æŒ‡å®šè´Ÿè´£äººï¼š</label>
                                    <select id="responsibleEmployeeSelect" style="padding: 4px 6px; background: var(--dark-gray); border: 1px solid #87CEEB; color: var(--text-light); border-radius: 3px; margin-right: 8px; font-size: 0.8em;">
                                        <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜...</option>
                                    </select>
                                    <button type="button" onclick="assignResponsible()" style="background: var(--gold); color: var(--black); border: none; padding: 4px 12px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="assign-responsible-btn">åˆ†é…è´Ÿè´£äºº</button>
                                </div>
                                
                                <div id="dataPreviewTable" style="flex: 1; overflow-y: auto; border: 1px solid #87CEEB; border-radius: 5px; min-height: 0;">
                                    <!-- æ•°æ®é¢„è§ˆè¡¨æ ¼å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ²™é¾™ä¿¡æ¯é¡µé¢ -->
                <div id="salon-info" class="content-area">
                    <h1 style="margin-bottom: 15px;" data-i18n="salon-info">æ²™é¾™ä¿¡æ¯</h1>
                    
                    <!-- æœç´¢ç­›é€‰å’Œæ’åºæ§åˆ¶ -->
                    <div id="salon-count-display" style="margin: 10px 0; padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <!-- å·¦ä¾§ï¼šæœç´¢æ¡†å’Œç­›é€‰ -->
                            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                                <input type="text" id="salonSearchInput" data-i18n-placeholder="search-salon-placeholder" placeholder="æœç´¢æ²™é¾™å/é™¢é•¿å/æ‰‹æœºå·..." oninput="searchSalons()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; min-width: 200px; font-size: 0.9em;">
                                <select id="responsibleFilter" onchange="searchSalons()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; font-size: 0.9em;">
                                    <option value="" data-i18n="all-employees">æ‰€æœ‰èŒå‘˜</option>
                                </select>
                                                        <select id="districtFilter" onchange="searchSalons()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; font-size: 0.9em;">
                            <option value="" data-i18n="all-districts">å…¨éƒ¨åŒºåŸŸ</option>
                            <option value="yeongdeungpo" data-i18n="district-yeongdeungpo">æ°¸ç™»æµ¦åŒº</option>
                            <option value="guro" data-i18n="district-guro">ä¹è€åŒº</option>
                            <option value="geumcheon" data-i18n="district-geumcheon">è¡¿å·åŒº</option>
                            <option value="yangcheon" data-i18n="district-yangcheon">é˜³å·åŒº</option>
                            <option value="gangso" data-i18n="district-gangso">æ±Ÿè¥¿åŒº</option>
                            <option value="others" data-i18n="district-others">å…¶ä»–åœ°åŒº</option>
                            <option value="overseas" data-i18n="district-overseas">æµ·å¤–åŒºåŸŸ</option>
                        </select>
                                <button onclick="clearAllFilters()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="clear-filters">æ¸…ç©ºç­›é€‰</button>
                            </div>
                            
                            <!-- å³ä¾§ï¼šæ’åºæŒ‰é’® -->
                            <div style="display: flex; gap: 6px; flex-wrap: wrap;">
                                <button id="sort-name" onclick="toggleSalonSort('name')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-name">æ²™é¾™åç§°</button>
                                <button id="sort-address" onclick="toggleSalonSort('address')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-address">åœ°å€åç§°</button>
                                <button id="sort-addTime" onclick="toggleSalonSort('addTime')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-add-time">æ–°å¢æ—¶é—´</button>
                                <button id="sort-lastTransaction" onclick="toggleSalonSort('lastTransaction')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-last-transaction">æœ€åäº¤æ˜“</button>
                                <button id="sort-overdueDays" onclick="toggleSalonSort('overdueDays')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-overdue-days">æ¬ æ¬¾å¤©æ•°</button>
                                <button id="sort-overdueAmount" onclick="toggleSalonSort('overdueAmount')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-overdue-amount">æ¬ æ¬¾é‡‘é¢</button>
                                <button id="sort-default" onclick="toggleSalonSort('default')" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em; transition: all 0.3s;" data-i18n="sort-default">é»˜è®¤æ’åº</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                    <div style="margin: 10px 0; padding: 10px; background: rgba(135, 206, 235, 0.1); border-radius: 5px; border: 1px solid rgba(135, 206, 235, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; color: #87CEEB;">
                            <span id="salon-statistics">ç­›é€‰ç»“æœï¼šæ˜¾ç¤º 0 ä¸ªæ²™é¾™</span>
                            <div style="display: flex; gap: 15px; font-size: 0.9em;">
                                <span id="total-salons">æ€»æ²™é¾™æ•°ï¼š0</span>
                                <span id="filtered-salons">ç­›é€‰ç»“æœï¼š0</span>
                                <span id="current-page-salons">å½“å‰é¡µï¼š0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ†é¡µæ§åˆ¶é¢æ¿ -->
                    <div id="salon-pagination-controls" style="margin: 10px 0; padding: 10px; background: rgba(144, 238, 144, 0.1); border-radius: 5px; border: 1px solid rgba(144, 238, 144, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div style="display: flex; align-items: center; gap: 15px; color: #90EE90;">
                                <span style="font-weight: bold; font-size: 1em;" data-i18n="pagination-info">åˆ†é¡µä¿¡æ¯ï¼š</span>
                                <!-- è·³è½¬åˆ°æŒ‡å®šé¡µé¢ -->
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-size: 0.9em;" data-i18n="go-to-page">è·³è½¬åˆ°ç¬¬</span>
                                    <input type="number" id="page-jump-input" min="1" onkeypress="handlePageJumpKeypress(event)" style="width: 60px; padding: 6px 8px; background: var(--dark-gray); border: 1px solid #90EE90; color: #90EE90; border-radius: 3px; text-align: center; font-size: 0.9em;">
                                    <span style="font-size: 0.9em;" data-i18n="page-unit">é¡µ</span>
                                    <button onclick="jumpToPage()" style="background: #90EE90; color: var(--black); border: none; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="jump-btn">è·³è½¬</button>
                                </div>
                            </div>
                            <!-- åˆ†é¡µæ§ä»¶ -->
                            <div id="salon-pagination" style="display: flex; align-items: center; gap: 8px; color: #90EE90; font-size: 0.9em;">
                                <button id="first-page" onclick="goToSalonPage(1)" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="first-page">é¦–é¡µ</button>
                                <button id="prev-page" onclick="goToPrevSalonPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="prev-page">ä¸Šä¸€é¡µ</button>
                                <span id="page-info" style="background: var(--gold); color: var(--black); padding: 6px 16px; border-radius: 3px; font-weight: bold; font-size: 0.9em;">ç¬¬ 1 é¡µ / å…± 1 é¡µ (1 ä¸ªé¡¹ç›®)</span>
                                <button id="next-page" onclick="goToNextSalonPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="next-page">ä¸‹ä¸€é¡µ</button>
                                <button id="last-page" onclick="goToLastSalonPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="last-page">æœ«é¡µ</button>
                                <select id="items-per-page" onchange="changeItemsPerPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; font-size: 0.9em; margin-left: 10px;">
                                    <option value="10" data-i18n="items-per-page-10">æ¯é¡µæ˜¾ç¤º: 10</option>
                                    <option value="20" selected data-i18n="items-per-page-20">æ¯é¡µæ˜¾ç¤º: 20</option>
                                    <option value="50" data-i18n="items-per-page-50">æ¯é¡µæ˜¾ç¤º: 50</option>
                                </select>
                                <span style="font-size: 0.9em;" data-i18n="items-unit">æ¡</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å·¦å³åˆ†æ å¸ƒå±€ -->
                    <div style="display: flex; gap: 20px; height: calc(100vh - 500px); min-height: 400px;">
                        <!-- å·¦ä¾§æ²™é¾™åˆ—è¡¨ -->
                        <div id="salon-list-left" style="width: 40%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); display: flex; flex-direction: column; height: 100%;">
                            <div style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); flex-shrink: 0; height: 53px; box-sizing: border-box; display: flex; align-items: center; justify-content: space-between;">
                                <h3 style="color: var(--gold); margin: 0;" data-i18n="salon-list">æ²™é¾™åˆ—è¡¨</h3>
                                <span style="color: var(--gold); font-weight: bold; font-size: 0.9em;" id="salon-count-text" data-i18n="total-salons-count" data-i18n-params='{"count": "851"}'>æ€»è®¡ 851 å®¶æ²™é¾™</span>
                            </div>
                            <div id="salon-list-content" style="padding: 15px; flex: 1; overflow-y: auto; box-sizing: border-box;">
                                <!-- æ²™é¾™åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-salons">æš‚æ— æ²™é¾™æ•°æ®</p>
                            </div>
                        </div>
                        
                        <!-- å³ä¾§æ²™é¾™è¯¦æƒ… -->
                        <div id="salon-detail-right" style="width: 60%; background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); display: none; flex-direction: column; height: 100%;">
                            <div id="salon-detail-header" style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; height: 53px; box-sizing: border-box;">
                                <h3 style="color: var(--gold); margin: 0;" data-i18n="salon-detail">æ²™é¾™è¯¦æƒ…</h3>
                                <div id="salon-action-buttons" style="display: flex; gap: 10px;">
                                    <!-- æŒ‰é’®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                            <div id="salon-detail-content" style="padding: 20px; flex: 1; overflow-y: auto; line-height: 1.6; box-sizing: border-box;">
                                <!-- æ²™é¾™è¯¦æƒ…å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- åˆ é™¤æ²™é¾™é¡µé¢ -->
                <div id="delete-salon" class="content-area">
                    <h1 style="margin-bottom: 15px;" data-i18n="delete-salon">åˆ é™¤æ²™é¾™</h1>
                    
                    <!-- ç­›é€‰æ§åˆ¶åŒºåŸŸ -->
                    <div id="delete-salon-filters" style="margin: 10px 0; padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <!-- å·¦ä¾§ï¼šç­›é€‰æ¡ä»¶ -->
                            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                                <input type="text" id="deleteSalonSearchInput" data-i18n-placeholder="search-salon-placeholder" placeholder="æœç´¢æ²™é¾™å/é™¢é•¿å/æ‰‹æœºå·..." oninput="filterSalonsForDelete()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; min-width: 200px; font-size: 0.9em;">
                                <select id="deleteResponsibleFilter" onchange="filterSalonsForDelete()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; font-size: 0.9em;">
                                    <option value="" data-i18n="all-employees">æ‰€æœ‰èŒå‘˜</option>
                                </select>
                                <select id="deleteDistrictFilter" onchange="filterSalonsForDelete()" style="padding: 8px 12px; background: rgba(24,24,24,0.8); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; font-size: 0.9em;">
                                    <option value="" data-i18n="all-districts">å…¨éƒ¨åŒºåŸŸ</option>
                                                                <option value="yeongdeungpo" data-i18n="district-yeongdeungpo">æ°¸ç™»æµ¦åŒº</option>
                            <option value="guro" data-i18n="district-guro">ä¹è€åŒº</option>
                            <option value="geumcheon" data-i18n="district-geumcheon">è¡¿å·åŒº</option>
                            <option value="yangcheon" data-i18n="district-yangcheon">é˜³å·åŒº</option>
                            <option value="gangso" data-i18n="district-gangso">æ±Ÿè¥¿åŒº</option>
                            <option value="others" data-i18n="district-others">å…¶ä»–åœ°åŒº</option>
                            <option value="overseas" data-i18n="district-overseas">æµ·å¤–åŒºåŸŸ</option>
                                </select>
                                <button onclick="clearDeleteFilters()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="clear-filters">æ¸…ç©ºç­›é€‰</button>
                            </div>
                            
                            <!-- å³ä¾§ï¼šé€‰æ‹©å’Œåˆ é™¤æ“ä½œ -->
                            <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                                <button onclick="selectAllFilteredSalons()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="select-all">å…¨é€‰</button>
                                <button onclick="deselectAllSalonsForDelete()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="deselect-all">å–æ¶ˆå…¨é€‰</button>
                                <span id="delete-selected-count" style="color: var(--gold); font-weight: bold; font-size: 0.9em; margin: 0 10px;">å·²é€‰æ‹©ï¼š0 ä¸ªæ²™é¾™</span>
                                <button onclick="deleteSelectedSalonsAdvanced()" style="background: #ff4444; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="delete-selected">åˆ é™¤é€‰ä¸­é¡¹</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                    <div style="margin: 10px 0; padding: 10px; background: rgba(135, 206, 235, 0.1); border-radius: 5px; border: 1px solid rgba(135, 206, 235, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; color: #87CEEB;">
                            <span id="delete-salon-statistics">ç­›é€‰ç»“æœï¼šæ˜¾ç¤º 0 ä¸ªæ²™é¾™</span>
                            <div style="display: flex; gap: 15px; font-size: 0.9em;">
                                <span id="delete-total-salons">æ€»æ²™é¾™æ•°ï¼š0</span>
                                <span id="delete-filtered-salons">ç­›é€‰ç»“æœï¼š0</span>
                                <span id="delete-selected-salons">å·²é€‰æ‹©ï¼š0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ†é¡µæ§åˆ¶ -->
                    <div id="delete-salon-pagination-controls" style="margin: 10px 0; padding: 10px; background: rgba(144, 238, 144, 0.1); border-radius: 5px; border: 1px solid rgba(144, 238, 144, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div style="display: flex; align-items: center; gap: 15px; color: #90EE90;">
                                <span style="font-weight: bold; font-size: 1em;" data-i18n="pagination-info">åˆ†é¡µä¿¡æ¯ï¼š</span>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-size: 0.9em;" data-i18n="go-to-page">è·³è½¬åˆ°ç¬¬</span>
                                    <input type="number" id="delete-page-jump-input" min="1" onkeypress="handleDeletePageJumpKeypress(event)" style="width: 60px; padding: 6px 8px; background: var(--dark-gray); border: 1px solid #90EE90; color: #90EE90; border-radius: 3px; text-align: center; font-size: 0.9em;">
                                    <span style="font-size: 0.9em;" data-i18n="page-unit">é¡µ</span>
                                    <button onclick="jumpToDeletePage()" style="background: #90EE90; color: var(--black); border: none; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="jump-btn">è·³è½¬</button>
                                </div>
                            </div>
                            <div id="delete-salon-pagination" style="display: flex; align-items: center; gap: 8px; color: #90EE90; font-size: 0.9em;">
                                <button id="delete-first-page" onclick="goToDeletePage(1)" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="first-page">é¦–é¡µ</button>
                                <button id="delete-prev-page" onclick="goToPrevDeletePage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="prev-page">ä¸Šä¸€é¡µ</button>
                                <span id="delete-page-info" style="background: var(--gold); color: var(--black); padding: 6px 16px; border-radius: 3px; font-weight: bold; font-size: 0.9em;">ç¬¬ 1 é¡µ / å…± 1 é¡µ (0 ä¸ªé¡¹ç›®)</span>
                                <button id="delete-next-page" onclick="goToNextDeletePage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="next-page">ä¸‹ä¸€é¡µ</button>
                                <button id="delete-last-page" onclick="goToLastDeletePage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 0.9em;" data-i18n="last-page">æœ«é¡µ</button>
                                <select id="delete-items-per-page" onchange="changeDeleteItemsPerPage()" style="background: var(--dark-gray); color: #90EE90; border: 1px solid #90EE90; padding: 6px 12px; border-radius: 3px; font-size: 0.9em; margin-left: 10px;">
                                    <option value="10" data-i18n="items-per-page-10">æ¯é¡µæ˜¾ç¤º: 10</option>
                                    <option value="20" selected data-i18n="items-per-page-20">æ¯é¡µæ˜¾ç¤º: 20</option>
                                    <option value="50" data-i18n="items-per-page-50">æ¯é¡µæ˜¾ç¤º: 50</option>
                                </select>
                                <span style="font-size: 0.9em;" data-i18n="items-unit">æ¡</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ²™é¾™åˆ—è¡¨åŒºåŸŸ -->
                    <div style="background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); height: calc(100vh - 500px); min-height: 300px; display: flex; flex-direction: column;">
                        <div style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); flex-shrink: 0; height: 53px; box-sizing: border-box; display: flex; align-items: center;">
                            <h3 style="color: var(--gold); margin: 0;" data-i18n="salon-delete-list">æ²™é¾™åˆ é™¤åˆ—è¡¨</h3>
                        </div>
                        <div id="delete-salon-list-content" style="padding: 15px; flex: 1; overflow-y: auto; box-sizing: border-box;">
                            <!-- æ²™é¾™åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-salons-to-delete">æ²¡æœ‰å¯åˆ é™¤çš„æ²™é¾™</p>
                        </div>
                    </div>

                </div>
                
                <!-- åŒºåŸŸç®¡ç†é¡µé¢ -->
                <div id="district-management" class="content-area">
                    <h1 style="margin-bottom: 15px;" data-i18n="district-management">åŒºåŸŸç®¡ç†</h1>
                    
                    <!-- åŒºåŸŸç®¡ç†åŠŸèƒ½åŒº -->
                    <div style="margin: 10px 0; padding: 15px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <h3 style="color: var(--gold); margin: 0;" data-i18n="district-operations">åŒºåŸŸæ“ä½œ</h3>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button onclick="showAddDistrictDialog()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="add-district">æ·»åŠ åŒºåŸŸ</button>
                                <button onclick="resetToDefaultDistricts()" style="background: #ff6b6b; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="reset-to-default">é‡ç½®ä¸ºé»˜è®¤</button>
                                <button onclick="exportDistrictConfig()" style="background: #4dabf7; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="export-config">å¯¼å‡ºé…ç½®</button>
                                <button onclick="importDistrictConfig()" style="background: #51cf66; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="import-config">å¯¼å…¥é…ç½®</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åŒºåŸŸåˆ—è¡¨ -->
                    <div style="background: rgba(24,24,24,0.5); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); height: calc(100vh - 320px); min-height: 400px; display: flex; flex-direction: column;">
                        <div style="padding: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); flex-shrink: 0; display: flex; align-items: center; justify-content: space-between;">
                            <h3 style="color: var(--gold); margin: 0;" data-i18n="district-list">åŒºåŸŸåˆ—è¡¨</h3>
                            <span id="district-count" style="color: var(--gold); font-size: 0.9em;" data-i18n="total-districts">å…± 0 ä¸ªåŒºåŸŸ</span>
                        </div>
                        <div id="district-list-content" style="padding: 15px; flex: 1; overflow-y: auto; box-sizing: border-box;">
                            <!-- åŒºåŸŸåˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
                
                <!-- æ·»åŠ /ç¼–è¾‘åŒºåŸŸå¯¹è¯æ¡† -->
                <div id="district-dialog" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
                    <div style="background: var(--dark-gray); border: 2px solid var(--gold); border-radius: 10px; padding: 30px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto;">
                        <h2 id="district-dialog-title" style="color: var(--gold); margin: 0 0 20px 0; text-align: center;" data-i18n="add-district">æ·»åŠ åŒºåŸŸ</h2>
                        
                        <form id="district-form" onsubmit="saveDistrict(event)">
                            <!-- åŒºåŸŸä»£ç  -->
                            <div style="margin-bottom: 15px;">
                                <label for="districtCode" style="display: block; color: var(--gold); margin-bottom: 5px; font-size: 0.9em;" data-i18n="district-code">åŒºåŸŸä»£ç ï¼š</label>
                                <input type="text" id="districtCode" required maxlength="20" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                <small style="color: #aaa; font-size: 0.8em;" data-i18n="district-code-hint">è‹±æ–‡ä»£ç ï¼Œå¦‚: gangnam, seoul-center</small>
                            </div>
                            
                            <!-- ä¸­æ–‡åç§° -->
                            <div style="margin-bottom: 15px;">
                                <label for="districtNameCn" style="display: block; color: var(--gold); margin-bottom: 5px; font-size: 0.9em;" data-i18n="district-name-cn">ä¸­æ–‡åç§°ï¼š</label>
                                <input type="text" id="districtNameCn" required maxlength="50" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            
                            <!-- éŸ©æ–‡åç§° -->
                            <div style="margin-bottom: 15px;">
                                <label for="districtNameKr" style="display: block; color: var(--gold); margin-bottom: 5px; font-size: 0.9em;" data-i18n="district-name-kr">éŸ©æ–‡åç§°ï¼š</label>
                                <input type="text" id="districtNameKr" required maxlength="50" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            
                            <!-- åœ°å€è¯†åˆ«å…³é”®è¯ -->
                            <div style="margin-bottom: 20px;">
                                <label for="districtKeywords" style="display: block; color: var(--gold); margin-bottom: 5px; font-size: 0.9em;" data-i18n="district-keywords">åœ°å€è¯†åˆ«å…³é”®è¯ï¼š</label>
                                <textarea id="districtKeywords" rows="3" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; font-family: inherit; resize: vertical;"></textarea>
                                <small style="color: #aaa; font-size: 0.8em;" data-i18n="district-keywords-hint">ç”¨é€—å·åˆ†éš”ï¼Œå¦‚: ê°•ë‚¨êµ¬,æ±Ÿå—åŒº,gangnam</small>
                            </div>
                            
                            <div style="display: flex; gap: 10px; justify-content: center;">
                                <button type="button" onclick="closeDistrictDialog()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" data-i18n="cancel">å–æ¶ˆ</button>
                                <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" data-i18n="save">ä¿å­˜</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- ä¸šç»©ç›®æ ‡é¡µé¢ -->
                <div id="performance-target" class="content-area">
                    <h1 data-i18n="performance-target">ä¸šç»©ç›®æ ‡</h1>
                    
                    <!-- å½“å‰æœˆä»½é€‰æ‹© -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <label style="color: var(--gold); font-weight: bold;" data-i18n="select-month">é€‰æ‹©æœˆä»½ï¼š</label>
                            <select id="performance-month" onchange="displayPerformanceTargets()" style="padding: 8px 12px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                <option value="1">1æœˆ</option>
                                <option value="2">2æœˆ</option>
                                <option value="3">3æœˆ</option>
                                <option value="4">4æœˆ</option>
                                <option value="5">5æœˆ</option>
                                <option value="6">6æœˆ</option>
                                <option value="7">7æœˆ</option>
                                <option value="8">8æœˆ</option>
                                <option value="9">9æœˆ</option>
                                <option value="10">10æœˆ</option>
                                <option value="11">11æœˆ</option>
                                <option value="12">12æœˆ</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="recalculatePerformanceTargets()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="recalculate-targets">é‡æ–°è®¡ç®—ç›®æ ‡</button>
                            <button onclick="resetPerformanceTargets()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="reset-targets">é‡ç½®ç›®æ ‡</button>
                        </div>
                    </div>
                    
                    <!-- å›¢é˜Ÿæ€»ç›®æ ‡ -->
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); margin-bottom: 30px;">
                        <h2 style="color: var(--gold); margin: 0 0 20px 0; text-align: center;" data-i18n="team-target">ä»£ç†åº—è¥ä¸šé¢ç›®æ ‡</h2>
                        <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 20px; align-items: center;">
                            <div style="text-align: center;">
                                <div style="color: #cccccc; font-size: 0.9em; margin-bottom: 5px;" data-i18n="target-label">ç›®æ ‡</div>
                                <div id="team-target-amount" style="font-size: 1.8em; color: var(--gold); font-weight: bold;">0</div>
                                <div style="color: #aaa; font-size: 0.8em;" data-i18n="thousand-won">åƒéŸ©å…ƒ</div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="color: #cccccc;" data-i18n="actual-label">å®é™…</span>
                                    <span id="team-progress-text" style="color: var(--gold); font-weight: bold;">0%</span>
                                </div>
                                <div style="background: rgba(0,0,0,0.3); height: 20px; border-radius: 10px; overflow: hidden;">
                                    <div id="team-progress-bar" style="height: 100%; background: linear-gradient(90deg, #4CAF50, #8BC34A); width: 0%; transition: width 0.3s ease;"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.8em; color: #aaa;">
                                    <span>0</span>
                                    <span id="team-target-display">0</span>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #cccccc; font-size: 0.9em; margin-bottom: 5px;" data-i18n="actual-label">å®é™…</div>
                                <div id="team-actual-amount" style="font-size: 1.8em; color: #4CAF50; font-weight: bold;">0</div>
                                <div style="color: #aaa; font-size: 0.8em;" data-i18n="thousand-won">åƒéŸ©å…ƒ</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸ªäººä¸šç»©ç›®æ ‡åˆ—è¡¨ -->
                    <div id="performance-list" style="margin-top: 20px; max-height: calc(100vh - 320px); overflow-y: auto; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 5px; padding: 15px; background: rgba(24,24,24,0.3);">
                        <!-- ä¸ªäººä¸šç»©ç›®æ ‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-performance-data">æš‚æ— ä¸šç»©æ•°æ®</p>
                    </div>
                </div>
                
                <!-- æ“ä½œå†å²è®°å½•é¡µé¢ -->
                <div id="operation-history" class="content-area">
                    <h1 data-i18n="operation-history">æ“ä½œå†å²è®°å½•</h1>
                    
                    <!-- ç­›é€‰æ§ä»¶ -->
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 5px; margin-bottom: 20px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <!-- ç¬¬ä¸€è¡Œï¼š3ä¸ªä¸‹æ‹‰ç­›é€‰ -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-user">æŒ‰ç”¨æˆ·ç­›é€‰ï¼š</label>
                                <select id="history-user-filter" onchange="filterOperationHistory()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-users">å…¨éƒ¨ç”¨æˆ·</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-operation">æŒ‰æ“ä½œç±»å‹ï¼š</label>
                                <select id="history-operation-filter" onchange="filterOperationHistory()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-operations">å…¨éƒ¨æ“ä½œ</option>
                                    <option value="create" data-i18n="operation-create">åˆ›å»º</option>
                                    <option value="edit" data-i18n="operation-edit">ç¼–è¾‘</option>
                                    <option value="delete" data-i18n="operation-delete">åˆ é™¤</option>
                                    <option value="login" data-i18n="operation-login">ç™»å½•</option>
                                    <option value="logout" data-i18n="operation-logout">ç™»å‡º</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-object">æŒ‰å¯¹è±¡ç±»å‹ï¼š</label>
                                <select id="history-object-filter" onchange="filterOperationHistory()" style="width: 100%; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-objects">å…¨éƒ¨å¯¹è±¡</option>
                                    <option value="salon" data-i18n="object-salon">æ²™é¾™</option>
                                    <option value="transaction" data-i18n="object-transaction">äº¤æ˜“</option>
                                    <option value="employee" data-i18n="object-employee">èŒå‘˜</option>
                                </select>
                            </div>
                        </div>
                        <!-- ç¬¬äºŒè¡Œï¼šæ—¥æœŸç­›é€‰å’Œæ¸…ç©ºæŒ‰é’® -->
                        <div style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 300px;">
                                <label style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="filter-by-date">æŒ‰æ—¥æœŸç­›é€‰ï¼š</label>
                                <div style="display: flex; gap: 8px;">
                                    <input type="date" id="history-start-date" lang="zh-CN" onchange="filterOperationHistory()" style="flex: 1; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                    <span style="color: var(--gold); align-self: center; white-space: nowrap;" data-i18n="to">è‡³</span>
                                    <input type="date" id="history-end-date" lang="zh-CN" onchange="filterOperationHistory()" style="flex: 1; padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                </div>
                            </div>
                            <div style="flex-shrink: 0;">
                                <button onclick="clearHistoryFilters()" style="min-width: 120px; background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; white-space: nowrap; font-size: 0.9em;" data-i18n="clear-all-filters">æ¸…ç©ºç­›é€‰</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="operation-history-list" style="margin-top: 20px; max-height: calc(100vh - 320px); overflow-y: auto; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 5px; padding: 15px; background: rgba(24,24,24,0.3);">
                        <!-- æ“ä½œå†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-operation-history">æš‚æ— æ“ä½œå†å²è®°å½•</p>
                    </div>
                </div>
                
                <!-- æ•°æ®å¯¹æ¯”æŸ¥çœ‹é¡µé¢ -->
                <div id="data-comparison" class="content-area">
                    <h1 data-i18n="data-comparison">æ•°æ®å¯¹æ¯”æŸ¥çœ‹</h1>
                    <div id="comparison-content" style="margin-top: 20px; max-height: calc(100vh - 320px); overflow-y: auto; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 5px; padding: 15px; background: rgba(24,24,24,0.3);">
                        <p style="color: #cccccc; text-align: center; padding: 40px;" data-i18n="select-history-record">è¯·ä»æ“ä½œå†å²è®°å½•ä¸­é€‰æ‹©è¦å¯¹æ¯”çš„è®°å½•</p>
                    </div>
                </div>
                
                <!-- å®¡è®¡æŠ¥å‘Šé¡µé¢ -->
                <div id="audit-report" class="content-area">
                    <h1 data-i18n="audit-report">å®¡è®¡æŠ¥å‘Š</h1>
                    
                    <!-- æŠ¥å‘Šç»Ÿè®¡ -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3); text-align: center;">
                            <h3 style="color: var(--gold); margin: 0 0 10px 0;" data-i18n="total-operations">æ€»æ“ä½œæ•°</h3>
                            <div id="total-operations-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                        <div style="background: rgba(144, 238, 144, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(144, 238, 144, 0.3); text-align: center;">
                            <h3 style="color: #90EE90; margin: 0 0 10px 0;" data-i18n="today-operations">ä»Šæ—¥æ“ä½œ</h3>
                            <div id="today-operations-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                        <div style="background: rgba(135, 206, 235, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(135, 206, 235, 0.3); text-align: center;">
                            <h3 style="color: #87CEEB; margin: 0 0 10px 0;" data-i18n="active-users">æ´»è·ƒç”¨æˆ·</h3>
                            <div id="active-users-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                        <div style="background: rgba(255, 182, 193, 0.1); padding: 20px; border-radius: 8px; border: 1px solid rgba(255, 182, 193, 0.3); text-align: center;">
                            <h3 style="color: #FFB6C1; margin: 0 0 10px 0;" data-i18n="critical-operations">é‡è¦æ“ä½œ</h3>
                            <div id="critical-operations-count" style="font-size: 2em; color: var(--text-light); font-weight: bold;">0</div>
                        </div>
                    </div>
                    
                    <div id="audit-report-content" style="margin-top: 20px; max-height: calc(100vh - 320px); overflow-y: auto; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 5px; padding: 15px; background: rgba(24,24,24,0.3);">
                        <!-- å®¡è®¡æŠ¥å‘Šå†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-audit-data">æš‚æ— å®¡è®¡æ•°æ®</p>
                    </div>
                </div>
                
                <!-- å®¡æ‰¹ç®¡ç†é¡µé¢ -->
                <div id="approval-management" class="content-area">
                    <h1 data-i18n="approval-management">å®¡æ‰¹ç®¡ç†</h1>
                    
                    <div class="approval-controls" style="margin-bottom: 20px; padding: 20px; background: rgba(212, 175, 55, 0.1); border-radius: 8px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; gap: 20px; align-items: center;">
                            <div>
                                <label for="approvalStatusFilter" style="color: var(--gold); margin-right: 10px;" data-i18n="status">çŠ¶æ€ï¼š</label>
                                <select id="approvalStatusFilter" onchange="displayApprovalList()" style="padding: 8px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                                    <option value="" data-i18n="all-status">å…¨éƒ¨çŠ¶æ€</option>
                                    <option value="pending" data-i18n="pending">å¾…å®¡æ‰¹</option>
                                    <option value="approved" data-i18n="approved">å·²æ‰¹å‡†</option>
                                    <option value="rejected" data-i18n="rejected">å·²æ‹’ç»</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="approval-list" id="approvalList" style="max-height: calc(100vh - 320px); overflow-y: auto; border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 5px; padding: 15px; background: rgba(24,24,24,0.3);">
                        <!-- å®¡æ‰¹åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        <p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-pending-approvals">æš‚æ— å¾…å®¡æ‰¹é¡¹ç›®</p>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                Â© 2025 Mesia Professional. All rights reserved.
            </div>
        </div>
    </div>

    <!-- ä¿ç•™æ‰€æœ‰æ¨¡æ€æ¡† -->
    
    <!-- åˆ›å»ºäº§å“åˆ†ç±»æ¨¡æ€æ¡† -->
    <div id="createCategoryModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: var(--dark-gray); padding: 30px; border-radius: 10px; border: 1px solid var(--gold); width: 500px; max-width: 95vw; max-height: 95vh; overflow-y: auto;">
            <h2 style="color: var(--gold); margin-top: 0;" data-i18n="create-product-category">åˆ›å»ºäº§å“åˆ†ç±»</h2>
            <form id="createCategoryForm">
                <div style="margin-bottom: 20px;">
                    <label for="categoryNameCN" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-cn">åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="categoryNameCN" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="categoryNameKO" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-ko">åˆ†ç±»åç§°ï¼ˆéŸ©æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="categoryNameKO" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label for="categoryDescription" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-description">åˆ†ç±»æè¿°ï¼š</label>
                    <textarea id="categoryDescription" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; min-height: 80px; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeCreateCategoryModal()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="cancel">å–æ¶ˆ</button>
                    <button type="button" onclick="submitCreateCategory()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="create">åˆ›å»º</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- ç¼–è¾‘äº§å“åˆ†ç±»æ¨¡æ€æ¡† -->
    <div id="editCategoryModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: var(--dark-gray); padding: 30px; border-radius: 10px; border: 1px solid var(--gold); width: 500px; max-width: 95vw; max-height: 95vh; overflow-y: auto;">
            <h2 style="color: var(--gold); margin-top: 0;" data-i18n="edit-product-category">ç¼–è¾‘äº§å“åˆ†ç±»</h2>
            <form id="editCategoryForm">
                <input type="hidden" id="editCategoryId">
                <div style="margin-bottom: 20px;">
                    <label for="editCategoryNameCN" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-cn">åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="editCategoryNameCN" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="editCategoryNameKO" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-name-ko">åˆ†ç±»åç§°ï¼ˆéŸ©æ–‡ï¼‰ï¼š</label>
                    <input type="text" id="editCategoryNameKO" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label for="editCategoryDescription" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="category-description">åˆ†ç±»æè¿°ï¼š</label>
                    <textarea id="editCategoryDescription" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box; min-height: 80px; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeEditCategoryModal()" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="cancel">å–æ¶ˆ</button>
                    <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="save">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // æ²™é¾™æ’åºç›¸å…³å˜é‡
        let currentSortField = 'default';
        let currentSortOrder = 'asc';
        let currentSalonsData = [];
        let currentFilter = null;
        let currentPage = 1;
        let itemsPerPage = 20;
        
        // åˆ‡æ¢æ²™é¾™æ’åº
        function toggleSalonSort(field) {
            if (currentSortField === field) {
                // å¦‚æœæ˜¯åŒä¸€ä¸ªå­—æ®µï¼Œåˆ‡æ¢æ’åºæ–¹å‘
                currentSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';
            } else {
                // å¦‚æœæ˜¯ä¸åŒå­—æ®µï¼Œè®¾ç½®ä¸ºå‡åº
                currentSortField = field;
                currentSortOrder = 'asc';
            }
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            updateSortButtons();
            
            // æ ¹æ®å½“å‰çŠ¶æ€é‡æ–°æ˜¾ç¤ºåˆ—è¡¨
            if (currentFilter === 'filtered') {
                // å¦‚æœå½“å‰æ˜¯ç­›é€‰çŠ¶æ€ï¼Œé‡æ–°æ‰§è¡Œæœç´¢ä»¥åº”ç”¨æ’åº
                searchSalons();
            } else {
                // å¦åˆ™æ˜¾ç¤ºæ­£å¸¸åˆ—è¡¨
                displaySalonList(currentFilter, 1);
            }
        }
        
        // æ›´æ–°æ’åºæŒ‰é’®æ ·å¼
        function updateSortButtons() {
            const buttons = document.querySelectorAll('[id^="sort-"]');
            buttons.forEach(button => {
                const field = button.id.replace('sort-', '');
                const i18nKey = button.getAttribute('data-i18n');
                let buttonText = getText(i18nKey);
                
                // ä½¿ç”¨ç»Ÿä¸€çš„æŒ‰é’®æ ·å¼ï¼Œä¸æ·»åŠ ç®­å¤´
                if (field === currentSortField) {
                    button.style.background = 'var(--gold)';
                    button.style.opacity = '1';
                    } else {
                    button.style.background = 'var(--gold)';
                    button.style.opacity = '0.7';
                }
                
                // ç›´æ¥è®¾ç½®æ–‡æœ¬å†…å®¹ï¼Œä¸æ·»åŠ ä»»ä½•ç®­å¤´
                button.textContent = buttonText;
            });
        }
        
        // æ›´æ–°æ’åºæŒ‰é’®æ‚¬åœæ ·å¼
        function updateSortButtonStyle(button) {
            const field = button.id.replace('sort-', '');
            if (field !== currentSortField) {
                button.style.background = 'rgba(135, 206, 235, 0.2)';
            }
        }
        
        // åˆ†é¡µç›¸å…³å‡½æ•°
        function updatePaginationInfo(currentPage, totalPages, totalItems) {
            const pageInfo = document.getElementById('page-info');
            const firstPageBtn = document.getElementById('first-page');
            const prevPageBtn = document.getElementById('prev-page');
            const nextPageBtn = document.getElementById('next-page');
            const lastPageBtn = document.getElementById('last-page');
            const jumpInput = document.getElementById('page-jump-input');
            
            if (pageInfo) {
                const currentLanguage = localStorage.getItem('language') || 'zh';
                if (currentLanguage === 'ko') {
                    pageInfo.textContent = `${currentPage} í˜ì´ì§€ / ì´ ${totalPages} í˜ì´ì§€ (${totalItems} ê°œ í•­ëª©)`;
                } else {
                    pageInfo.textContent = `ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ (${totalItems} ä¸ªé¡¹ç›®)`;
                }
            }
            
            // æ›´æ–°è·³è½¬è¾“å…¥æ¡†çš„æœ€å¤§å€¼
            if (jumpInput) {
                jumpInput.max = totalPages;
                jumpInput.placeholder = totalPages > 0 ? `1-${totalPages}` : '1';
            }
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            if (firstPageBtn) firstPageBtn.disabled = currentPage === 1;
            if (prevPageBtn) prevPageBtn.disabled = currentPage === 1;
            if (nextPageBtn) nextPageBtn.disabled = currentPage === totalPages;
            if (lastPageBtn) lastPageBtn.disabled = currentPage === totalPages;
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            const disabledStyle = 'opacity: 0.5; cursor: not-allowed;';
            const normalStyle = 'opacity: 1; cursor: pointer;';
            
            if (firstPageBtn) firstPageBtn.style.cssText += currentPage === 1 ? disabledStyle : normalStyle;
            if (prevPageBtn) prevPageBtn.style.cssText += currentPage === 1 ? disabledStyle : normalStyle;
            if (nextPageBtn) nextPageBtn.style.cssText += currentPage === totalPages ? disabledStyle : normalStyle;
            if (lastPageBtn) lastPageBtn.style.cssText += currentPage === totalPages ? disabledStyle : normalStyle;
        }
        
        function goToSalonPage(page) {
            displaySalonList(currentFilter, page);
        }
        
        function goToPrevSalonPage() {
            if (currentPage > 1) {
                displaySalonList(currentFilter, currentPage - 1);
            }
        }
        
        function goToNextSalonPage() {
            const totalPages = Math.ceil(currentSalonsData.length / itemsPerPage);
            if (currentPage < totalPages) {
                displaySalonList(currentFilter, currentPage + 1);
            }
        }
        
        function goToLastSalonPage() {
            const totalPages = Math.ceil(currentSalonsData.length / itemsPerPage);
            displaySalonList(currentFilter, totalPages);
        }
        
        function changeItemsPerPage() {
            const select = document.getElementById('items-per-page');
            itemsPerPage = parseInt(select.value);
            displaySalonList(currentFilter, 1); // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
        }
        
        function jumpToPage() {
            const input = document.getElementById('page-jump-input');
            const pageNumber = parseInt(input.value);
            
            if (!pageNumber || pageNumber < 1) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¡µç ');
                return;
            }
            
            const totalPages = Math.ceil(currentSalonsData.length / itemsPerPage);
            
            if (pageNumber > totalPages) {
                alert(`é¡µç ä¸èƒ½è¶…è¿‡æ€»é¡µæ•° ${totalPages}`);
                return;
            }
            
            displaySalonList(currentFilter, pageNumber);
            input.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
        }
        
        function handlePageJumpKeypress(event) {
            if (event.key === 'Enter') {
                jumpToPage();
            }
        }
        
        // æ·»åŠ ä¾§è¾¹æ èœå•å¤„ç†é€»è¾‘
        function toggleSidebarSubmenu(menuType) {
            // å…ˆæ‰¾åˆ°å¯¹åº”çš„å­èœå•å…ƒç´ 
            const targetSubmenu = document.getElementById(`sidebar-${menuType}-submenu`);
            const menuItem = targetSubmenu.parentNode;
            
            if (targetSubmenu) {
                // å¦‚æœå­èœå•å·²ç»å±•å¼€ï¼Œåˆ™æ”¶èµ·å®ƒ
                if (targetSubmenu.classList.contains('active')) {
                    targetSubmenu.classList.remove('active');
                    menuItem.classList.remove('active');
                } else {
                    // å…ˆå…³é—­æ‰€æœ‰å…¶ä»–å±•å¼€çš„å­èœå•
                    document.querySelectorAll('.sidebar-submenu').forEach(submenu => {
                        submenu.classList.remove('active');
                        submenu.parentNode.classList.remove('active');
                    });
                    
                    // å±•å¼€å½“å‰å­èœå•
                    targetSubmenu.classList.add('active');
                    menuItem.classList.add('active');
                }
            }
        }
        
        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        function toggleMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('active');
            
            // åŒæ—¶åˆ‡æ¢æ±‰å ¡èœå•å›¾æ ‡
            const hamburgerLines = document.querySelectorAll('.hamburger-line');
            hamburgerLines[0].style.transform = sidebar.classList.contains('active') ? 'rotate(45deg) translate(5px, 5px)' : '';
            hamburgerLines[1].style.opacity = sidebar.classList.contains('active') ? '0' : '1';
            hamburgerLines[2].style.transform = sidebar.classList.contains('active') ? 'rotate(-45deg) translate(5px, -5px)' : '';
        }
        
        // ä¿®æ”¹å†…å®¹æ˜¾ç¤ºå‡½æ•°ï¼Œä¸å†éœ€è¦éšè—ä¸»èœå•ï¼Œç›´æ¥æ˜¾ç¤ºå†…å®¹
        function showContent(contentId, event) {
            if (event) {
                event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
            }
            
            // æƒé™æ£€æŸ¥ï¼šåˆ é™¤åŠŸèƒ½åªæœ‰ç®¡ç†å‘˜å¯ä»¥è®¿é—®
            if (contentId === 'delete-salon' || contentId === 'delete-employee') {
                if (!hasPermission('admin')) {
                    alert(contentId === 'delete-salon' ? getText('no-permission-delete-salon') : getText('no-permission-delete-employee'));
                    return;
                }
            }
            
            // å–æ¶ˆæ‰€æœ‰å­èœå•é¡¹çš„é«˜äº®
            document.querySelectorAll('.sidebar-submenu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // é«˜äº®è¢«ç‚¹å‡»çš„å­èœå•é¡¹
            if (event) {
                event.currentTarget.classList.add('active');
            }
            
            // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
            const allContent = document.querySelectorAll('.content-area');
            allContent.forEach(content => {
                content.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰æ‹©çš„å†…å®¹åŒºåŸŸ
            const targetContent = document.getElementById(contentId);
            if (targetContent) {
                targetContent.classList.add('active');
                
                // åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œæ˜¾ç¤ºå†…å®¹åè‡ªåŠ¨å…³é—­ä¾§è¾¹æ 
                if (window.innerWidth <= 900) {
                    document.querySelector('.sidebar').classList.remove('active');
                }
                
                // å¦‚æœæ˜¯æ²™é¾™ä¿¡æ¯é¡µé¢ï¼Œåˆ·æ–°åˆ—è¡¨å’Œç­›é€‰é€‰é¡¹
                if (contentId === 'salon-info') {
                    // é‡ç½®æ’åºçŠ¶æ€ä¸ºé»˜è®¤
                    currentSortField = 'default';
                    currentSortOrder = '';
                    updateResponsibleFilterOptions();
                    displaySalonList(null, 1); // åˆå§‹åŒ–æ—¶æ˜¾ç¤ºç¬¬ä¸€é¡µ
                    
                    // ç¡®ä¿æ²™é¾™æ•°é‡æ­£ç¡®æ˜¾ç¤º
                    setTimeout(() => {
                        const salons = getSalons();
                        const salonCountText = document.getElementById('salon-count-text');
                        if (salonCountText) {
                            salonCountText.textContent = getText('total-salons-count').replace('{count}', salons.length);
                        }
                    }, 100);
                }
                
                // å¦‚æœæ˜¯æ–°å¢æ²™é¾™é¡µé¢ï¼Œæ›´æ–°è´Ÿè´£èŒå‘˜é€‰é¡¹
                if (contentId === 'new-salon') {
                    updateResponsibleEmployeeOptions();
                    checkBatchUploadPermission();
                }
                
                // å¦‚æœæ˜¯åˆ é™¤æ²™é¾™é¡µé¢ï¼Œåˆå§‹åŒ–é¡µé¢
                if (contentId === 'delete-salon') {
                    initDeleteSalonPage();
                }
                
                // å¦‚æœæ˜¯åŒºåŸŸç®¡ç†é¡µé¢ï¼Œåˆå§‹åŒ–é¡µé¢
                if (contentId === 'district-management') {
                    initDistrictManagementPage();
                }
                
                // å¦‚æœæ˜¯èŒå‘˜åˆ—è¡¨é¡µé¢ï¼Œåˆ·æ–°åˆ—è¡¨
                if (contentId === 'employee-list') {
                    displayEmployeeList();
                }
                
                // å¦‚æœæ˜¯æ–°å¢èŒå‘˜é¡µé¢ï¼Œæ ¹æ®æƒé™è®¾ç½®èŒä½é€‰é¡¹
                if (contentId === 'new-employee') {
                    const positionSelect = document.getElementById('employeePosition');
                    if (currentUser && currentUser.position === 'manager') {
                        // ç»ç†åªèƒ½åˆ›å»ºä¸šåŠ¡å‘˜
                        positionSelect.innerHTML = `<option value="salesperson" data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>`;
                    } else {
                        // ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºæ‰€æœ‰çº§åˆ«
                        positionSelect.innerHTML = `
                            <option value="salesperson" data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>
                            <option value="manager" data-i18n="manager">ç»ç†</option>
                            <option value="admin" data-i18n="admin">ç®¡ç†å‘˜</option>
                        `;
                    }
                    updateTexts(); // æ›´æ–°ç¿»è¯‘
                }
                
                // å¦‚æœæ˜¯åˆ é™¤èŒå‘˜é¡µé¢ï¼Œæ›´æ–°é€‰é¡¹
                if (contentId === 'delete-employee') {
                    updateDeleteEmployeeOptions();
                }
                
                // å¦‚æœæ˜¯æ“ä½œå†å²é¡µé¢ï¼ŒåŠ è½½å†å²è®°å½•
                if (contentId === 'operation-history') {
                    displayOperationHistory();
                }
                
                // å¦‚æœæ˜¯å®¡è®¡æŠ¥å‘Šé¡µé¢ï¼Œç”ŸæˆæŠ¥å‘Š
                if (contentId === 'audit-report') {
                    displayAuditReport();
                }
                
                // å¦‚æœæ˜¯å®¡æ‰¹ç®¡ç†é¡µé¢ï¼Œæ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨
                if (contentId === 'approval-management') {
                    displayApprovalList();
                }
                
                // å¦‚æœæ˜¯äº§å“åˆ†ç±»é¡µé¢ï¼Œæ˜¾ç¤ºäº§å“åˆ†ç±»åˆ—è¡¨
                if (contentId === 'product-category') {
                    displayProductCategories();
                }
                
                // å¦‚æœæ˜¯æ·»åŠ äº§å“é¡µé¢ï¼ŒåŠ è½½äº§å“åˆ†ç±»é€‰é¡¹
                if (contentId === 'add-product') {
                    loadProductCategories();
                }
                
                // å¦‚æœæ˜¯äº§å“åˆ—è¡¨é¡µé¢ï¼Œæ˜¾ç¤ºäº§å“åˆ—è¡¨
                if (contentId === 'product-list') {
                    displayProductList();
                }
                
                // å¦‚æœæ˜¯ä¸šç»©ç›®æ ‡é¡µé¢ï¼Œæ˜¾ç¤ºä¸šç»©ç›®æ ‡
                if (contentId === 'performance-target') {
                    displayPerformanceTargets();
                }
                
                // å¦‚æœæ˜¯æ€»è§ˆé¡µé¢ï¼Œæ›´æ–°ç»Ÿè®¡æ•°æ®
                if (contentId === 'dashboard') {
                    updateDashboardStats();
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–ç³»ç»Ÿ
        window.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–ç³»ç»Ÿ
            initializeSystem();
            
            // æ·»åŠ äº§å“è¡¨å•æäº¤äº‹ä»¶ç›‘å¬å™¨
            const addProductForm = document.getElementById('addProductForm');
            if (addProductForm) {
                addProductForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        id: Date.now(),
                        name: document.getElementById('productName').value,
                        brandName: document.getElementById('brandName').value,
                        model: document.getElementById('productModel').value,
                        sku: document.getElementById('productSku').value,
                        category: document.getElementById('productCategory').value || 'uncategorized',
                        unitType: document.getElementById('unitType').value,
                        weightVolume: parseFloat(document.getElementById('weightVolume').value) || 0,
                        weightUnit: document.getElementById('weightUnit').value,
                        perBoxCount: parseInt(document.getElementById('perBoxCount').value) || 1,
                        perCaseCount: parseInt(document.getElementById('perCaseCount').value) || 1,
                        purchasePrice: document.getElementById('purchasePrice').value.replace(/[^\d]/g, ''),
                        wholesalePrice: document.getElementById('wholesalePrice').value.replace(/[^\d]/g, ''),
                        retailPrice: document.getElementById('retailPrice').value.replace(/[^\d]/g, ''),
                        isOnSale: document.getElementById('isOnSale').checked,
                        isDiscontinued: document.getElementById('isDiscontinued').checked,
                        notes: document.getElementById('productNotes').value,
                        createdAt: new Date().toISOString(),
                        createdBy: currentUser ? currentUser.id : null
                    };
                    
                    // éªŒè¯å¿…å¡«å­—æ®µ
                    if (!formData.name) {
                        alert('è¯·è¾“å…¥äº§å“åç§°');
                        return;
                    }
                    
                    // æ·»åŠ äº§å“
                    productsData.push(formData);
                    saveProducts();
                    
                    alert('äº§å“æ·»åŠ æˆåŠŸï¼');
                    resetProductForm();
                    
                    // è®°å½•æ“ä½œæ—¥å¿—
                    if (typeof addOperationLog === 'function') {
                        addOperationLog('create', 'product', formData.id, `åˆ›å»ºäº§å“: ${formData.name}`);
                    }
                });
            }
            
            // æ·»åŠ äº§å“åˆ†ç±»è¡¨å•æäº¤äº‹ä»¶ç›‘å¬å™¨
            const createCategoryForm = document.getElementById('createCategoryForm');
            if (createCategoryForm) {
                createCategoryForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        id: Date.now(),
                        nameCN: document.getElementById('categoryNameCN').value,
                        nameKO: document.getElementById('categoryNameKO').value,
                        code: document.getElementById('categoryCode').value || generateCategoryCode(),
                        description: document.getElementById('categoryDescription').value,
                        parentId: document.getElementById('parentCategory').value || null,
                        sortOrder: parseInt(document.getElementById('categorySortOrder').value) || 0,
                        active: document.getElementById('categoryActive').checked,
                        createdAt: new Date().toISOString(),
                        createdBy: currentUser ? currentUser.id : null
                    };
                    
                    // éªŒè¯å¿…å¡«å­—æ®µ
                    if (!formData.nameCN) {
                        alert('è¯·è¾“å…¥åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼‰');
                        return;
                    }
                    
                    // æ£€æŸ¥ä»£ç æ˜¯å¦é‡å¤
                    if (productCategoriesData.some(cat => cat.code === formData.code && cat.id !== formData.id)) {
                        alert('åˆ†ç±»ä»£ç å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ä»£ç ');
                        return;
                    }
                    
                    // æ·»åŠ åˆ†ç±»
                    productCategoriesData.push(formData);
                    saveProductCategories();
                    
                    alert('äº§å“åˆ†ç±»åˆ›å»ºæˆåŠŸï¼');
                    resetCategoryForm();
                    displayProductCategories();
                    
                    // è®°å½•æ“ä½œæ—¥å¿—
                    if (typeof addOperationLog === 'function') {
                        addOperationLog('create', 'category', formData.id, `åˆ›å»ºäº§å“åˆ†ç±»: ${formData.nameCN}`);
                    }
                });
            }
            
            // ç”Ÿæˆåˆ†ç±»ä»£ç å‡½æ•°
            function generateCategoryCode() {
                const timestamp = Date.now();
                return `CAT_${timestamp}`;
            }
            
            // é‡ç½®åˆ†ç±»è¡¨å•å‡½æ•°
            function resetCategoryForm() {
                const form = document.getElementById('createCategoryForm');
                if (form) {
                    form.reset();
                    document.getElementById('categorySortOrder').value = '0';
                    document.getElementById('categoryActive').checked = true;
                }
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ä»ç™»å½•é¡µé¢è·³è½¬è¿‡æ¥çš„
            const fromLogin = sessionStorage.getItem('fromLogin');
            if (fromLogin === 'true') {
                // æ¸…é™¤æ ‡è®°ï¼Œé˜²æ­¢åˆ·æ–°é¡µé¢æ—¶å†æ¬¡è§¦å‘
                sessionStorage.removeItem('fromLogin');
                
                // è‡ªåŠ¨ç‚¹å‡»æ¦‚å†µæ€»è§ˆèœå•
                showContent('dashboard');
                
                // å»¶è¿Ÿæ›´æ–°ç»Ÿè®¡æ•°æ®ï¼Œç¡®ä¿é¡µé¢å…ƒç´ å·²åŠ è½½
                setTimeout(updateDashboardStats, 100);
                
                // æ ‡è®°æ¦‚å†µæ€»è§ˆèœå•ä¸ºæ¿€æ´»çŠ¶æ€
                document.querySelectorAll('.sidebar-menu-item').forEach(item => {
                    if (item.querySelector('[data-i18n="dashboard"]')) {
                        const header = item.querySelector('.sidebar-menu-header');
                        if (header) {
                            header.classList.add('active');
                        }
                    }
                });
            }
            
            // åˆå§‹åŒ–ç²’å­æ•ˆæœ
            if (typeof tsParticles !== 'undefined') {
                tsParticles.load("tsparticles", {
                    particles: {
                        number: {
                            value: 30,
                            density: {
                                enable: true,
                                value_area: 800
                            }
                        },
                        color: {
                            value: "#D4AF37"
                        },
                        shape: {
                            type: "circle",
                        },
                        opacity: {
                            value: 0.3,
                            random: true,
                            anim: {
                                enable: true,
                                speed: 1,
                                opacity_min: 0.1,
                                sync: false
                            }
                        },
                        size: {
                            value: 3,
                            random: true,
                            anim: {
                                enable: true,
                                speed: 2,
                                size_min: 0.1,
                                sync: false
                            }
                        },
                        line_linked: {
                            enable: true,
                            distance: 150,
                            color: "#D4AF37",
                            opacity: 0.2,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 1,
                            direction: "none",
                            random: true,
                            straight: false,
                            out_mode: "out",
                            bounce: false,
                        }
                    },
                    interactivity: {
                        detect_on: "canvas",
                        events: {
                            onhover: {
                                enable: true,
                                mode: "grab"
                            },
                            onclick: {
                                enable: true,
                                mode: "push"
                            },
                            resize: true
                        },
                        modes: {
                            grab: {
                                distance: 140,
                                line_linked: {
                                    opacity: 0.5
                                }
                            },
                            push: {
                                particles_nb: 3
                            }
                        }
                    },
                    retina_detect: true
                });
            }
        });
        
        // å…¼å®¹æ—§çš„showSubmenuå‡½æ•°ï¼Œé‡å®šå‘åˆ°æ–°çš„toggleSidebarSubmenuå‡½æ•°
        function showSubmenu(menuType) {
            toggleSidebarSubmenu(menuType);
        }
        
        // å…¼å®¹æ—§çš„backToMenuå‡½æ•°ï¼Œç°åœ¨ä¸éœ€è¦ä»»ä½•æ“ä½œ
        function backToMenu() {
            // ä¸æ‰§è¡Œä»»ä½•æ“ä½œ
        }
        
        // æ›´æ–°æ€»è§ˆé¡µé¢ç»Ÿè®¡æ•°æ®
        function updateDashboardStats() {
            const salons = getSalons();
            const totalSalons = salons.length;
            
            // æ›´æ–°æ²™é¾™äº¤æ˜“æ•°çš„ç›®æ ‡å€¼ï¼ˆè®¾ç½®ä¸ºå½“å‰æ²™é¾™æ€»æ•°ï¼‰
            const transactionSalonRows = document.querySelectorAll('tr');
            transactionSalonRows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 4) {
                    const firstCell = cells[0];
                    if (firstCell && firstCell.getAttribute('data-i18n') === 'transaction-salon-count') {
                        // æ›´æ–°ç›®æ ‡å€¼ï¼ˆç¬¬äºŒåˆ—ï¼‰
                        cells[1].textContent = totalSalons;
                        // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šé€»è¾‘æ¥è®¡ç®—å®é™…å€¼å’Œè¿›åº¦ç‡
                    }
                }
            });
        }

        // æ™ºèƒ½è¯­è¨€ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆæ•´åˆç”¨æˆ·å»ºè®®çš„æ–¹æ¡ˆï¼‰
        function initializeLanguageSystem() {
            // ä¼˜å…ˆçº§ï¼šç”¨æˆ·è®¾ç½® > ç³»ç»Ÿè¯­è¨€ > é»˜è®¤è¯­è¨€
            const userLanguage = localStorage.getItem('language');
            
            if (userLanguage) {
                // ç”¨æˆ·å·²æ‰‹åŠ¨é€‰æ‹©è¿‡è¯­è¨€ï¼Œä¼˜å…ˆä½¿ç”¨ç”¨æˆ·è®¾ç½®
                console.log('ä½¿ç”¨ç”¨æˆ·è®¾ç½®çš„è¯­è¨€:', userLanguage);
                switchLanguage(userLanguage);
            } else {
                // ç”¨æˆ·æœªè®¾ç½®ï¼Œè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿè¯­è¨€
                const systemLanguage = navigator.language || navigator.userLanguage;
                console.log('æ£€æµ‹åˆ°ç³»ç»Ÿè¯­è¨€:', systemLanguage);
                
                // åˆ¤æ–­ç³»ç»Ÿè¯­è¨€å¹¶è®¾ç½®å¯¹åº”è¯­è¨€
                const languageToUse = systemLanguage.startsWith('ko') ? 'ko' : 'zh';
                console.log('è‡ªåŠ¨é€‰æ‹©è¯­è¨€:', languageToUse);
                
                switchLanguage(languageToUse);
            }
        }
        
        // ç”¨æˆ·ä¸»åŠ¨åˆ‡æ¢è¯­è¨€ï¼ˆä¿æŒç°æœ‰åŠŸèƒ½ï¼Œå¢åŠ æ—¥å¿—ï¼‰
        function switchLanguage(lang) {
            console.log('åˆ‡æ¢è¯­è¨€åˆ°:', lang);
            
            // è®¾ç½®HTMLæ–‡æ¡£è¯­è¨€å±æ€§ï¼ˆSEOå‹å¥½ï¼‰
            document.documentElement.lang = lang === 'ko' ? 'ko-KR' : 'zh-CN';
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('btn-' + lang).classList.add('active');
            
            // ä¿å­˜è¯­è¨€è®¾ç½®åˆ°Firebase
            setLanguageToFirebase(lang);
            
            // æ›´æ–°ç•Œé¢æ–‡æœ¬
            updateTexts();
            
            // ç‰¹åˆ«å¤„ç†æ²™é¾™æ•°é‡æ˜¾ç¤º
            const salonCountText = document.getElementById('salon-count-text');
            if (salonCountText) {
                const salons = getSalons();
                const key = salonCountText.getAttribute('data-i18n');
                if (key === 'total-salons-count' || key === 'district-salons-count') {
                    salonCountText.textContent = getText(key).replace('{count}', salons.length);
                }
            }
        }
        
        // ç”¨æˆ·ä¸»åŠ¨è®¾ç½®è¯­è¨€åå¥½ï¼ˆç±»ä¼¼æ‚¨æä¾›çš„æ–¹æ¡ˆï¼‰
        async function setUserLanguage(lang) {
            console.log('ç”¨æˆ·ä¸»åŠ¨è®¾ç½®è¯­è¨€åå¥½:', lang);
            
            // ä¿å­˜ç”¨æˆ·åå¥½åˆ°Firebase
            const success = await setLanguageToFirebase(lang);
            
            // ç«‹å³åˆ‡æ¢è¯­è¨€
            switchLanguage(lang);
            
            // å¯é€‰ï¼šæ˜¾ç¤ºè®¾ç½®æˆåŠŸæç¤º
            // alert(getText('language-changed-success'));
        }
        
        // è·å–ç¿»è¯‘æ–‡æœ¬
        function getText(key) {
            const currentLanguage = getCurrentLanguage();
            const translations = {
                zh: {
                    'employee-management': 'èŒå‘˜ç®¡ç†',
                    'new-employee': 'æ–°å¢èŒå‘˜',
                    'employee-list': 'èŒå‘˜åˆ—è¡¨',
                    'delete-employee': 'åˆ é™¤èŒå‘˜',
                    'customer-management': 'æ²™é¾™ç®¡ç†',
                    'new-salon': 'æ–°å¢æ²™é¾™',
                    'single-add-salon': 'å•ä¸ªæ–°å¢æ²™é¾™',
                    'batch-add-salon': 'æ‰¹é‡æ–°å¢æ²™é¾™',
                    'salon-info': 'æ²™é¾™ä¿¡æ¯',
                                    'delete-salon': 'åˆ é™¤æ²™é¾™',
                'district-management': 'åŒºåŸŸç®¡ç†',
                'product-management': 'äº§å“ç®¡ç†',
                    'add-product': 'æ–°å¢äº§å“',
                    'product-list': 'äº§å“åˆ—è¡¨',
                    'product-category': 'äº§å“åˆ†ç±»',
                    'inventory-management': 'åº“å­˜ç®¡ç†',
                    'stock-check': 'åº“å­˜ç›˜ç‚¹',
                    'restock-alert': 'è¡¥è´§æé†’',
                    'usage-record': 'ä½¿ç”¨è®°å½•',
                    'finance-management': 'è´¢åŠ¡ç®¡ç†',
                    'income-record': 'æ”¶å…¥è®°å½•',
                    'expense-record': 'æ”¯å‡ºè®°å½•',
                    'financial-report': 'è´¢åŠ¡æŠ¥è¡¨',
                    'performance-target': 'ä¸šç»©ç›®æ ‡',
                    'audit-management': 'æ“ä½œç®¡ç†',
                    'operation-history': 'æ“ä½œå†å²è®°å½•',
                    'data-comparison': 'æ•°æ®å¯¹æ¯”æŸ¥çœ‹',
                    'audit-report': 'å®¡è®¡æŠ¥å‘Š',
                    'approval-management': 'å®¡æ‰¹ç®¡ç†',
                    'system-title': 'Mesiaé¦–å°”è¥¿éƒ¨åœ°åŒºç®¡ç†ç³»ç»Ÿ',
                    'logout': 'é€€å‡ºç™»å½•',
                    'employee-name': 'å§“å',
                    'employee-position': 'èŒä½',
                    'employee-mobile': 'æ‰‹æœºå·',
                    'actions': 'æ“ä½œ',
                    'edit-btn': 'ç¼–è¾‘',
                    'delete': 'åˆ é™¤',
                    'admin': 'ç®¡ç†å‘˜',
                    'manager': 'ç»ç†',
                    'salesperson': 'ä¸šåŠ¡å‘˜',
                    'system-admin': 'ç³»ç»Ÿç®¡ç†å‘˜',
                    'no-employees': 'æš‚æ— èŒå‘˜æ•°æ®',
                    'employee-list-desc': 'è¿™é‡Œæ˜¾ç¤ºæ‰€æœ‰èŒå‘˜çš„è¯¦ç»†ä¿¡æ¯åˆ—è¡¨ã€‚',
                    'dashboard': 'æ¦‚å†µæ€»è§ˆ',
                    'main-performance': 'ä¸»è¦ä¸šç»©',
                    'pending-business': 'ä¸»è¦æœªå¤„ç†ä¸šåŠ¡',
                    'category': 'åˆ†ç±»',
                    'target': 'ç›®æ ‡',
                    'actual': 'å®ç»©',
                    'progress-rate': 'è¿›åº¦ç‡(%)',
                    'my-performance': 'æˆ‘çš„ä¸šç»©',
                    'agency-total-performance': 'ä»£ç†åº—æ€»ä¸šç»©',
                    'transaction-salon-count': 'äº¤æ˜“æ²™é¾™æ•°',
                    'count': 'ä»¶æ•°',
                    'outbound-pending': 'å‡ºåº“æœªæ‰¹å‡†',
                    'payment-pending': 'æ”¶æ¬¾æœªæ‰¹å‡†',
                    'delivery-pending': 'é…é€æœªå®Œæˆ',
                    'unit-label': '[å•ä½:åƒå…ƒ]',
                    'basic-info': 'åŸºæœ¬ä¿¡æ¯',
                    'login-account': 'ç™»å½•è´¦å·',
                    'password': 'å¯†ç ',
                    'work-email': 'å·¥ä½œé‚®ç®±',
                    'join-date': 'å…¥èŒæ—¥æœŸ',
                    'contact-info': 'è”ç³»ä¿¡æ¯',
                    'mobile-number': 'æ‰‹æœºå·',
                    'bank-account-info': 'é“¶è¡Œè´¦æˆ·ä¿¡æ¯',
                    'bank-name': 'é“¶è¡Œåç§°',
                    'bank-account': 'é“¶è¡Œè´¦å·',
                    'account-holder': 'è´¦æˆ·æŒæœ‰äºº',
                    'bank-branch': 'å¤‡æ³¨',
                    'username-required': 'è¯·è¾“å…¥ç™»å½•è´¦å·',
                    'password-required': 'è¯·è¾“å…¥å¯†ç ',
                    'employee-name-required': 'è¯·è¾“å…¥èŒå‘˜å§“å',
                    'employee-added-success': 'èŒå‘˜æ·»åŠ æˆåŠŸ',
                    'username-already-exists': 'è¯¥ç™»å½•è´¦å·å·²å­˜åœ¨',
                    'employee-detail': 'èŒå‘˜è¯¦æƒ…',
                    'edit-employee': 'ç¼–è¾‘èŒå‘˜',
                    'employee-updated-success': 'èŒå‘˜ä¿¡æ¯æ›´æ–°æˆåŠŸ',
                    'cancel': 'å–æ¶ˆ',
                    'save': 'ä¿å­˜',
                    'add': 'æ·»åŠ ',
                    'create': 'åˆ›å»º',
                    'confirm-delete': 'ç¡®è®¤åˆ é™¤',
                    'all-districts': 'å…¨éƒ¨åŒºåŸŸ',
                                'district-guro': 'ä¹è€åŒº',
            'district-yeongdeungpo': 'æ°¸ç™»æµ¦åŒº',
            'district-geumcheon': 'è¡¿å·åŒº',
            'district-gangso': 'æ±Ÿè¥¿åŒº',
                    'district-overseas': 'æµ·å¤–åŒºåŸŸ',
                    'sort-by': 'æ’åºæ–¹å¼',
            'first-page': 'é¦–é¡µ',
            'prev-page': 'ä¸Šä¸€é¡µ',
            'next-page': 'ä¸‹ä¸€é¡µ',
            'last-page': 'æœ«é¡µ',
            'items-per-page-10': 'æ¯é¡µæ˜¾ç¤º: 10',
            'items-per-page-20': 'æ¯é¡µæ˜¾ç¤º: 20',
            'items-per-page-50': 'æ¯é¡µæ˜¾ç¤º: 50',
            'items-unit': 'æ¡',
            'pagination-info': 'åˆ†é¡µä¿¡æ¯',
            'go-to-page': 'è·³è½¬åˆ°ç¬¬',
            'page-unit': 'é¡µ',
            'jump-btn': 'è·³è½¬',
            'notes': 'å¤‡æ³¨',
            'notes-placeholder': 'åœ¨è¿™é‡Œæ·»åŠ å¤‡æ³¨ä¿¡æ¯...',
            'no-notes': 'æš‚æ— å¤‡æ³¨ä¿¡æ¯',
                    'sort-name': 'æ²™é¾™åç§°',
                    'sort-address': 'åœ°å€åç§°',
                    'sort-add-time': 'æ–°å¢æ—¶é—´',
                    'sort-last-transaction': 'æœ€åäº¤æ˜“',
                    'sort-overdue-days': 'æ¬ æ¬¾å¤©æ•°',
                    'sort-overdue-amount': 'æ¬ æ¬¾é‡‘é¢',
                    'sort-default': 'é»˜è®¤æ’åº',
                    'batch-upload-salon': 'æ‰¹é‡ä¸Šä¼ æ²™é¾™',
                    'batch-upload-desc': 'ä¸Šä¼ åŒ…å«æ²™é¾™ä¿¡æ¯çš„Excelæ–‡ä»¶ï¼Œæ ¼å¼è¦æ±‚ï¼šç¬¬1è¡Œä¸ºæ ‡é¢˜è¡Œï¼Œç¬¬2è¡Œå¼€å§‹ä¸ºæ²™é¾™æ•°æ®ï¼ˆæ²™é¾™åç§°ã€æ²™é¾™åœ°å€ã€é™¢é•¿å§“åã€æ‰‹æœºå·ç ã€åº—é“ºç”µè¯ã€ç”µå­é‚®ç®±ï¼‰ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è§£æå¹¶å¯¼å…¥åˆ°æ²™é¾™æ•°æ®åº“ã€‚',
                    'select-file': 'é€‰æ‹©æ–‡ä»¶',
                    'click-to-upload-file': 'ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶',
                    'file-format-hint': 'æ”¯æŒExcelæ ¼å¼(.xlsx, .xls)',
                    'process-file': 'å¤„ç†æ–‡ä»¶',
                    'download-template': 'ä¸‹è½½æ¨¡æ¿',
                    'salon-basic-info': 'æ²™é¾™åŸºæœ¬ä¿¡æ¯',
                    'director-info': 'é™¢é•¿ä¿¡æ¯',
                    'director-name': 'é™¢é•¿å§“å',
                    'director-mobile': 'æ‰‹æœºå·ç ',
                    'salon-email': 'ç”µå­é‚®ç®±',
                    'responsible-employee-info': 'è´Ÿè´£èŒå‘˜',
                    'salon-address-required': 'æ²™é¾™åœ°å€ä¸èƒ½ä¸ºç©º',
                    'please-select-file': 'è¯·é€‰æ‹©æ–‡ä»¶',
                    'remove-file': 'ç§»é™¤æ–‡ä»¶',
                    'data-preview': 'æ•°æ®é¢„è§ˆ',
                    'select-all': 'å…¨é€‰',
                    'selected-count': 'å·²é€‰æ‹© 0 ä¸ªæ²™é¾™',
                    'assign-responsible': 'æŒ‡å®šè´Ÿè´£äºº',
                    'assign-responsible-btn': 'åˆ†é…è´Ÿè´£äºº',
                    'confirm-batch-create': 'ç¡®è®¤æ‰¹é‡åˆ›å»º',
                    'salon-region': 'æ²™é¾™åŒºåŸŸ',
                    'director-name-col': 'é™¢é•¿å§“å',
                    'responsible-person': 'è´Ÿè´£äºº',
                    'unassigned': 'æœªæŒ‡å®š',
                    'select': 'é€‰æ‹©',
                    'business-license': 'è¥ä¸šæ‰§ç…§å·ç ',
                    'salon-name': 'æ²™é¾™åç§°',
                    'salon-address': 'æ²™é¾™åœ°å€',
                    'salon-name-required': 'è¯·è¾“å…¥æ²™é¾™åç§°',
                    'salon-added-success': 'æ²™é¾™æ·»åŠ æˆåŠŸ',
                    'no-salon-info': 'æš‚æ— æ²™é¾™ä¿¡æ¯',
                    'add-salon-tip': 'ç‚¹å‡»"æ–°å¢æ²™é¾™"æ¥æ·»åŠ ç¬¬ä¸€ä¸ªæ²™é¾™',
                    'salon-address-label': 'åœ°å€',
                    'business-license-label': 'è¥ä¸šæ‰§ç…§',
                    'responsible-employee': 'è´Ÿè´£èŒå‘˜',
                    'director-name': 'é™¢é•¿å§“å',
                    'director-mobile': 'é™¢é•¿æ‰‹æœº',
                    'salon-phone': 'åº—é“ºç”µè¯',
                    'salon-email': 'ç”µå­é‚®ç®±',
                    'add-time': 'æ·»åŠ æ—¶é—´',
                    'please-select-employee': 'è¯·é€‰æ‹©èŒå‘˜',
                    'please-select-to-assign': 'è¯·å…ˆé€‰æ‹©è¦åˆ†é…çš„æ²™é¾™',
                    'assign-success': 'å·²ä¸º {count} ä¸ªæ²™é¾™åˆ†é…è´Ÿè´£äººï¼š{name}',
                    'please-select-to-create': 'è¯·å…ˆé€‰æ‹©è¦åˆ›å»ºçš„æ²™é¾™',
                    'batch-create-complete': 'æ‰¹é‡åˆ›å»ºå®Œæˆï¼æˆåŠŸï¼š{success} ä¸ªï¼Œå¤±è´¥ï¼š{fail} ä¸ª',
                    'view-transactions-not-implemented': 'æŸ¥çœ‹äº¤æ˜“è®°å½•åŠŸèƒ½å°šæœªå®ç°',
                    'edit-salon-not-implemented': 'ç¼–è¾‘æ²™é¾™åŠŸèƒ½å°šæœªå®ç°',
                    'salon-list': 'æ²™é¾™åˆ—è¡¨',
                    'salon-detail': 'æ²™é¾™è¯¦æƒ…',
                    'basic-info': 'åŸºæœ¬ä¿¡æ¯',
                    'contact-info': 'è”ç³»ä¿¡æ¯',
                    'director-info': 'é™¢é•¿ä¿¡æ¯',
                    'other-info': 'å…¶ä»–ä¿¡æ¯',
                    'not-specified': 'æœªæŒ‡å®š',
                    'unspecified': 'æœªæŒ‡å®š',
                    'salon-not-found': 'æ²™é¾™æœªæ‰¾åˆ°',
                    'salon-updated-success': 'æ²™é¾™ä¿¡æ¯æ›´æ–°æˆåŠŸ',
                    'total-salons-count': 'æ€»è®¡ {count} å®¶æ²™é¾™',
                    'district-salons-count': 'å…± {count} å®¶æ²™é¾™',
                    'no-salon-info': 'æš‚æ— æ²™é¾™ä¿¡æ¯',
                    'add-salon-tip': 'ç‚¹å‡»"æ–°å¢æ²™é¾™"æ¥æ·»åŠ ç¬¬ä¸€ä¸ªæ²™é¾™',
                    'no-salesperson-salons': 'æ‚¨æš‚æœªåˆ†é…åˆ°ä»»ä½•æ²™é¾™',
                    'salesperson-salon-tip': 'è¯·è”ç³»ç®¡ç†å‘˜ä¸ºæ‚¨åˆ†é…æ²™é¾™',
                    'salon-name-required': 'è¯·è¾“å…¥æ²™é¾™åç§°',
                    'no-matching-salons': 'æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ²™é¾™',
                    'please-select-salon': 'è¯·é€‰æ‹©æ²™é¾™',
                    'add-product-tip': 'ç‚¹å‡»',
                    'add-first-product': 'æ¥æ·»åŠ ç¬¬ä¸€ä¸ªäº§å“',
                    'no-products': 'æš‚æ— äº§å“æ•°æ®',
                    'add-category-tip': 'ç‚¹å‡»',
                    'add-first-category': 'æŒ‰é’®æ¥æ·»åŠ ç¬¬ä¸€ä¸ªåˆ†ç±»',
                    'no-categories': 'æš‚æ— äº§å“åˆ†ç±»',
                    'view': 'æŸ¥çœ‹',
                            'salon-deleted-success': 'æ²™é¾™åˆ é™¤æˆåŠŸ',
        'salon-delete-failed': 'æ²™é¾™åˆ é™¤å¤±è´¥',
        'single-delete': 'å•ä¸ªåˆ é™¤',
        'batch-delete': 'æ‰¹é‡åˆ é™¤',
        'district-delete': 'åˆ†åŒºåŸŸåˆ é™¤',
        'select-all': 'å…¨é€‰',
        'deselect-all': 'å–æ¶ˆå…¨é€‰',
        'selected-count': 'å·²é€‰æ‹©ï¼š0 ä¸ªæ²™é¾™',
        'delete-selected': 'åˆ é™¤é€‰ä¸­é¡¹',
        'delete-all': 'åˆ é™¤å…¨éƒ¨',
        'please-select-district': 'è¯·é€‰æ‹©åŒºåŸŸ...',
        'district-salon-count-info': 'è¯¥åŒºåŸŸæ²™é¾™æ•°é‡ï¼š0',
        'delete-district-salons': 'åˆ é™¤è¯¥åŒºåŸŸæ‰€æœ‰æ²™é¾™',
        'responsible-delete': 'æ ¹æ®è´Ÿè´£äººåˆ é™¤',
        'please-select-responsible': 'è¯·é€‰æ‹©è´Ÿè´£äºº...',
        'responsible-salon-count-info': 'è¯¥è´Ÿè´£äººç®¡ç†çš„æ²™é¾™æ•°é‡ï¼š0',
        'delete-responsible-salons': 'åˆ é™¤è¯¥è´Ÿè´£äººçš„æ‰€æœ‰æ²™é¾™',
        'district-yangcheon': 'é˜³å·åŒº',
        'district-others': 'å…¶ä»–åœ°åŒº',
        'district-operations': 'åŒºåŸŸæ“ä½œ',
        'add-district': 'æ·»åŠ åŒºåŸŸ',
        'edit-district': 'ç¼–è¾‘åŒºåŸŸ',
        'delete-district': 'åˆ é™¤åŒºåŸŸ',
        'reset-to-default': 'é‡ç½®ä¸ºé»˜è®¤',
        'export-config': 'å¯¼å‡ºé…ç½®',
        'import-config': 'å¯¼å…¥é…ç½®',
        'district-list': 'åŒºåŸŸåˆ—è¡¨',
        'total-districts': 'å…± {count} ä¸ªåŒºåŸŸ',
        'district-code': 'åŒºåŸŸä»£ç ',
        'district-name-cn': 'ä¸­æ–‡åç§°',
        'district-name-kr': 'éŸ©æ–‡åç§°',
        'district-keywords': 'åœ°å€è¯†åˆ«å…³é”®è¯',
        'district-code-hint': 'è‹±æ–‡ä»£ç ï¼Œå¦‚: gangnam, seoul-center',
        'district-keywords-hint': 'ç”¨é€—å·åˆ†éš”ï¼Œå¦‚: ê°•ë‚¨êµ¬,æ±Ÿå—åŒº,gangnam',
        'district-salon-count': 'æ²™é¾™æ•°é‡',
        'confirm-delete-district': 'ç¡®è®¤åˆ é™¤åŒºåŸŸ',
        'delete-district-warning': 'åˆ é™¤åŒºåŸŸåï¼Œè¯¥åŒºåŸŸä¸‹çš„æ‰€æœ‰æ²™é¾™å°†è¢«å½’ç±»ä¸º"å…¶ä»–åœ°åŒº"ã€‚',
        'district-added-success': 'åŒºåŸŸæ·»åŠ æˆåŠŸ',
        'district-updated-success': 'åŒºåŸŸæ›´æ–°æˆåŠŸ',
        'district-deleted-success': 'åŒºåŸŸåˆ é™¤æˆåŠŸ',
        'district-code-exists': 'åŒºåŸŸä»£ç å·²å­˜åœ¨',
        'invalid-district-config': 'æ— æ•ˆçš„åŒºåŸŸé…ç½®æ–‡ä»¶',
        'config-imported-success': 'é…ç½®å¯¼å…¥æˆåŠŸ',
        'no-districts': 'æš‚æ— åŒºåŸŸæ•°æ®',
                    'clear-filters': 'æ¸…ç©ºç­›é€‰',
                    'select': 'é€‰æ‹©',
                    // äº§å“ç®¡ç†ç›¸å…³ç¿»è¯‘
                    'product-basic-info': 'äº§å“åŸºæœ¬ä¿¡æ¯',
                    'product-name': 'äº§å“åç§°',
                    'brand-name': 'å“ç‰Œåç§°',
                    'product-model': 'å‹å·',
                    'product-sku': 'è´§å·',
                    'product-category-select': 'äº§å“åˆ†ç±»',
                    'please-select-category': 'è¯·é€‰æ‹©äº§å“åˆ†ç±»...',
                    'uncategorized': 'æœªåˆ†ç±»',
                    'product-specifications': 'è§„æ ¼ä¿¡æ¯',
                    'unit-type': 'æ•°é‡å•ä½',
                    'unit-piece': 'ä¸ª',
                    'unit-only': 'åª',
                    'unit-stick': 'æ”¯',
                    'unit-bottle': 'ç“¶',
                    'unit-box': 'ç›’',
                    'unit-bag': 'è¢‹',
                    'weight-volume': 'é‡é‡/ä½“ç§¯',
                    'weight-unit': 'é‡é‡å•ä½',
                    'unit-gram': 'gï¼ˆå…‹ï¼‰',
                    'unit-ml': 'mlï¼ˆæ¯«å‡ï¼‰',
                    'unit-kg': 'kgï¼ˆåƒå…‹ï¼‰',
                    'unit-liter': 'Lï¼ˆå‡ï¼‰',
                    'per-box-count': 'æ¯ç›’æ•°é‡',
                    'per-case-count': 'ç®±è§„',
                    'specification-summary': 'è§„æ ¼æ±‡æ€»',
                    'price-info': 'ä»·æ ¼ä¿¡æ¯',
                    'purchase-price': 'è¿›è´§ä»·ï¼ˆâ‚©ï¼‰',
                    'wholesale-price': 'æ‰¹å‘ä»·ï¼ˆâ‚©ï¼‰',
                    'retail-price': 'é›¶å”®ä»·ï¼ˆâ‚©ï¼‰',
                    'is-on-sale': 'åœ¨å”®',
                    'is-discontinued': 'åœäº§',
                    'notes-info': 'å¤‡æ³¨ä¿¡æ¯',
                    'product-notes': 'å¤‡æ³¨',
                    'product-name-required': 'è¯·è¾“å…¥äº§å“åç§°',
                    'reset-form': 'é‡ç½®è¡¨å•',
                    'create-product-category': 'åˆ›å»ºäº§å“åˆ†ç±»',
                    'product-category-content': 'ç®¡ç†äº§å“åˆ†ç±»ä¿¡æ¯',
                    'category-name-cn': 'åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼‰',
                    'category-name-ko': 'ë¶„ë¥˜ëª…ï¼ˆí•œêµ­ì–´ï¼‰',
                    'category-code': 'åˆ†ç±»ä»£ç ',
                    'category-description': 'åˆ†ç±»æè¿°',
                    'edit-product-category': 'ç¼–è¾‘äº§å“åˆ†ç±»',
                    'product-list-content': 'æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰äº§å“ä¿¡æ¯',
                    'search-placeholder': 'æœç´¢äº§å“åç§°ã€å“ç‰Œæˆ–è´§å·...',
                    'product-detail': 'äº§å“è¯¦æƒ…',
                    'product-brand': 'å“ç‰Œ',
                    'product-model-label': 'å‹å·',
                    'product-sku-label': 'è´§å·',
                    'purchase-price-label': 'è¿›è´§ä»·',
                    'wholesale-price-label': 'æ‰¹å‘ä»·',
                    'retail-price-label': 'é›¶å”®ä»·',
                    'status': 'çŠ¶æ€',
                    'on-sale': 'åœ¨å”®',
                    'discontinued': 'åœäº§',
                    'created-time': 'åˆ›å»ºæ—¶é—´',
                    'product-notes-placeholder': 'è¯·è¾“å…¥äº§å“å¤‡æ³¨ä¿¡æ¯...',
                    'search-product-placeholder': 'æœç´¢äº§å“å/å“ç‰Œ/è´§å·...',
                    'all-categories': 'å…¨éƒ¨åˆ†ç±»',
                    'all-status': 'å…¨éƒ¨çŠ¶æ€',
                    'sort-by-name': 'äº§å“åç§°',
                    'sort-by-brand': 'å“ç‰Œ',
                    'sort-by-category': 'åˆ†ç±»',
                    'sort-by-price': 'è¿›è´§ä»·',
                    'no-categories': 'æš‚æ— äº§å“åˆ†ç±»ï¼Œè¯·ç‚¹å‡»"åˆ›å»ºäº§å“åˆ†ç±»"æ·»åŠ ',
                    'category-list': 'äº§å“åˆ†ç±»åˆ—è¡¨',
                    'total-products-count': 'æ€»è®¡ {count} ä¸ªäº§å“',
                    'no-products': 'æš‚æ— äº§å“æ•°æ®',
                    'add-product-submit': 'æ·»åŠ äº§å“',
                    'salon-region': 'åŒºåŸŸ',
                    'responsible-person': 'è´Ÿè´£äºº',
                    'all-employees': 'æ‰€æœ‰èŒå‘˜',
                    'unassigned': 'æœªåˆ†é…',
                    'admin': 'ç®¡ç†å‘˜',
                    'manager': 'ç»ç†',
                    'salesperson': 'ä¸šåŠ¡å‘˜',
                    'no-salons': 'æš‚æ— æ²™é¾™æ•°æ®',
                    'no-salon-info': 'æš‚æ— æ²™é¾™ä¿¡æ¯',
                    'add-salon-tip': 'ç‚¹å‡»"æ–°å¢æ²™é¾™"æ¥æ·»åŠ ç¬¬ä¸€ä¸ªæ²™é¾™',
                    'no-salesperson-salons': 'æ‚¨æš‚æœªåˆ†é…åˆ°ä»»ä½•æ²™é¾™',
                    'salesperson-salon-tip': 'è¯·è”ç³»ç®¡ç†å‘˜ä¸ºæ‚¨åˆ†é…æ²™é¾™',
                    'total-salons-count': 'æ€»è®¡ {count} å®¶æ²™é¾™',
                    'district-salons-count': 'å…± {count} å®¶æ²™é¾™',
                    'search-salon-placeholder': 'æœç´¢æ²™é¾™å/é™¢é•¿å/æ‰‹æœºå·...',
                    'salon-phone': 'åº—é“ºç”µè¯',
                    'salon-delete-list': 'æ²™é¾™åˆ é™¤åˆ—è¡¨',
                    'no-salons-to-delete': 'æ²¡æœ‰å¯åˆ é™¤çš„æ²™é¾™',
                    'danger-operations': 'å±é™©æ“ä½œ',
                    'delete-all-filtered': 'åˆ é™¤æ‰€æœ‰ç­›é€‰ç»“æœ',
                    'delete-all-salons': 'åˆ é™¤å…¨éƒ¨æ²™é¾™',
                    'danger-warning': 'æ³¨æ„ï¼šåˆ é™¤æ“ä½œä¸å¯æ’¤é”€ï¼',
                    'select-all-filtered': 'å…¨é€‰ç­›é€‰ç»“æœ',
                    'select-all-global': 'å…¨é€‰æ‰€æœ‰æ²™é¾™',
                    'select-all': 'å…¨é€‰',
                    // å…¶ä»–ç¿»è¯‘...
                },
                ko: {
                    'employee-management': 'ì§ì› ê´€ë¦¬',
                    'new-employee': 'ì§ì› ì¶”ê°€',
                    'employee-list': 'ì§ì› ëª©ë¡',
                    'delete-employee': 'ì§ì› ì‚­ì œ',
                    'customer-management': 'ì‚´ë¡± ê´€ë¦¬',
                    'new-salon': 'ì‚´ë¡± ì¶”ê°€',
                    'single-add-salon': 'ë‹¨ì¼ ì‚´ë¡± ì¶”ê°€',
                    'batch-add-salon': 'ì¼ê´„ ì‚´ë¡± ì¶”ê°€',
                    'salon-info': 'ì‚´ë¡± ì •ë³´',
                    'delete-salon': 'ì‚´ë¡± ì‚­ì œ',
                    'district-management': 'ì§€ì—­ ê´€ë¦¬',
                    'product-management': 'ì œí’ˆ ê´€ë¦¬',
                    'add-product': 'ì œí’ˆ ì¶”ê°€',
                    'product-list': 'ì œí’ˆ ëª©ë¡',
                    'product-category': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬',
                    'inventory-management': 'ì¬ê³  ê´€ë¦¬',
                    'stock-check': 'ì¬ê³  í™•ì¸',
                    'restock-alert': 'ì¬ê³  ë³´ì¶© ì•Œë¦¼',
                    'usage-record': 'ì‚¬ìš© ê¸°ë¡',
                    'finance-management': 'ì¬ë¬´ ê´€ë¦¬',
                    'income-record': 'ìˆ˜ì… ê¸°ë¡',
                    'expense-record': 'ì§€ì¶œ ê¸°ë¡',
                    'financial-report': 'ì¬ë¬´ ë³´ê³ ì„œ',
                    'performance-target': 'ì‹¤ì  ëª©í‘œ',
                    'audit-management': 'ì‘ì—… ê´€ë¦¬',
                    'operation-history': 'ì‘ì—… ê¸°ë¡',
                    'data-comparison': 'ë°ì´í„° ë¹„êµ',
                    'audit-report': 'ê°ì‚¬ ë³´ê³ ì„œ',
                    'approval-management': 'ìŠ¹ì¸ ê´€ë¦¬',
                    'system-title': 'ë©”ì‹œì•„ì„œë¶€ì§€ì ê´€ë¦¬ì‹œìŠ¤í…œ',
                    'logout': 'ë¡œê·¸ì•„ì›ƒ',
                    'employee-name': 'ì´ë¦„',
                    'employee-position': 'ì§ìœ„',
                    'employee-mobile': 'íœ´ëŒ€í°',
                    'actions': 'ì‘ì—…',
                    'edit-btn': 'í¸ì§‘',
                    'delete': 'ì‚­ì œ',
                    'admin': 'ê´€ë¦¬ì',
                    'manager': 'ë§¤ë‹ˆì €',
                    'salesperson': 'ì˜ì—…ì‚¬ì›',
                    'system-admin': 'ì‹œìŠ¤í…œ ê´€ë¦¬ì',
                    'no-employees': 'ì§ì› ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'employee-list-desc': 'ëª¨ë“  ì§ì›ì˜ ìƒì„¸ ì •ë³´ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.',
                    'dashboard': 'ê°œìš”',
                    'main-performance': 'ì£¼ìš” ì‹¤ì ',
                    'pending-business': 'ì£¼ìš” ì—…ë¬´ ë¯¸ì²˜ë¦¬',
                    'category': 'ë¶„ë¥˜',
                    'target': 'ëª©í‘œ',
                    'actual': 'ì‹¤ì ',
                    'progress-rate': 'ì§„í–‰ë¥ (%)',
                    'my-performance': 'ë‚´ ì‹¤ì ',
                    'agency-total-performance': 'ëŒ€ë¦¬ì  ì´ì‹¤ì ',
                    'transaction-salon-count': 'ê±°ë˜ ì‚´ë¡± ìˆ˜',
                    'count': 'ê±´ìˆ˜',
                    'outbound-pending': 'ì¶œê³  ë¯¸ìŠ¹ì¸',
                    'payment-pending': 'ìˆ˜ê¸ˆ ë¯¸ìŠ¹ì¸',
                    'delivery-pending': 'ë°°ì†¡ ë¯¸ì™„ë£Œ',
                    'unit-label': '[ë‹¨ìœ„:ì²œì›]',
                    'basic-info': 'ê¸°ë³¸ ì •ë³´',
                    'login-account': 'ë¡œê·¸ì¸ ê³„ì •',
                    'password': 'ë¹„ë°€ë²ˆí˜¸',
                    'contact-info': 'ì—°ë½ì²˜ ì •ë³´',
                    'mobile-number': 'íœ´ëŒ€í° ë²ˆí˜¸',
                    'bank-account-info': 'ì€í–‰ ê³„ì¢Œ ì •ë³´',
                    'bank-name': 'ì€í–‰ëª…',
                    'bank-account': 'ê³„ì¢Œë²ˆí˜¸',
                    'account-holder': 'ì˜ˆê¸ˆì£¼',
                    'bank-branch': 'ë¹„ê³ ',
                    'username-required': 'ë¡œê·¸ì¸ ê³„ì •ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'password-required': 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”',
                    'employee-name-required': 'ì§ì› ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'employee-added-success': 'ì§ì› ì¶”ê°€ ì„±ê³µ',
                    'username-already-exists': 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë¡œê·¸ì¸ ê³„ì •ì…ë‹ˆë‹¤',
                    'employee-detail': 'ì§ì› ìƒì„¸ì •ë³´',
                    'edit-employee': 'ì§ì› í¸ì§‘',
                    'employee-updated-success': 'ì§ì› ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'cancel': 'ì·¨ì†Œ',
                    'save': 'ì €ì¥',
                    'add': 'ì¶”ê°€',
                    'create': 'ìƒì„±',
                    'confirm-delete': 'ì‚­ì œ í™•ì¸',
                    'all-districts': 'ì „ì²´ ì§€ì—­',
                                'district-guro': 'êµ¬ë¡œêµ¬',
            'district-yeongdeungpo': 'ì˜ë“±í¬êµ¬',
            'district-geumcheon': 'ê¸ˆì²œêµ¬',
            'district-gangso': 'ê°•ì„œêµ¬',
                    'district-overseas': 'í•´ì™¸ ì§€ì—­',
                    'sort-by': 'ì •ë ¬ ë°©ì‹',
            'first-page': 'ì²« í˜ì´ì§€',
            'prev-page': 'ì´ì „ í˜ì´ì§€',
            'next-page': 'ë‹¤ìŒ í˜ì´ì§€',
            'last-page': 'ë§ˆì§€ë§‰ í˜ì´ì§€',
            'items-per-page-10': 'í˜ì´ì§€ë‹¹ í‘œì‹œ: 10',
            'items-per-page-20': 'í˜ì´ì§€ë‹¹ í‘œì‹œ: 20',
            'items-per-page-50': 'í˜ì´ì§€ë‹¹ í‘œì‹œ: 50',
            'items-unit': 'ê°œ',
            'pagination-info': 'í˜ì´ì§€ ì •ë³´',
            'go-to-page': 'ë‹¤ìŒìœ¼ë¡œ ì´ë™',
            'page-unit': 'í˜ì´ì§€',
            'jump-btn': 'ì´ë™',
            'notes': 'ë¹„ê³ ',
            'notes-placeholder': 'ì—¬ê¸°ì— ë¹„ê³  ì •ë³´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”...',
            'no-notes': 'ë¹„ê³  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'sort-name': 'ì‚´ë¡± ì´ë¦„',
                    'sort-address': 'ì£¼ì†Œ ì´ë¦„',
                    'sort-add-time': 'ì¶”ê°€ ì‹œê°„',
                    'sort-last-transaction': 'ë§ˆì§€ë§‰ ê±°ë˜',
                    'sort-overdue-days': 'ì—°ì²´ ì¼ìˆ˜',
                    'sort-overdue-amount': 'ì—°ì²´ ê¸ˆì•¡',
                    'sort-default': 'ê¸°ë³¸ ì •ë ¬',
                    'batch-upload-salon': 'ì‚´ë¡± ì¼ê´„ ì—…ë¡œë“œ',
                    'batch-upload-desc': 'ì‚´ë¡± ì •ë³´ê°€ í¬í•¨ëœ Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”. í˜•ì‹ ìš”êµ¬ì‚¬í•­: ì²« ë²ˆì§¸ í–‰ì€ ì œëª© í–‰, ë‘ ë²ˆì§¸ í–‰ë¶€í„° ì‚´ë¡± ë°ì´í„°(ì‚´ë¡±ëª…, ì‚´ë¡± ì£¼ì†Œ, ì›ì¥ ì´ë¦„, íœ´ëŒ€í° ë²ˆí˜¸, ë§¤ì¥ ì „í™”, ì´ë©”ì¼)ë¥¼ ì…ë ¥í•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ì‚´ë¡± ë°ì´í„°ë² ì´ìŠ¤ì— ê°€ì ¸ì˜µë‹ˆë‹¤.',
                    'select-file': 'íŒŒì¼ ì„ íƒ',
                    'click-to-upload-file': 'íŒŒì¼ ì—…ë¡œë“œ í´ë¦­',
                    'file-format-hint': 'Excel í˜•ì‹ ì§€ì›(.xlsx, .xls)',
                    'process-file': 'íŒŒì¼ ì²˜ë¦¬',
                    'download-template': 'í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ',
                    'salon-basic-info': 'ì‚´ë¡± ê¸°ë³¸ ì •ë³´',
                    'director-info': 'ì›ì¥ ì •ë³´',
                    'director-name': 'ì›ì¥ ì„±í•¨',
                    'director-mobile': 'ì›ì¥ ì „í™”',
                    'salon-email': 'ì´ë©”ì¼',
                    'responsible-employee-info': 'ë‹´ë‹¹ ì§ì›',
                    'salon-address-required': 'ì‚´ë¡± ì£¼ì†ŒëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤',
                    'please-select-file': 'íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”',
                    'remove-file': 'íŒŒì¼ ì œê±°',
                    'data-preview': 'ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°',
                    'select-all': 'ì „ì²´ ì„ íƒ',
                    'selected-count': '0ê°œ ì‚´ë¡± ì„ íƒë¨',
                    'assign-responsible': 'ë‹´ë‹¹ì ì§€ì •',
                    'assign-responsible-btn': 'ë‹´ë‹¹ì ë°°ì •',
                    'confirm-batch-create': 'ì¼ê´„ ìƒì„± í™•ì¸',
                    'salon-region': 'ì‚´ë¡± ì§€ì—­',
                    'director-name-col': 'ì›ì¥ ì„±í•¨',
                    'responsible-person': 'ë‹´ë‹¹ì',
                    'unassigned': 'ë¯¸ì§€ì •',
                    'select': 'ì„ íƒ',
                    'business-license': 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸',
                    'salon-name': 'ì‚´ë¡± ì´ë¦„',
                    'salon-address': 'ì‚´ë¡± ì£¼ì†Œ',
                    'salon-name-required': 'ì‚´ë¡± ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'salon-added-success': 'ì‚´ë¡± ì¶”ê°€ ì„±ê³µ',
                    'no-salon-info': 'ì‚´ë¡± ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'add-salon-tip': 'ì‚´ë¡± ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì‚´ë¡±ì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'salon-address-label': 'ì£¼ì†Œ',
                    'business-license-label': 'ì‚¬ì—…ìë“±ë¡ì¦',
                    'responsible-employee': 'ë‹´ë‹¹ ì§ì›',
                    'director-name': 'ì›ì¥ ì„±í•¨',
                    'director-mobile': 'ì›ì¥ ì „í™”',
                    'salon-email': 'ì´ë©”ì¼',
                    'add-time': 'ì¶”ê°€ ì‹œê°„',
                    'please-select-employee': 'ì§ì›ì„ ì„ íƒí•˜ì„¸ìš”',
                    'please-select-to-assign': 'ë¨¼ì € í• ë‹¹í•  ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”',
                    'assign-success': '{count}ê°œ ì‚´ë¡±ì— ëŒ€í•œ ë‹´ë‹¹ìê°€ {name}ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'please-select-to-create': 'ë¨¼ì € ìƒì„±í•  ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”',
                    'batch-create-complete': 'ë°°ì¹˜ ìƒì„± ì™„ë£Œ! ì„±ê³µ: {success}ê°œ, ì‹¤íŒ¨: {fail}ê°œ',
                    'view-transactions-not-implemented': 'ê±°ë˜ ë‚´ì—­ ë³´ê¸° ê¸°ëŠ¥ì´ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤',
                    'edit-salon-not-implemented': 'ì‚´ë¡± í¸ì§‘ ê¸°ëŠ¥ì´ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤',
                    'salon-list': 'ì‚´ë¡± ëª©ë¡',
                    'salon-detail': 'ì‚´ë¡± ìƒì„¸ì •ë³´',
                    'basic-info': 'ê¸°ë³¸ ì •ë³´',
                    'contact-info': 'ì—°ë½ì²˜ ì •ë³´',
                    'director-info': 'ì›ì¥ ì •ë³´',
                    'other-info': 'ê¸°íƒ€ ì •ë³´',
                    'not-specified': 'ë¯¸ì§€ì •',
                    'unspecified': 'ë¯¸ì§€ì •',
                    'salon-not-found': 'ì‚´ë¡±ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
                    'salon-updated-success': 'ì‚´ë¡± ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤',
                    'total-salons-count': 'ì´ {count}ê°œ ì‚´ë¡±',
                    'district-salons-count': 'ì´ {count}ê°œ ì‚´ë¡±',
                    'no-salon-info': 'ì‚´ë¡± ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'add-salon-tip': 'ì‚´ë¡± ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì‚´ë¡±ì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'no-salesperson-salons': 'í• ë‹¹ëœ ì‚´ë¡±ì´ ì—†ìŠµë‹ˆë‹¤',
                    'salesperson-salon-tip': 'ê´€ë¦¬ìì—ê²Œ ì‚´ë¡± í• ë‹¹ì„ ìš”ì²­í•˜ì„¸ìš”',
                    'salon-name-required': 'ì‚´ë¡± ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'no-matching-salons': 'ì¼ì¹˜í•˜ëŠ” ì‚´ë¡±ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
                    'please-select-salon': 'ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”',
                            'salon-deleted-success': 'ì‚´ë¡± ì‚­ì œ ì„±ê³µ',
        'salon-delete-failed': 'ì‚´ë¡± ì‚­ì œ ì‹¤íŒ¨',
        'single-delete': 'ê°œë³„ ì‚­ì œ',
        'batch-delete': 'ì¼ê´„ ì‚­ì œ',
        'district-delete': 'ì§€ì—­ë³„ ì‚­ì œ',
        'select-all': 'ì „ì²´ ì„ íƒ',
        'deselect-all': 'ì „ì²´ í•´ì œ',
        'selected-count': 'ì„ íƒë¨: 0ê°œ ì‚´ë¡±',
        'delete-selected': 'ì„ íƒ í•­ëª© ì‚­ì œ',
        'delete-all': 'ì „ì²´ ì‚­ì œ',
        'please-select-responsible': 'ë‹´ë‹¹ìë¥¼ ì„ íƒí•˜ì„¸ìš”...',
        'responsible-salon-count-info': 'í•´ë‹¹ ë‹´ë‹¹ì ê´€ë¦¬ ì‚´ë¡± ìˆ˜: 0',
        'delete-responsible-salons': 'í•´ë‹¹ ë‹´ë‹¹ìì˜ ëª¨ë“  ì‚´ë¡± ì‚­ì œ',
        'district-yangcheon': 'ì–‘ì²œêµ¬',
        'district-others': 'ê¸°íƒ€ ì§€ì—­',
        'district-operations': 'ì§€ì—­ ì‘ì—…',
        'add-district': 'ì§€ì—­ ì¶”ê°€',
        'edit-district': 'ì§€ì—­ í¸ì§‘',
        'delete-district': 'ì§€ì—­ ì‚­ì œ',
        'reset-to-default': 'ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •',
        'export-config': 'ì„¤ì • ë‚´ë³´ë‚´ê¸°',
        'import-config': 'ì„¤ì • ê°€ì ¸ì˜¤ê¸°',
        'district-list': 'ì§€ì—­ ëª©ë¡',
        'total-districts': 'ì´ {count}ê°œ ì§€ì—­',
        'district-code': 'ì§€ì—­ ì½”ë“œ',
        'district-name-cn': 'ì¤‘êµ­ì–´ ì´ë¦„',
        'district-name-kr': 'í•œêµ­ì–´ ì´ë¦„',
        'district-keywords': 'ì£¼ì†Œ ì¸ì‹ í‚¤ì›Œë“œ',
        'district-code-hint': 'ì˜ë¬¸ ì½”ë“œ, ì˜ˆ: gangnam, seoul-center',
        'district-keywords-hint': 'ì‰¼í‘œë¡œ êµ¬ë¶„, ì˜ˆ: ê°•ë‚¨êµ¬,æ±Ÿå—åŒº,gangnam',
        'district-salon-count': 'ì‚´ë¡± ìˆ˜',
        'confirm-delete-district': 'ì§€ì—­ ì‚­ì œ í™•ì¸',
        'delete-district-warning': 'ì§€ì—­ì„ ì‚­ì œí•˜ë©´ í•´ë‹¹ ì§€ì—­ì˜ ëª¨ë“  ì‚´ë¡±ì´ "ê¸°íƒ€ ì§€ì—­"ìœ¼ë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.',
        'district-added-success': 'ì§€ì—­ ì¶”ê°€ ì„±ê³µ',
        'district-updated-success': 'ì§€ì—­ ì—…ë°ì´íŠ¸ ì„±ê³µ',
        'district-deleted-success': 'ì§€ì—­ ì‚­ì œ ì„±ê³µ',
        'district-code-exists': 'ì§€ì—­ ì½”ë“œê°€ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤',
        'invalid-district-config': 'ìœ íš¨í•˜ì§€ ì•Šì€ ì§€ì—­ ì„¤ì • íŒŒì¼',
        'config-imported-success': 'ì„¤ì • ê°€ì ¸ì˜¤ê¸° ì„±ê³µ',
        'no-districts': 'ì§€ì—­ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'clear-filters': 'í•„í„° ì§€ìš°ê¸°',
                    'select': 'ì„ íƒ',
                    // ì œí’ˆ ê´€ë¦¬ ê´€ë ¨ ë²ˆì—­
                    'product-basic-info': 'ì œí’ˆ ê¸°ë³¸ ì •ë³´',
                    'product-name': 'ì œí’ˆëª…',
                    'brand-name': 'ë¸Œëœë“œëª…',
                    'product-model': 'ëª¨ë¸',
                    'product-sku': 'ìƒí’ˆë²ˆí˜¸',
                    'product-category-select': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬',
                    'please-select-category': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”...',
                    'uncategorized': 'ë¯¸ë¶„ë¥˜',
                    'product-specifications': 'ì‚¬ì–‘ ì •ë³´',
                    'unit-type': 'ìˆ˜ëŸ‰ ë‹¨ìœ„',
                    'unit-piece': 'ê°œ',
                    'unit-only': 'ê°œ',
                    'unit-stick': 'ê°œ',
                    'unit-bottle': 'ë³‘',
                    'unit-box': 'ë°•ìŠ¤',
                    'unit-bag': 'ë´‰ì§€',
                    'weight-volume': 'ë¬´ê²Œ/ë¶€í”¼',
                    'weight-unit': 'ë¬´ê²Œ ë‹¨ìœ„',
                    'unit-gram': 'gï¼ˆê·¸ë¨ï¼‰',
                    'unit-ml': 'mlï¼ˆë°€ë¦¬ë¦¬í„°ï¼‰',
                    'unit-kg': 'kgï¼ˆí‚¬ë¡œê·¸ë¨ï¼‰',
                    'unit-liter': 'Lï¼ˆë¦¬í„°ï¼‰',
                    'per-box-count': 'ë°•ìŠ¤ë‹¹ ìˆ˜ëŸ‰',
                    'per-case-count': 'ì¼€ì´ìŠ¤ ê·œê²©',
                    'specification-summary': 'ì‚¬ì–‘ ìš”ì•½',
                    'price-info': 'ê°€ê²© ì •ë³´',
                    'purchase-price': 'ë§¤ì…ê°€ï¼ˆâ‚©ï¼‰',
                    'wholesale-price': 'ë„ë§¤ê°€ï¼ˆâ‚©ï¼‰',
                    'retail-price': 'ì†Œë§¤ê°€ï¼ˆâ‚©ï¼‰',
                    'is-on-sale': 'íŒë§¤ì¤‘',
                    'is-discontinued': 'ë‹¨ì¢…',
                    'notes-info': 'ë¹„ê³  ì •ë³´',
                    'product-notes': 'ë¹„ê³ ',
                    'product-name-required': 'ì œí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”',
                    'reset-form': 'í¼ ì´ˆê¸°í™”',
                    'create-product-category': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ ìƒì„±',
                    'product-category-content': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ ì •ë³´ ê´€ë¦¬',
                    'category-name-cn': 'ì¹´í…Œê³ ë¦¬ëª…ï¼ˆì¤‘êµ­ì–´ï¼‰',
                    'category-name-ko': 'ì¹´í…Œê³ ë¦¬ëª…ï¼ˆí•œêµ­ì–´ï¼‰',
                    'category-code': 'ì¹´í…Œê³ ë¦¬ ì½”ë“œ',
                    'category-description': 'ì¹´í…Œê³ ë¦¬ ì„¤ëª…',
                    'edit-product-category': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ í¸ì§‘',
                    'product-list-content': 'ëª¨ë“  ì œí’ˆ ì •ë³´ ë³´ê¸° ë° ê´€ë¦¬',
                    'search-placeholder': 'ì œí’ˆëª…, ë¸Œëœë“œ ë˜ëŠ” ìƒí’ˆë²ˆí˜¸ ê²€ìƒ‰...',
                    'product-detail': 'ì œí’ˆ ìƒì„¸ì •ë³´',
                    'product-brand': 'ë¸Œëœë“œ',
                    'product-model-label': 'ëª¨ë¸',
                    'product-sku-label': 'ìƒí’ˆë²ˆí˜¸',
                    'purchase-price-label': 'ë§¤ì…ê°€',
                    'wholesale-price-label': 'ë„ë§¤ê°€',
                    'retail-price-label': 'ì†Œë§¤ê°€',
                    'status': 'ìƒíƒœ',
                    'on-sale': 'íŒë§¤ì¤‘',
                    'discontinued': 'ë‹¨ì¢…',
                    'created-time': 'ìƒì„± ì‹œê°„',
                    'product-notes-placeholder': 'ì œí’ˆ ë¹„ê³  ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”...',
                    'search-product-placeholder': 'ì œí’ˆëª…/ë¸Œëœë“œ/ìƒí’ˆë²ˆí˜¸ ê²€ìƒ‰...',
                    'all-categories': 'ì „ì²´ ì¹´í…Œê³ ë¦¬',
                    'all-status': 'ì „ì²´ ìƒíƒœ',
                    'sort-by-name': 'ì œí’ˆëª…',
                    'sort-by-brand': 'ë¸Œëœë“œ',
                    'sort-by-category': 'ì¹´í…Œê³ ë¦¬',
                    'sort-by-price': 'ë§¤ì…ê°€',
                    'no-categories': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤. "ì œí’ˆ ì¹´í…Œê³ ë¦¬ ìƒì„±"ì„ í´ë¦­í•˜ì—¬ ì¶”ê°€í•˜ì„¸ìš”',
                    'category-list': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ ëª©ë¡',
                    'total-products-count': 'ì´ {count}ê°œ ì œí’ˆ',
                    'no-products': 'ì œí’ˆ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'add-product-submit': 'ì œí’ˆ ì¶”ê°€',
                    'salon-region': 'ì§€ì—­',
                    'responsible-person': 'ë‹´ë‹¹ì',
                    'all-employees': 'ëª¨ë“  ì§ì›',
                    'unassigned': 'ë¯¸ë°°ì •',
                    'admin': 'ê´€ë¦¬ì',
                    'manager': 'ë§¤ë‹ˆì €',
                    'salesperson': 'ì˜ì—…ì‚¬ì›',
                    'no-salons': 'ì‚´ë¡± ë°ì´í„° ì—†ìŒ',
                    'no-salon-info': 'ì‚´ë¡± ì •ë³´ ì—†ìŒ',
                    'add-salon-tip': '"ì‚´ë¡± ì¶”ê°€"ë¥¼ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì‚´ë¡±ì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'no-salesperson-salons': 'í• ë‹¹ëœ ì‚´ë¡±ì´ ì—†ìŠµë‹ˆë‹¤',
                    'salesperson-salon-tip': 'ê´€ë¦¬ìì—ê²Œ ì‚´ë¡± í• ë‹¹ì„ ìš”ì²­í•˜ì„¸ìš”',
                    'total-salons-count': 'ì´ {count}ê°œ ì‚´ë¡±',
                    'district-salons-count': '{count}ê°œ ì‚´ë¡±',
                    'search-salon-placeholder': 'ì‚´ë¡±ëª…/ì›ì¥ëª…/íœ´ëŒ€í° ê²€ìƒ‰...',
                    'salon-phone': 'ì‚´ë¡± ì „í™”',
                    'salon-delete-list': 'ì‚´ë¡± ì‚­ì œ ëª©ë¡',
                    'no-salons-to-delete': 'ì‚­ì œí•  ì‚´ë¡±ì´ ì—†ìŠµë‹ˆë‹¤',
                    'danger-operations': 'ìœ„í—˜í•œ ì‘ì—…',
                    'delete-all-filtered': 'ëª¨ë“  í•„í„° ê²°ê³¼ ì‚­ì œ',
                    'delete-all-salons': 'ëª¨ë“  ì‚´ë¡± ì‚­ì œ',
                    'danger-warning': 'ì£¼ì˜: ì‚­ì œ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!',
                    'select-all-filtered': 'í•„í„° ê²°ê³¼ ì „ì²´ ì„ íƒ',
                    'select-all-global': 'ëª¨ë“  ì‚´ë¡± ì „ì²´ ì„ íƒ',
                    'add-product-tip': 'í´ë¦­',
                    'add-first-product': 'í•˜ì—¬ ì²« ë²ˆì§¸ ì œí’ˆì„ ì¶”ê°€í•˜ì„¸ìš”',
                    'no-products': 'ì œí’ˆ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'add-category-tip': 'í´ë¦­',
                    'add-first-category': 'ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”',
                    'no-categories': 'ì œí’ˆ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤',
                    'view': 'ë³´ê¸°',
                    // å…¶ä»–ç¿»è¯‘...
                }
            };
            
            return translations[currentLanguage] && translations[currentLanguage][key] 
                ? translations[currentLanguage][key] 
                : key;
        }
        
        // æ›´æ–°ç•Œé¢æ–‡æœ¬
        function updateTexts() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                
                // ç‰¹æ®Šå¤„ç†æ²™é¾™æ•°é‡æ˜¾ç¤º
                if (key === 'total-salons-count' || key === 'district-salons-count') {
                    const salons = getSalons();
                    element.textContent = getText(key).replace('{count}', salons.length);
                } else {
                    element.textContent = getText(key);
                }
            });
            
            // æ›´æ–°å ä½ç¬¦æ–‡æœ¬
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                element.placeholder = getText(key);
            });
        }
        
        // ç”¨æˆ·èœå•åŠŸèƒ½
        function showUserMenu() {
            const dropdown = document.getElementById('userMenuDropdown');
            if (dropdown) {
                if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                    dropdown.style.display = 'block';
                    
                    // ç¡®ä¿ä¸‹æ‹‰èœå•ä¸­çš„æ–‡æœ¬ä¹Ÿæ›´æ–°
                    updateTexts();
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ï¼Œç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
                    setTimeout(() => {
                        document.addEventListener('click', closeMenuHandler);
                    }, 100);
                } else {
                    dropdown.style.display = 'none';
                    document.removeEventListener('click', closeMenuHandler);
                }
            }
        }
        
        // å…³é—­èœå•çš„å¤„ç†å‡½æ•°
        function closeMenuHandler(e) {
            const dropdown = document.getElementById('userMenuDropdown');
            const userName = document.getElementById('userName');
            
            // å¦‚æœç‚¹å‡»çš„ä¸æ˜¯ç”¨æˆ·åå’Œä¸‹æ‹‰èœå•ï¼Œåˆ™å…³é—­èœå•
            if (!userName.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
                document.removeEventListener('click', closeMenuHandler);
            }
        }
        
        // é€€å‡ºç™»å½•åŠŸèƒ½
        function logout() {
            // Firebaseè®¤è¯é€€å‡º
            firebase.auth().signOut().then(() => {
                // æ¸…é™¤ç™»å½•çŠ¶æ€
                sessionStorage.removeItem('user');
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = 'login.html';
            }).catch(error => {
                console.error('é€€å‡ºç™»å½•å¤±è´¥:', error);
                // å³ä½¿Firebaseé€€å‡ºå¤±è´¥ï¼Œä¹Ÿæ¸…é™¤æœ¬åœ°çŠ¶æ€
                sessionStorage.removeItem('user');
                window.location.href = 'login.html';
            });
        }
        
        // æ£€æŸ¥æƒé™
        function hasPermission(requiredPosition) {
            // å‡è®¾å½“å‰ç”¨æˆ·æ˜¯ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
            return true;
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            
            // å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
            if (isLoggedIn !== 'true') {
                window.location.href = 'login.html';
            }
        }
        
        // åˆå§‹åŒ–ç³»ç»Ÿ
        function initializeSystem() {
            // Firebaseè®¤è¯å·²ç»å¤„ç†ç™»å½•çŠ¶æ€æ£€æŸ¥
            
            // å»¶è¿Ÿåˆå§‹åŒ–æµ‹è¯•æ•°æ®ï¼Œç¡®ä¿Firebaseæ•°æ®å®Œå…¨åŠ è½½
            setTimeout(() => {
                initializeTestDataSafely();
            }, 3000); // ç­‰å¾…3ç§’ç¡®ä¿æ•°æ®åŠ è½½å®Œæˆ
            
            // åˆå§‹åŒ–äº§å“ç®¡ç†æ•°æ®
            initializeProductData();
            
            // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
            const currentUserStr = localStorage.getItem('currentUser');
            if (currentUserStr) {
                window.currentUser = JSON.parse(currentUserStr);
                
                // æ›´æ–°ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯
                const userNameElement = document.getElementById('userName');
                const userPositionElement = document.getElementById('userPosition');
                
                if (userNameElement && window.currentUser.name) {
                    userNameElement.textContent = window.currentUser.name;
                    // ç§»é™¤data-i18nå±æ€§ï¼Œå› ä¸ºè¿™æ˜¯ç”¨æˆ·çš„å®é™…å§“å
                    userNameElement.removeAttribute('data-i18n');
                }
                
                if (userPositionElement && window.currentUser.position) {
                    // è®¾ç½®æ­£ç¡®çš„data-i18nå±æ€§
                    userPositionElement.setAttribute('data-i18n', window.currentUser.position);
                }
            }
            
            // æ™ºèƒ½åˆå§‹åŒ–è¯­è¨€ï¼ˆæ•´åˆç”¨æˆ·å»ºè®®çš„æ–¹æ¡ˆï¼‰
            initializeLanguageSystem();
            
            // æ˜¾ç¤ºé»˜è®¤å†…å®¹ - æ”¹ä¸ºæ˜¾ç¤ºæ¦‚å†µæ€»è§ˆ
            showContent('dashboard');
            
            // åˆå§‹åŒ–æ–°å¢èŒå‘˜é¡µé¢çš„é»˜è®¤å€¼
            setTimeout(() => {
                const joinDateInput = document.getElementById('employeeJoinDate');
                if (joinDateInput) {
                    joinDateInput.valueAsDate = new Date();
                }
            }, 1000);
        }
        
        // å®‰å…¨çš„åˆå§‹åŒ–æµ‹è¯•æ•°æ® - é˜²æ­¢è¦†ç›–ç°æœ‰æ•°æ®ï¼ˆå…¬å¸æ•°æ®æ¶æ„ï¼‰
        function initializeTestDataSafely() {
            console.log('å¼€å§‹å®‰å…¨æ£€æŸ¥æµ‹è¯•æ•°æ®åˆå§‹åŒ–ï¼ˆå…¬å¸æ•°æ®æ¶æ„ï¼‰...');
            
            const currentUser = firebase.auth().currentUser;
            if (!currentUser) {
                console.log('ç”¨æˆ·æœªç™»å½•ï¼Œè·³è¿‡æµ‹è¯•æ•°æ®åˆå§‹åŒ–');
                return;
            }
            
            // æ£€æŸ¥å…¬å¸çº§åˆ«çš„æ•°æ®æ˜¯å¦å­˜åœ¨
            firebase.database().ref('company').once('value')
                .then((snapshot) => {
                    const companyData = snapshot.val();
                    console.log('Firebaseå…¬å¸æ•°æ®:', companyData);
                    
                    // åªæœ‰å½“å…¬å¸æ•°æ®å®Œå…¨ä¸ºç©ºæ—¶æ‰åˆ›å»ºæµ‹è¯•æ•°æ®
                    if (!companyData || Object.keys(companyData).length === 0) {
                        console.log('å…¬å¸æ•°æ®ä¸ºç©ºï¼Œæ£€æŸ¥ç®¡ç†å‘˜æƒé™ååˆ›å»ºæµ‹è¯•æ•°æ®');
                        checkAdminAndCreateTestData();
                    } else {
                        console.log('å…¬å¸æ•°æ®å·²å­˜åœ¨ï¼Œè·³è¿‡æµ‹è¯•æ•°æ®åˆ›å»º');
                        // æ˜¾ç¤ºæ•°æ®ç»Ÿè®¡
                        if (companyData.employees) {
                            console.log('å·²æœ‰å‘˜å·¥æ•°æ®:', Object.keys(companyData.employees).length, 'æ¡');
                        }
                        if (companyData.salons) {
                            console.log('å·²æœ‰æ²™é¾™æ•°æ®:', Object.keys(companyData.salons).length, 'æ¡');
                        }
                        if (companyData.products) {
                            console.log('å·²æœ‰äº§å“æ•°æ®:', Object.keys(companyData.products).length, 'æ¡');
                        }
                    }
                })
                .catch((error) => {
                    console.error('æ£€æŸ¥Firebaseå…¬å¸æ•°æ®æ—¶å‡ºé”™:', error);
                });
        }

        // æ£€æŸ¥ç®¡ç†å‘˜æƒé™å¹¶åˆ›å»ºæµ‹è¯•æ•°æ®
        function checkAdminAndCreateTestData() {
            if (!firebaseDataManager) {
                console.log('æ•°æ®ç®¡ç†å™¨æœªåˆå§‹åŒ–ï¼Œç¨åé‡è¯•');
                setTimeout(checkAdminAndCreateTestData, 2000);
                return;
            }

            if (firebaseDataManager.hasAdminPermission()) {
                console.log('å½“å‰ç”¨æˆ·æ˜¯ç®¡ç†å‘˜ï¼Œåˆ›å»ºæµ‹è¯•æ•°æ®');
                createInitialCompanyTestData();
            } else {
                console.log('å½“å‰ç”¨æˆ·ä¸æ˜¯ç®¡ç†å‘˜ï¼Œè·³è¿‡æµ‹è¯•æ•°æ®åˆ›å»º');
            }
        }
        
        // åˆ›å»ºå…¬å¸çº§åˆ«çš„åˆå§‹æµ‹è¯•æ•°æ®ï¼ˆåªåœ¨å®Œå…¨æ²¡æœ‰æ•°æ®æ—¶è°ƒç”¨ï¼‰
        function createInitialCompanyTestData() {
            console.log('æ­£åœ¨åˆ›å»ºå…¬å¸çº§åˆ«çš„åˆå§‹æµ‹è¯•æ•°æ®...');
            
            const testEmployees = [
                { 
                    id: 'emp_' + Date.now() + '_1', 
                    name: 'å¼ ç»ç†', 
                    position: 'manager', 
                    mobile: '13800138001',
                    email: 'manager@company.com',
                    joinDate: new Date().toISOString().split('T')[0],
                    bio: 'ç»éªŒä¸°å¯Œçš„ç®¡ç†äººå‘˜',
                    addTime: new Date().toISOString(),
                    addedBy: 'system',
                    status: 'active'
                },
                { 
                    id: 'emp_' + Date.now() + '_2', 
                    name: 'æä¸šåŠ¡', 
                    position: 'salesperson', 
                    mobile: '13800138002',
                    email: 'sales1@company.com',
                    joinDate: new Date().toISOString().split('T')[0],
                    bio: 'ä¼˜ç§€çš„ä¸šåŠ¡ä»£è¡¨',
                    addTime: new Date().toISOString(),
                    addedBy: 'system',
                    status: 'active'
                },
                { 
                    id: 'emp_' + Date.now() + '_3', 
                    name: 'ç‹ä¸šåŠ¡', 
                    position: 'salesperson', 
                    mobile: '13800138003',
                    email: 'sales2@company.com',
                    joinDate: new Date().toISOString().split('T')[0],
                    bio: 'ä¸“ä¸šçš„å®¢æˆ·æœåŠ¡ä¸“å‘˜',
                    addTime: new Date().toISOString(),
                    addedBy: 'system',
                    status: 'active'
                }
            ];
            
            const testSalons = [
                { 
                    id: 'salon_' + Date.now() + '_1', 
                    name: 'åä¸½ç¾å®¹å®¤', 
                    address: 'ì„œìš¸íŠ¹ë³„ì‹œ êµ¬ë¡œêµ¬ êµ¬ë¡œì¤‘ì•™ë¡œ 123', 
                    businessLicense: '123-45-67890',
                    responsibleEmployeeId: testEmployees[1].id,
                    directorName: 'ê¹€ì›ì¥',
                    directorMobile: '010-1234-5678',
                    phone: '02-1234-5678',
                    email: 'salon1@example.com',
                    addTime: new Date().toISOString(),
                    addedBy: 'system',
                    status: 'active'
                },
                { 
                    id: 'salon_' + Date.now() + '_2', 
                    name: 'ì§€ì˜¤í—¤ì–´', 
                    address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 456', 
                    businessLicense: '234-56-78901',
                    responsibleEmployeeId: testEmployees[2].id,
                    directorName: 'ì´ì‚¬ì¥',
                    directorMobile: '010-2345-6789',
                    phone: '02-2345-6789',
                    email: 'salon2@example.com',
                    addTime: new Date().toISOString(),
                    addedBy: 'system',
                    status: 'active'
                },
                { 
                    id: 'salon_' + Date.now() + '_3', 
                    name: 'ë“œë³´ë¼', 
                    address: 'ì„œìš¸íŠ¹ë³„ì‹œ ê¸ˆì²œêµ¬ ê¸ˆì²œë¡œ 789', 
                    businessLicense: '345-67-89012',
                    responsibleEmployeeId: testEmployees[1].id,
                    directorName: 'ë°•ì›ì¥',
                    directorMobile: '010-3456-7890',
                    phone: '02-3456-7890',
                    email: 'salon3@example.com',
                    addTime: new Date().toISOString(),
                    addedBy: 'system',
                    status: 'active'
                }
            ];
            
            // ä½¿ç”¨Firebaseæ•°æ®ç®¡ç†å™¨ä¿å­˜æµ‹è¯•æ•°æ®
            if (firebaseDataManager) {
                firebaseDataManager.saveEmployees(testEmployees)
                    .then(() => {
                        console.log('å‘˜å·¥æµ‹è¯•æ•°æ®ä¿å­˜æˆåŠŸ');
                        return firebaseDataManager.saveSalons(testSalons);
                    })
                    .then(() => {
                        console.log('æ²™é¾™æµ‹è¯•æ•°æ®ä¿å­˜æˆåŠŸ');
                        console.log('å…¬å¸çº§åˆ«æµ‹è¯•æ•°æ®åˆ›å»ºå®Œæˆ');
                    })
                    .catch((error) => {
                        console.error('ä¿å­˜æµ‹è¯•æ•°æ®å¤±è´¥:', error);
                    });
            } else {
                console.error('Firebaseæ•°æ®ç®¡ç†å™¨æœªåˆå§‹åŒ–');
            }
        }

        // ä¿ç•™åŸå§‹å‡½æ•°ç”¨äºå…¼å®¹æ€§
        function createInitialTestData() {
            console.log('createInitialTestDataè¢«è°ƒç”¨ï¼Œè½¬åˆ°å…¬å¸çº§åˆ«æµ‹è¯•æ•°æ®åˆ›å»º');
            createInitialCompanyTestData();
        }
        
        // åŸå§‹çš„åˆå§‹åŒ–æµ‹è¯•æ•°æ®å‡½æ•°ï¼ˆä¿ç•™ç”¨äºå…¼å®¹æ€§ï¼Œä½†ä¸å†ä½¿ç”¨ï¼‰
        function initializeTestData() {
            console.log('initializeTestDataè¢«è°ƒç”¨ï¼Œä½†å·²è¢«initializeTestDataSafelyæ›¿ä»£');
        }
        
        // æ›´æ–°äº§å“åˆ†ç±»
        function updateProductCategory() {
            const categoryId = parseInt(document.getElementById('editCategoryId').value);
            const categoryNameCN = document.getElementById('editCategoryNameCN').value.trim();
            const categoryNameKO = document.getElementById('editCategoryNameKO').value.trim();
            const categoryDescription = document.getElementById('editCategoryDescription').value.trim();
            
            // éªŒè¯è¾“å…¥
            if (!categoryNameCN || !categoryNameKO) {
                alert(getText('fill-category-names'));
                return false;
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒåç§°çš„åˆ†ç±»ï¼ˆæ’é™¤å½“å‰åˆ†ç±»ï¼‰
            const exists = productCategories.some(category => 
                category.id !== categoryId && 
                (category.nameCN === categoryNameCN || category.nameKO === categoryNameKO)
            );
            
            if (exists) {
                alert(getText('category-name-exists-edit'));
                return false;
            }
            
            // æ‰¾åˆ°å¹¶æ›´æ–°åˆ†ç±»
            const categoryIndex = productCategories.findIndex(cat => cat.id === categoryId);
            if (categoryIndex === -1) {
                alert('æœªæ‰¾åˆ°è¯¥äº§å“åˆ†ç±»ï¼');
                return false;
            }
            
            const oldCategory = { ...productCategories[categoryIndex] };
            
            // æ›´æ–°åˆ†ç±»ä¿¡æ¯
            productCategories[categoryIndex] = {
                ...productCategories[categoryIndex],
                nameCN: categoryNameCN,
                nameKO: categoryNameKO,
                description: categoryDescription,
                updateTime: new Date().toISOString(),
                updatedBy: currentUser?.name || 'ç³»ç»Ÿç®¡ç†å‘˜'
            };
            
            // ä¿å­˜åˆ°Firebaseæ•°æ®åº“
            saveProductCategories(productCategories);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'edit', 
                    'category', 
                    categoryId,
                    `${categoryNameCN}`,
                    `ç¼–è¾‘äº§å“åˆ†ç±»ï¼š${oldCategory.nameCN} (${oldCategory.nameKO}) â†’ ${categoryNameCN} (${categoryNameKO})`,
                    oldCategory,
                    productCategories[categoryIndex]
                );
            }
            
            // åˆ·æ–°åˆ†ç±»åˆ—è¡¨
            displayProductCategories();
            
            // å…³é—­æ¨¡æ€æ¡†
            closeEditCategoryModal();
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            alert(getText('category-updated-success'));
            
            return false;
        }
        
        // åˆ é™¤äº§å“åˆ†ç±»
        function deleteProductCategory(categoryId, categoryName) {
            if (!confirm(`ç¡®å®šè¦åˆ é™¤äº§å“åˆ†ç±»"${categoryName}"å—ï¼Ÿ\næ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                return;
            }
            
            // ä¿å­˜è¢«åˆ é™¤çš„åˆ†ç±»ä¿¡æ¯ï¼Œç”¨äºæ“ä½œè®°å½•
            const deletedCategory = productCategories.find(category => category.id === categoryId);
            
            // ä»æ•°ç»„ä¸­åˆ é™¤
            productCategories = productCategories.filter(category => category.id !== categoryId);
            
            // æ›´æ–°Firebaseæ•°æ®åº“
            saveProductCategories(productCategories);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'delete', 
                    'category', 
                    categoryId,
                    categoryName,
                    `åˆ é™¤äº§å“åˆ†ç±»ï¼š${categoryName}`,
                    deletedCategory,
                    null
                );
            }
            
            // åˆ·æ–°åˆ—è¡¨
            displayProductCategories();
            
            alert('äº§å“åˆ†ç±»åˆ é™¤æˆåŠŸï¼');
        }

        // åŠ è½½äº§å“åˆ†ç±»é€‰é¡¹
        function loadProductCategories() {
            const selectElement = document.getElementById('productCategory');
            if (!selectElement) return;
            
            let optionsHtml = `<option value="" data-i18n="please-select-category">${getText('please-select-category')}</option>`;
            
            productCategories.forEach(category => {
                optionsHtml += `<option value="${category.id}">${category.nameCN} / ${category.nameKO}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // é¢„è§ˆäº§å“å›¾ç‰‡
        function previewProductImage(input) {
            const uploadIconArea = document.getElementById('uploadIconArea');
            const imagePreviewArea = document.getElementById('imagePreviewArea');
            const imagePreview = document.getElementById('productImagePreview');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    uploadIconArea.style.display = 'none';
                    imagePreviewArea.style.display = 'block';
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // ç§»é™¤äº§å“å›¾ç‰‡
        function removeProductImage(event) {
            event.stopPropagation();
            
            const uploadIconArea = document.getElementById('uploadIconArea');
            const imagePreviewArea = document.getElementById('imagePreviewArea');
            const productImageInput = document.getElementById('productImageInput');
            
            uploadIconArea.style.display = 'block';
            imagePreviewArea.style.display = 'none';
            productImageInput.value = '';
        }
        
        // æ ¼å¼åŒ–ä»·æ ¼è¾“å…¥
        function formatPriceInput(input) {
            // åªå…è®¸è¾“å…¥æ•°å­—å’Œå°æ•°ç‚¹
            let value = input.value.replace(/[^\d.]/g, '');
            
            // ç¡®ä¿åªæœ‰ä¸€ä¸ªå°æ•°ç‚¹
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts[0] + '.' + parts.slice(1).join('');
            }
            
            // æ ¼å¼åŒ–æ˜¾ç¤º
            if (value && !isNaN(parseFloat(value))) {
                const numValue = parseFloat(value);
                input.value = formatNumber(numValue);
            } else if (value === '') {
                input.value = '';
            }
        }
        
        // æ ¼å¼åŒ–æ•°å­—ä¸ºåƒåˆ†ä½
        function formatNumber(num) {
            return num.toLocaleString('en-US');
        }
        
        // æ ¼å¼åŒ–è´§å¸æ˜¾ç¤º
        function formatCurrency(amount) {
            return 'â‚© ' + formatNumber(amount);
        }
        
        // å¤„ç†åˆ›å»ºäº§å“åˆ†ç±»è¡¨å•æäº¤ - ä½¿ç”¨DOMåŠ è½½äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            const createCategoryForm = document.getElementById('createCategoryForm');
            if (createCategoryForm) {
                createCategoryForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitCreateCategory();
                });
            }
        });
        
        // å¤„ç†ç¼–è¾‘äº§å“åˆ†ç±»è¡¨å•æäº¤ - ä½¿ç”¨DOMåŠ è½½äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            const editCategoryForm = document.getElementById('editCategoryForm');
            if (editCategoryForm) {
                editCategoryForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    updateProductCategory();
                });
            }
        });
        
        // ==================== äº§å“ç®¡ç†åŠŸèƒ½ ====================
        
        // è·å–äº§å“åˆ—è¡¨
        // è·å–äº§å“æ•°æ®ï¼ˆå·²åœ¨Firebaseå°è£…ä¸­é‡æ–°å®šä¹‰ï¼‰
        // function getProducts() å·²åœ¨Firebaseå°è£…ä¸­å®ç°
        
        // ä¿å­˜äº§å“åˆ—è¡¨ï¼ˆå·²åœ¨Firebaseå°è£…ä¸­é‡æ–°å®šä¹‰ï¼‰
        // function saveProducts(products) å·²åœ¨Firebaseå°è£…ä¸­å®ç°
        
        // æ·»åŠ äº§å“
        function addProduct(product) {
            const products = getProducts();
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒç¼–ç çš„äº§å“
            if (product.code && products.some(p => p.code === product.code)) {
                return false;
            }
            
            // æ·»åŠ äº§å“IDå’Œåˆ›å»ºæ—¶é—´
            product.id = Date.now();
            product.createTime = new Date().toISOString();
            product.createdBy = currentUser?.name || 'ç³»ç»Ÿç®¡ç†å‘˜';
            
            products.push(product);
            saveProducts(products);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'create',
                    'product',
                    product.id,
                    `${product.nameCN}`,
                    `åˆ›å»ºäº§å“ï¼š${product.nameCN} (${product.nameKO})`,
                    null,
                    product
                );
            }
            
            return true;
        }
        
        // æ˜¾ç¤ºäº§å“åˆ—è¡¨
        function displayProductList() {
            const products = getProducts();
            const container = document.getElementById('product-list');
            
            if (!container) return;
            
            // æ·»åŠ äº§å“åˆ—è¡¨æ ‡é¢˜å’Œæœç´¢æ¡†
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <p data-i18n="product-list-desc">ç®¡ç†æ‰€æœ‰äº§å“ä¿¡æ¯</p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="productSearchInput" placeholder="${getText('search-products')}" oninput="searchProducts()" style="padding: 8px 12px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                        <select id="productCategoryFilter" onchange="searchProducts()" style="padding: 8px 12px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px;">
                            <option value="" data-i18n="all-categories">æ‰€æœ‰åˆ†ç±»</option>
                        </select>
                    </div>
                </div>
            `;
            
            // æ·»åŠ äº§å“è¡¨æ ¼
            html += `
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                        <thead>
                            <tr style="background: rgba(212, 175, 55, 0.1); border-bottom: 2px solid var(--gold);">
                                <th style="padding: 12px 15px; text-align: left; color: var(--gold);" data-i18n="product-name">äº§å“åç§°</th>
                                <th style="padding: 12px 15px; text-align: left; color: var(--gold);" data-i18n="product-category">åˆ†ç±»</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="product-code">ç¼–ç </th>
                                <th style="padding: 12px 15px; text-align: right; color: var(--gold);" data-i18n="product-price">å•ä»·</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="stock">åº“å­˜</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="status">çŠ¶æ€</th>
                                <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="actions">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="productTableBody">
            `;
            
            // å¡«å……äº§å“æ•°æ®
            if (products.length === 0) {
                html += `
                    <tr>
                        <td colspan="7" style="padding: 20px; text-align: center; color: #cccccc;" data-i18n="no-products">æš‚æ— äº§å“æ•°æ®</td>
                    </tr>
                `;
            } else {
                products.forEach(product => {
                    // è·å–äº§å“åˆ†ç±»åç§°
                    let categoryName = '';
                    if (product.categoryId) {
                        const category = productCategories.find(c => c.id === parseInt(product.categoryId));
                        if (category) {
                            categoryName = category.nameCN;
                        }
                    }
                    
                    // æ ¼å¼åŒ–ä»·æ ¼
                    const formattedPrice = formatCurrency(parseFloat(product.price) || 0);
                    
                    // çŠ¶æ€æ ‡ç­¾
                    const statusLabel = product.isActive ? 
                        `<span style="background: #4CAF50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="active">å¯ç”¨</span>` : 
                        `<span style="background: #f44336; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="inactive">åœç”¨</span>`;
                    
                    // ä¿ƒé”€æ ‡ç­¾
                    const promotionalLabel = product.isPromotional ? 
                        `<span style="background: #FF9800; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; margin-left: 5px;" data-i18n="promotional">ä¿ƒé”€</span>` : 
                        '';
                    
                    html += `
                        <tr style="border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                            <td style="padding: 12px 15px;">
                                <div style="font-weight: bold; color: var(--text-light);">${product.nameCN}</div>
                                <div style="font-size: 0.9em; color: #aaaaaa;">${product.nameKO}</div>
                            </td>
                            <td style="padding: 12px 15px; color: #cccccc;">${categoryName || '-'}</td>
                            <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.code || '-'}</td>
                            <td style="padding: 12px 15px; text-align: right; color: var(--gold);">${formattedPrice}</td>
                            <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.stock || '0'}</td>
                            <td style="padding: 12px 15px; text-align: center;">
                                ${statusLabel}
                                ${promotionalLabel}
                            </td>
                            <td style="padding: 12px 15px; text-align: center;">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button onclick="viewProductDetail(${product.id})" style="background: var(--gold); color: var(--black); border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="view">æŸ¥çœ‹</button>
                                    <button onclick="editProduct(${product.id})" style="background: #4CAF50; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="edit-btn">ç¼–è¾‘</button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
            }
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            container.innerHTML = html;
            
            // æ›´æ–°äº§å“åˆ†ç±»ç­›é€‰é€‰é¡¹
            updateProductCategoryFilterOptions();
            
            // æ›´æ–°ç¿»è¯‘
            updateTexts();
        }
        
        // æ›´æ–°äº§å“åˆ†ç±»ç­›é€‰é€‰é¡¹
        function updateProductCategoryFilterOptions() {
            const selectElement = document.getElementById('productCategoryFilter');
            if (!selectElement) return;
            
            let optionsHtml = `<option value="" data-i18n="all-categories">${getText('all-categories')}</option>`;
            
            productCategories.forEach(category => {
                optionsHtml += `<option value="${category.id}">${category.nameCN}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // æœç´¢äº§å“
        function searchProducts() {
            const searchInput = document.getElementById('productSearchInput');
            const categoryFilter = document.getElementById('productCategoryFilter');
            
            if (!searchInput || !categoryFilter) return;
            
            const searchTerm = searchInput.value.toLowerCase();
            const categoryId = categoryFilter.value ? parseInt(categoryFilter.value) : null;
            
            const products = getProducts();
            const filteredProducts = products.filter(product => {
                const matchesSearch = 
                    !searchTerm || 
                    product.nameCN.toLowerCase().includes(searchTerm) ||
                    product.nameKO.toLowerCase().includes(searchTerm) ||
                    (product.code && product.code.toLowerCase().includes(searchTerm)) ||
                    (product.description && product.description.toLowerCase().includes(searchTerm));
                
                const matchesCategory = !categoryId || product.categoryId === categoryId;
                
                return matchesSearch && matchesCategory;
            });
            
            // æ›´æ–°äº§å“è¡¨æ ¼
            updateProductTable(filteredProducts);
        }
        
        // æ›´æ–°äº§å“è¡¨æ ¼
        function updateProductTable(products) {
            const tableBody = document.getElementById('productTableBody');
            if (!tableBody) return;
            
            if (products.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="padding: 20px; text-align: center; color: #cccccc;" data-i18n="no-products-found">æœªæ‰¾åˆ°åŒ¹é…çš„äº§å“</td>
                    </tr>
                `;
                updateTexts();
                return;
            }
            
            let html = '';
            products.forEach(product => {
                // è·å–äº§å“åˆ†ç±»åç§°
                let categoryName = '';
                if (product.categoryId) {
                    const category = productCategories.find(c => c.id === parseInt(product.categoryId));
                    if (category) {
                        categoryName = category.nameCN;
                    }
                }
                
                // æ ¼å¼åŒ–ä»·æ ¼
                const formattedPrice = formatCurrency(parseFloat(product.price) || 0);
                
                // çŠ¶æ€æ ‡ç­¾
                const statusLabel = product.isActive ? 
                    `<span style="background: #4CAF50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="active">å¯ç”¨</span>` : 
                    `<span style="background: #f44336; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em;" data-i18n="inactive">åœç”¨</span>`;
                
                // ä¿ƒé”€æ ‡ç­¾
                const promotionalLabel = product.isPromotional ? 
                    `<span style="background: #FF9800; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; margin-left: 5px;" data-i18n="promotional">ä¿ƒé”€</span>` : 
                    '';
                
                html += `
                    <tr style="border-bottom: 1px solid rgba(212, 175, 55, 0.2);">
                        <td style="padding: 12px 15px;">
                            <div style="font-weight: bold; color: var(--text-light);">${product.nameCN}</div>
                            <div style="font-size: 0.9em; color: #aaaaaa;">${product.nameKO}</div>
                        </td>
                        <td style="padding: 12px 15px; color: #cccccc;">${categoryName || '-'}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.code || '-'}</td>
                        <td style="padding: 12px 15px; text-align: right; color: var(--gold);">${formattedPrice}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${product.stock || '0'}</td>
                        <td style="padding: 12px 15px; text-align: center;">
                            ${statusLabel}
                            ${promotionalLabel}
                        </td>
                        <td style="padding: 12px 15px; text-align: center;">
                            <div style="display: flex; gap: 5px; justify-content: center;">
                                <button onclick="viewProductDetail(${product.id})" style="background: var(--gold); color: var(--black); border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="view">æŸ¥çœ‹</button>
                                <button onclick="editProduct(${product.id})" style="background: #4CAF50; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 0.8em;" data-i18n="edit-btn">ç¼–è¾‘</button>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            updateTexts();
        }
        
        // å¤„ç†æ·»åŠ äº§å“è¡¨å•æäº¤
        document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // è·å–è¡¨å•æ•°æ®
            const productNameCN = document.getElementById('productNameCN').value.trim();
            const productNameKO = document.getElementById('productNameKO').value.trim();
            const productCategory = document.getElementById('productCategory').value;
            const productCode = document.getElementById('productCode').value.trim();
            const productPrice = document.getElementById('productPrice').value.replace(/[^\d.]/g, '');
            const productVolumePerUnit = document.getElementById('productVolumePerUnit').value.trim();
            const productBrand = document.getElementById('productBrand').value.trim();
            const productDescription = document.getElementById('productDescription').value.trim();
            
            // åº“å­˜ä¿¡æ¯
            const initialStock = parseInt(document.getElementById('initialStock').value) || 0;
            const minimumStock = parseInt(document.getElementById('minimumStock').value) || 0;
            const stockLocation = document.getElementById('stockLocation').value.trim();
            const enableAutoReorder = document.getElementById('enableAutoReorder').checked;
            
            // å…¶ä»–è®¾ç½®
            const isActive = document.getElementById('isActive').checked;
            const isPromotional = document.getElementById('isPromotional').checked;
            const productTags = document.getElementById('productTags').value.trim();
            
            // å›¾ç‰‡æ•°æ®
            const productImageInput = document.getElementById('productImageInput');
            let imageData = null;
            if (productImageInput.files && productImageInput.files[0]) {
                const reader = new FileReader();
                reader.readAsDataURL(productImageInput.files[0]);
                reader.onload = function(e) {
                    imageData = e.target.result;
                    
                    // ç»§ç»­æäº¤äº§å“
                    submitProduct();
                };
            } else {
                // æ²¡æœ‰å›¾ç‰‡ï¼Œç›´æ¥æäº¤äº§å“
                submitProduct();
            }
            
            // æäº¤äº§å“å‡½æ•°
            function submitProduct() {
                // éªŒè¯å¿…å¡«å­—æ®µ
                if (!productNameCN || !productNameKO) {
                    alert(getText('product-name-required'));
                    return;
                }
                
                // åˆ›å»ºäº§å“å¯¹è±¡
                const product = {
                    nameCN: productNameCN,
                    nameKO: productNameKO,
                    categoryId: productCategory || null,
                    code: productCode,
                    price: parseFloat(productPrice) || 0,
                    volumePerUnit: productVolumePerUnit,
                    brand: productBrand,
                    description: productDescription,
                    stock: initialStock,
                    minimumStock: minimumStock,
                    stockLocation: stockLocation,
                    enableAutoReorder: enableAutoReorder,
                    isActive: isActive,
                    isPromotional: isPromotional,
                    tags: productTags ? productTags.split(',').map(tag => tag.trim()) : [],
                    imageData: imageData
                };
                
                // æ·»åŠ äº§å“
                if (addProduct(product)) {
                    alert(getText('product-added-success'));
                    
                    // æ¸…ç©ºè¡¨å•
                    document.getElementById('addProductForm').reset();
                    
                    // é‡ç½®å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ
                    const uploadIconArea = document.getElementById('uploadIconArea');
                    const imagePreviewArea = document.getElementById('imagePreviewArea');
                    if (uploadIconArea && imagePreviewArea) {
                        uploadIconArea.style.display = 'block';
                        imagePreviewArea.style.display = 'none';
                    }
                    
                    // è·³è½¬åˆ°äº§å“åˆ—è¡¨
                    showContent('product-list');
                } else {
                    alert(getText('product-code-exists'));
                }
            }
        });
        
        // ==================== èŒå‘˜ç®¡ç†åŠŸèƒ½ ====================
        
        // è·å–èŒå‘˜åˆ—è¡¨
        // è·å–èŒå‘˜æ•°æ®ï¼ˆå·²åœ¨Firebaseå°è£…ä¸­é‡æ–°å®šä¹‰ï¼‰
        // function getEmployees() å·²åœ¨Firebaseå°è£…ä¸­å®ç°
        
        // ä¿å­˜èŒå‘˜åˆ—è¡¨ï¼ˆå·²åœ¨Firebaseå°è£…ä¸­é‡æ–°å®šä¹‰ï¼‰
        // function saveEmployees(employees) å·²åœ¨Firebaseå°è£…ä¸­å®ç°
        
        // æ·»åŠ èŒå‘˜
        function addEmployee(employee) {
            const employees = getEmployees();
            
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒé‚®ç®±çš„èŒå‘˜ï¼ˆå¦‚æœæœ‰é‚®ç®±ï¼‰
            if (employee.email && employees.some(e => e.email === employee.email)) {
                return false;
            }
            
            // æ·»åŠ èŒå‘˜IDå’Œåˆ›å»ºæ—¶é—´
            employee.id = Date.now();
            employee.createTime = new Date().toISOString();
            employee.status = 'active'; // é»˜è®¤çŠ¶æ€ä¸ºæ´»è·ƒ
            
            employees.push(employee);
            saveEmployees(employees);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'create',
                    'employee',
                    employee.id,
                    employee.name,
                    `åˆ›å»ºèŒå‘˜ï¼š${employee.name}`,
                    null,
                    employee
                );
            }
            
            return true;
        }
        
        // æ›´æ–°èŒå‘˜
        function updateEmployee(updatedEmployee) {
            const employees = getEmployees();
            const index = employees.findIndex(e => e.id === updatedEmployee.id);
            
            if (index === -1) return false;
            
            // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨ï¼ˆæ’é™¤å½“å‰èŒå‘˜ï¼‰
            if (updatedEmployee.username && employees.some(e => e.username === updatedEmployee.username && e.id !== updatedEmployee.id)) {
                return false;
            }
            
            const oldEmployee = { ...employees[index] };
            
            // å¦‚æœæ²¡æœ‰æä¾›æ–°å¯†ç ï¼Œä¿ç•™æ—§å¯†ç 
            if (!updatedEmployee.password) {
                updatedEmployee.password = oldEmployee.password;
            }
            
            // æ›´æ–°èŒå‘˜ä¿¡æ¯
            employees[index] = {
                ...oldEmployee,
                ...updatedEmployee,
                updateTime: new Date().toISOString()
            };
            
            saveEmployees(employees);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'edit',
                    'employee',
                    updatedEmployee.id,
                    updatedEmployee.name,
                    `ç¼–è¾‘èŒå‘˜ï¼š${oldEmployee.name} â†’ ${updatedEmployee.name}`,
                    oldEmployee,
                    employees[index]
                );
            }
            
            return true;
        }
        
        // åˆ é™¤èŒå‘˜
        function deleteEmployee(employeeId) {
            const employees = getEmployees();
            const employeeToDelete = employees.find(e => e.id === employeeId);
            
            if (!employeeToDelete) return false;
            
            // ä»æ•°ç»„ä¸­åˆ é™¤
            const newEmployees = employees.filter(e => e.id !== employeeId);
            saveEmployees(newEmployees);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'delete',
                    'employee',
                    employeeId,
                    employeeToDelete.name,
                    `åˆ é™¤èŒå‘˜ï¼š${employeeToDelete.name}`,
                    employeeToDelete,
                    null
                );
            }
            
            return true;
        }
        
        // æ˜¾ç¤ºèŒå‘˜åˆ—è¡¨
        function displayEmployeeList() {
            const employees = getEmployees();
            const container = document.getElementById('employee-list-content');
            
            if (!container) return;
            
            if (employees.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-employees">æš‚æ— èŒå‘˜æ•°æ®</p>`;
                updateTexts();
                return;
            }
            
            // åˆ›å»ºèŒå‘˜åˆ—è¡¨è¡¨æ ¼
            let html = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: rgba(212, 175, 55, 0.1); border-bottom: 2px solid var(--gold);">
                            <th style="padding: 12px 15px; text-align: left; color: var(--gold);" data-i18n="employee-name">å§“å</th>
                            <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="employee-position">èŒä½</th>
                            <th style="padding: 12px 15px; text-align: center; color: var(--gold);" data-i18n="employee-mobile">æ‰‹æœºå·</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            employees.forEach(employee => {
                // è·å–èŒä½æ–‡æœ¬
                let positionText = '';
                switch (employee.position) {
                    case 'admin': positionText = getText('admin'); break;
                    case 'manager': positionText = getText('manager'); break;
                    case 'salesperson': positionText = getText('salesperson'); break;
                    default: positionText = employee.position;
                }
                
                html += `
                    <tr style="border-bottom: 1px solid rgba(212, 175, 55, 0.2); cursor: pointer;" onclick="showEmployeeDetail(${employee.id})">
                        <td style="padding: 12px 15px; color: var(--gold); text-decoration: underline;">${employee.name}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${positionText}</td>
                        <td style="padding: 12px 15px; text-align: center; color: #cccccc;">${employee.mobile || '-'}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
            `;
            
            container.innerHTML = html;
            updateTexts();
        }
        
        // ç¡®è®¤åˆ é™¤èŒå‘˜
        function confirmDeleteEmployee(employeeId, employeeName) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤èŒå‘˜"${employeeName}"å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                if (deleteEmployee(employeeId)) {
                    alert(getText('employee-deleted-success'));
                    displayEmployeeList();
                } else {
                    alert(getText('employee-delete-failed'));
                }
            }
        }
        
        // æ›´æ–°åˆ é™¤èŒå‘˜é€‰é¡¹
        function updateDeleteEmployeeOptions() {
            const selectElement = document.getElementById('deleteEmployeeSelect');
            if (!selectElement) return;
            
            const employees = getEmployees();
            
            let optionsHtml = `<option value="" data-i18n="please-select-employee">${getText('please-select-employee')}</option>`;
            
            employees.forEach(employee => {
                optionsHtml += `<option value="${employee.id}">${employee.name} (${employee.position === 'admin' ? getText('admin') : employee.position === 'manager' ? getText('manager') : getText('salesperson')})</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
        }
        
        // åˆ é™¤é€‰å®šçš„èŒå‘˜
        function deleteSelectedEmployee() {
            const selectElement = document.getElementById('deleteEmployeeSelect');
            const employeeId = parseInt(selectElement.value);
            
            if (!employeeId) {
                alert(getText('please-select-employee'));
                return;
            }
            
            const employees = getEmployees();
            const employee = employees.find(e => e.id === employeeId);
            
            if (!employee) {
                alert(getText('employee-not-found'));
                return;
            }
            
            if (confirm(`ç¡®å®šè¦åˆ é™¤èŒå‘˜"${employee.name}"å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`)) {
                if (deleteEmployee(employeeId)) {
                    alert(getText('employee-deleted-success'));
                    updateDeleteEmployeeOptions();
                } else {
                    alert(getText('employee-delete-failed'));
                }
            }
        }
        
        // æœç´¢æ²™é¾™
        function searchSalons() {
            const searchInput = document.getElementById('salonSearchInput');
            const responsibleFilter = document.getElementById('responsibleFilter');
            
            if (!searchInput || !responsibleFilter) return;
            
            const searchTerm = searchInput.value.trim();
            const responsibleId = responsibleFilter.value ? parseInt(responsibleFilter.value) : null;
            
            // æœç´¢æ—¶é‡ç½®åˆ°ç¬¬ä¸€é¡µ
            displaySalonList({
                search: searchTerm,
                responsibleId: responsibleId
            }, 1);
        }
        
        // æ›´æ–°è´Ÿè´£èŒå‘˜é€‰é¡¹
        function updateResponsibleEmployeeOptions() {
            const responsibleSelect = document.getElementById('responsibleEmployee');
            const responsibleBatchSelect = document.getElementById('responsibleEmployeeSelect');
            
            const employees = getEmployees();
            let optionsHtml = `<option value="">${getText('please-select-employee')}</option>`;
            
            employees.forEach(employee => {
                optionsHtml += `<option value="${employee.id}">${employee.name}</option>`;
            });
            
            if (responsibleSelect) {
                responsibleSelect.innerHTML = optionsHtml;
            }
            
            if (responsibleBatchSelect) {
                responsibleBatchSelect.innerHTML = optionsHtml;
            }
        }
        
        // æ£€æŸ¥æ‰¹é‡ä¸Šä¼ æƒé™
        function checkBatchUploadPermission() {
            // è¿™é‡Œå¯ä»¥å®ç°æƒé™æ£€æŸ¥é€»è¾‘
        }
        
        // é¢„è§ˆæ²™é¾™æ–‡ä»¶
        function previewSalonFile(input) {
            const file = input.files[0];
            if (file) {
                const fileName = document.getElementById('fileName');
                const fileUploadIconArea = document.getElementById('fileUploadIconArea');
                const filePreviewArea = document.getElementById('filePreviewArea');
                
                fileName.textContent = file.name;
                fileUploadIconArea.style.display = 'none';
                filePreviewArea.style.display = 'block';
            }
        }
        
        // ç§»é™¤æ²™é¾™æ–‡ä»¶
        function removeSalonFile(event) {
            event.stopPropagation();
            
            const fileInput = document.getElementById('salonFileInput');
            const fileUploadIconArea = document.getElementById('fileUploadIconArea');
            const filePreviewArea = document.getElementById('filePreviewArea');
            
            fileInput.value = '';
            fileUploadIconArea.style.display = 'block';
            filePreviewArea.style.display = 'none';
        }
        
        // å¤„ç†æ²™é¾™æ–‡ä»¶
        function processSalonFile() {
            // æ£€æŸ¥SheetJSåº“æ˜¯å¦å·²åŠ è½½
            if (typeof XLSX === 'undefined') {
                alert('Excelå¤„ç†åº“å°šæœªåŠ è½½å®Œæˆï¼Œè¯·ç¨åå†è¯•ï¼');
                return;
            }
            
            const fileInput = document.getElementById('salonFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert(getText('please-select-file'));
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶ç±»å‹
            const fileName = file.name.toLowerCase();
            if (!fileName.endsWith('.xlsx') && !fileName.endsWith('.xls')) {
                alert('ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼è¯·ä¸Šä¼ Excelæ–‡ä»¶ï¼ˆ.xlsxæˆ–.xlsæ ¼å¼ï¼‰');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = e.target.result;
                    const workbook = XLSX.read(data, { type: 'binary' });
                    
                    // è§£æExcelæ–‡ä»¶
                    batchSalonData = parseExcelFile(workbook);
                    
                    if (batchSalonData.length === 0) {
                        alert('Excelæ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„æ²™é¾™æ•°æ®');
                        return;
                    }
                    
                    // æ˜¾ç¤ºé¢„è§ˆ
                    displayBatchPreview();
                    alert(`æ–‡ä»¶å¤„ç†æˆåŠŸï¼å…±è§£æå‡º ${batchSalonData.length} ä¸ªæ²™é¾™ä¿¡æ¯`);
                    
                } catch (error) {
                    alert('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);
                    console.error('Excelè§£æé”™è¯¯:', error);
                }
            };
            
            reader.onerror = function() {
                alert('æ–‡ä»¶è¯»å–å¤±è´¥');
            };
            
            reader.readAsBinaryString(file);
        }
        
        // è‡ªåŠ¨è¯†åˆ«åœ°å€ä¸­çš„åŒºåŸŸï¼ˆä½¿ç”¨åŠ¨æ€åŒºåŸŸæ•°æ®ï¼‰
        function autoDetectDistrict(address) {
            if (!address) return 'others'; // æ²¡æœ‰åœ°å€çš„é»˜è®¤ä¸ºå…¶ä»–åœ°åŒº
            
            const addressStr = address.toString().toLowerCase();
            
            // è·å–åŠ¨æ€åŒºåŸŸæ•°æ®
            let districts = [];
            try {
                districts = getDistricts();
            } catch (e) {
                console.error('è·å–åŒºåŸŸæ•°æ®å¤±è´¥:', e);
                // å¦‚æœè·å–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤çš„ç¡¬ç¼–ç åŒ¹é…
                if (addressStr.includes('ì˜ë“±í¬êµ¬') || addressStr.includes('æ°¸ç™»æµ¦åŒº')) {
                    return 'yeongdeungpo';
                } else if (addressStr.includes('êµ¬ë¡œêµ¬') || addressStr.includes('ä¹è€åŒº')) {
                    return 'guro';
                } else if (addressStr.includes('ê¸ˆì²œêµ¬') || addressStr.includes('è¡¿å·åŒº')) {
                    return 'geumcheon';
                } else if (addressStr.includes('ì–‘ì²œêµ¬') || addressStr.includes('é˜³å·åŒº')) {
                    return 'yangcheon';
                } else if (addressStr.includes('ê°•ì„œêµ¬') || addressStr.includes('æ±Ÿè¥¿åŒº')) {
                    return 'gangso';
                }
            }
            
            // ä½¿ç”¨åŠ¨æ€åŒºåŸŸæ•°æ®è¿›è¡ŒåŒ¹é…
            for (const district of districts) {
                for (const keyword of district.keywords) {
                    if (addressStr.includes(keyword.toLowerCase())) {
                        return district.code;
                    }
                }
            }
            
            // æµ·å¤–åŒºåŸŸåˆ¤æ–­
            if (!addressStr.includes('ì„œìš¸') && !addressStr.includes('seoul') && !addressStr.includes('é¦–å°”') && 
                !addressStr.includes('ëŒ€í•œë¯¼êµ­') && !addressStr.includes('í•œêµ­') && !addressStr.includes('ä¸­å›½') && 
                !addressStr.includes('ë¶€ì‚°') && !addressStr.includes('ëŒ€êµ¬') && !addressStr.includes('ì¸ì²œ')) {
                // å¦‚æœåœ°å€ä¸­ä¸åŒ…å«éŸ©å›½ä¸»è¦åŸå¸‚ç›¸å…³å­—æ ·ï¼Œå¯èƒ½æ˜¯æµ·å¤–åŒºåŸŸ
                return 'overseas';
            }
            
            return 'others'; // æ— æ³•è¯†åˆ«çš„åŒºåŸŸè‡ªåŠ¨å½’ç±»ä¸ºå…¶ä»–åœ°åŒº
        }
        
        // è·å–åŒºåŸŸæ˜¾ç¤ºæ–‡æœ¬ï¼ˆä½¿ç”¨åŠ¨æ€åŒºåŸŸæ•°æ®ï¼‰
        function getDistrictDisplayText(district) {
            if (!district) return getText('district-others');
            
            // ç‰¹æ®ŠåŒºåŸŸå¤„ç†
            if (district === 'others') return getText('district-others');
            if (district === 'overseas') return getText('district-overseas');
            
            // å°è¯•ä»åŠ¨æ€åŒºåŸŸæ•°æ®è·å–
            try {
                const districts = getDistricts();
                const districtData = districts.find(d => d.code === district);
                if (districtData) {
                    const currentLanguage = localStorage.getItem('language') || 'zh';
                    return currentLanguage === 'ko' ? districtData.nameKr : districtData.nameCn;
                }
            } catch (e) {
                console.error('è·å–åŒºåŸŸæ˜¾ç¤ºæ–‡æœ¬å¤±è´¥:', e);
            }
            
            // å›é€€åˆ°å¤šè¯­è¨€æ–‡æœ¬ç³»ç»Ÿ
            const textKey = `district-${district}`;
            const displayText = getText(textKey);
            
            // å¦‚æœå¤šè¯­è¨€ç³»ç»Ÿä¸­æ²¡æœ‰å¯¹åº”çš„æ–‡æœ¬ï¼Œè¿”å›é»˜è®¤å€¼
            if (displayText === textKey) {
                return getText('district-others');
            }
            
            return displayText;
        }
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºéœ€è¦æ’é™¤çš„ä¸šåŠ¡ç±»å‹ï¼ˆçš®è‚¤ç®¡ç†åº—ã€ç¾ç”²åº—ç­‰ï¼‰
        function isExcludedBusinessType(name, address) {
            const excludeKeywords = [
                // çš®è‚¤ç®¡ç†ç›¸å…³éŸ©æ–‡å…³é”®è¯
                'í”¼ë¶€ê´€ë¦¬', 'í”¼ë¶€', 'ìŠ¤í‚¨ì¼€ì–´', 'ì—ìŠ¤í…Œí‹±', 'ê´€ë¦¬ì‹¤',
                // ç¾ç”²ç›¸å…³éŸ©æ–‡å…³é”®è¯
                'ë„¤ì¼', 'ë„¤ì¼ì•„íŠ¸', 'ë„¤ì¼ìƒµ', 'ë§¤ë‹ˆíì–´', 'í˜ë””íì–´',
                // å…¶ä»–éç¾å‘ä¸šåŠ¡éŸ©æ–‡å…³é”®è¯
                'ë§ˆì‚¬ì§€', 'ì™ì‹±', 'ë¬¸ì‹ ', 'íƒ€íˆ¬', 'ë°˜ì˜êµ¬', 'ì•„ì´ë¼ì‹œ',
                'ì†ëˆˆì¹', 'ëˆˆì¹', 'ë©”ì´í¬ì—…', 'í™”ì¥', 'ë·°í‹°ìƒµ', 'ì„±í˜•',
                // ä¸­æ–‡å…³é”®è¯
                'çš®è‚¤ç®¡ç†', 'ç¾ç”²', 'çº¹èº«', 'æŒ‰æ‘©', 'ç¾å®¹é™¢', 'åŒ–å¦†',
                'çœ‰æ¯›', 'ç«æ¯›', 'åŠæ°¸ä¹…', 'ç¾ç«', 'ç¾ç”²åº—', 'æŠ¤è‚¤',
                // è‹±æ–‡å…³é”®è¯
                'nail', 'skincare', 'massage', 'tattoo', 'makeup', 'beauty'
            ];
            
            const combinedText = (name + ' ' + address).toLowerCase();
            
            return excludeKeywords.some(keyword => {
                return combinedText.includes(keyword.toLowerCase());
            });
        }
        
        // è§£æExcelæ–‡ä»¶
        function parseExcelFile(workbook) {
            // æ£€æŸ¥æ˜¯å¦æœ‰å·¥ä½œè¡¨
            if (!workbook.SheetNames || workbook.SheetNames.length === 0) {
                throw new Error('Excelæ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°å·¥ä½œè¡¨');
            }
            
            // è·å–ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨
            const sheetName = workbook.SheetNames[0];
            const worksheet = workbook.Sheets[sheetName];
            
            if (!worksheet) {
                throw new Error(`æ— æ³•è¯»å–å·¥ä½œè¡¨ï¼š${sheetName}`);
            }
            
            // è½¬æ¢ä¸ºJSONæ ¼å¼
            const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
            
            if (jsonData.length === 0) {
                throw new Error('å·¥ä½œè¡¨ä¸­æ²¡æœ‰æ•°æ®');
            }
            
            if (jsonData.length < 3) {
                throw new Error('å·¥ä½œè¡¨æ•°æ®ä¸è¶³ï¼Œè‡³å°‘éœ€è¦3è¡Œï¼ˆæ ‡é¢˜è¡Œ+åˆ—æ ‡é¢˜è¡Œ+æ•°æ®è¡Œï¼‰');
            }
            
            // ä»ç¬¬äºŒè¡Œå¼€å§‹æŸ¥æ‰¾åˆ—æ ‡é¢˜ï¼ˆç´¢å¼•ä¸º1ï¼‰
            const headers = jsonData[1] || [];
            
            // æŸ¥æ‰¾æ²™é¾™åç§°åˆ—
            const nameIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return headerStr.includes('ì—…ì†Œëª…') || 
                       headerStr.includes('ì‚¬ì—…ìëª…') || 
                       headerStr.includes('ì—…ì²´ëª…') ||
                       headerStr.includes('ìƒí˜¸ëª…') ||
                       headerStr.includes('ìƒí˜¸') ||
                       headerStr.includes('ë¯¸ìš©ì‹¤') ||
                       headerStr.includes('í—¤ì–´ìƒµ') ||
                       headerStr.includes('ì‚´ë¡±') ||
                       headerStr.includes('ë§¤ì¥ëª…') ||
                       headerStr.includes('ì í¬ëª…') ||
                       headerStr.includes('ë¦¬ìŠ¤íŠ¸') ||
                       (headerStr.includes('ì´ë¦„') && !headerStr.includes('ëŒ€í‘œ')) ||
                       headerStr.includes('name');
            });
            
            // æŸ¥æ‰¾åœ°å€åˆ—
            const addressIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return (headerStr.includes('ì˜ì—…ì†Œ') && headerStr.includes('ì£¼ì†Œ')) || 
                       headerStr.includes('ì£¼ì†Œ') ||
                       headerStr.includes('ìœ„ì¹˜') ||
                       headerStr.includes('ì†Œì¬ì§€') ||
                       headerStr.includes('address') ||
                       headerStr.includes('location');
            });
            
            // æŸ¥æ‰¾åº—é“ºç”µè¯åˆ—
            const phoneIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return headerStr.includes('ì „í™”ë²ˆí˜¸') ||
                       headerStr.includes('ì „í™”') ||
                       headerStr.includes('ë§¤ì¥ì „í™”') ||
                       headerStr.includes('ì—…ì†Œì „í™”') ||
                       headerStr.includes('ì—°ë½ì²˜') ||
                       (headerStr.includes('phone') && !headerStr.includes('mobile')) ||
                       headerStr.includes('tel');
            });
            
            // æŸ¥æ‰¾é™¢é•¿å§“ååˆ—
            const directorNameIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return headerStr.includes('ëŒ€í‘œìëª…') ||
                       headerStr.includes('ëŒ€í‘œì') ||
                       headerStr.includes('ì›ì¥ëª…') ||
                       headerStr.includes('ì›ì¥') ||
                       headerStr.includes('ì‚¬ì¥') ||
                       headerStr.includes('ì‚¬ì¥ë‹˜') ||
                       headerStr.includes('ëŒ€í‘œ') ||
                       (headerStr.includes('ì´ë¦„') && (headerStr.includes('ëŒ€í‘œ') || headerStr.includes('ì›ì¥'))) ||
                       headerStr.includes('director') ||
                       headerStr.includes('owner');
            });
            
            // æŸ¥æ‰¾é™¢é•¿æ‰‹æœºå·åˆ—
            const directorMobileIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return headerStr.includes('íœ´ëŒ€í°') ||
                       headerStr.includes('í•¸ë“œí°') ||
                       headerStr.includes('ëª¨ë°”ì¼') ||
                       headerStr.includes('ì›ì¥íœ´ëŒ€í°') ||
                       headerStr.includes('ëŒ€í‘œíœ´ëŒ€í°') ||
                       headerStr.includes('mobile') ||
                       (headerStr.includes('phone') && headerStr.includes('mobile')) ||
                       headerStr.includes('cell');
            });
            
            // æŸ¥æ‰¾é‚®ç®±åˆ—
            const emailIndex = headers.findIndex(h => {
                if (!h) return false;
                const headerStr = h.toString().toLowerCase();
                return headerStr.includes('ì´ë©”ì¼') ||
                       headerStr.includes('ë©”ì¼') ||
                       headerStr.includes('email') ||
                       headerStr.includes('e-mail');
            });
            
            if (nameIndex === -1 || addressIndex === -1) {
                const missingColumns = [];
                const foundColumns = headers.filter(h => h).join('ã€');
                
                if (nameIndex === -1) missingColumns.push('æ²™é¾™åç§°åˆ—ï¼ˆå¦‚ï¼šì—…ì†Œëª…ã€ë¯¸ìš©ì‹¤ã€ìƒí˜¸ëª…ç­‰ï¼‰');
                if (addressIndex === -1) missingColumns.push('åœ°å€åˆ—ï¼ˆå¦‚ï¼šì£¼ì†Œã€ì˜ì—…ì†Œ ì£¼ì†Œã€ìœ„ì¹˜ç­‰ï¼‰');
                
                throw new Error(`Excelæ–‡ä»¶æ ¼å¼ä¸ç¬¦åˆè¦æ±‚ï¼\n\nç¼ºå°‘å¿…éœ€çš„åˆ—ï¼š${missingColumns.join('ã€')}\n\nå½“å‰ç¬¬2è¡Œçš„åˆ—æ ‡é¢˜ï¼š${foundColumns}\n\næœŸæœ›çš„Excelæ ¼å¼ï¼š\nç¬¬1è¡Œï¼šè¡¨æ ¼æ ‡é¢˜\nç¬¬2è¡Œï¼šåˆ—æ ‡é¢˜ï¼ˆå¿…é¡»åŒ…å«æ²™é¾™åç§°å’Œåœ°å€åˆ—ï¼‰\nç¬¬3è¡Œå¼€å§‹ï¼šå®é™…æ•°æ®`);
            }
            
            const salons = [];
            // ä»ç¬¬3è¡Œå¼€å§‹è¯»å–æ•°æ®ï¼ˆç´¢å¼•ä¸º2ï¼‰
            for (let i = 2; i < jsonData.length; i++) {
                const row = jsonData[i];
                if (!row || row.length === 0) continue;
                
                const name = row[nameIndex] ? row[nameIndex].toString().trim() : '';
                const address = row[addressIndex] ? row[addressIndex].toString().trim() : '';
                
                if (name && address) {
                    // æ£€æŸ¥æ˜¯å¦ä¸ºéœ€è¦æ’é™¤çš„åº—é“ºç±»å‹ï¼ˆçš®è‚¤ç®¡ç†åº—ã€ç¾ç”²åº—ç­‰ï¼‰
                    if (isExcludedBusinessType(name, address)) {
                        console.log('æ’é™¤éç¾å‘æ²™é¾™:', name);
                        continue;
                    }
                    
                    // è‡ªåŠ¨è¯†åˆ«åŒºåŸŸ
                    const detectedDistrict = autoDetectDistrict(address);
                    
                    // è§£æå…¶ä»–å­—æ®µ
                    const phone = phoneIndex !== -1 && row[phoneIndex] ? row[phoneIndex].toString().trim() : '';
                    const directorName = directorNameIndex !== -1 && row[directorNameIndex] ? row[directorNameIndex].toString().trim() : 'æœªæŒ‡å®š';
                    const directorMobile = directorMobileIndex !== -1 && row[directorMobileIndex] ? row[directorMobileIndex].toString().trim() : '';
                    const email = emailIndex !== -1 && row[emailIndex] ? row[emailIndex].toString().trim() : '';
                    
                    salons.push({
                        name: name,
                        address: address,
                        district: detectedDistrict, // æ·»åŠ è‡ªåŠ¨è¯†åˆ«çš„åŒºåŸŸ
                        businessLicense: '', // å¯ä»¥åç»­æ·»åŠ åˆ—è§£æ
                        directorName: directorName, // è§£æçš„é™¢é•¿å§“å
                        directorMobile: directorMobile, // è§£æçš„é™¢é•¿æ‰‹æœºå·
                        phone: phone, // è§£æçš„åº—é“ºç”µè¯
                        email: email, // è§£æçš„é‚®ç®±
                        responsibleEmployeeId: null
                    });
                }
            }
            
            return salons;
        }
        
        // æ˜¾ç¤ºæ‰¹é‡é¢„è§ˆ
        function displayBatchPreview() {
            const dataPreviewArea = document.getElementById('dataPreviewArea');
            const dataPreviewTable = document.getElementById('dataPreviewTable');
            const confirmBtn = document.getElementById('confirmBatchCreateBtn');
            const cancelBtn = document.getElementById('cancelBatchBtn');
            
            // æ›´æ–°è´Ÿè´£èŒå‘˜é€‰é¡¹
            updateResponsibleEmployeeOptions();
            
            // æ„å»ºè¡¨æ ¼HTML
            let tableHtml = `
                <table style="width: 100%; border-collapse: collapse; background: var(--dark-gray); table-layout: fixed; font-size: 0.75em;">
                    <colgroup>
                        <col style="width: 5%;">  <!-- é€‰æ‹©åˆ— -->
                        <col style="width: 12%;">  <!-- æ²™é¾™åç§° -->
                        <col style="width: 28%;">  <!-- åœ°å€ -->
                        <col style="width: 7%;">  <!-- åŒºåŸŸ -->
                        <col style="width: 10%;">  <!-- é™¢é•¿å§“å -->
                        <col style="width: 12%;">  <!-- é™¢é•¿æ‰‹æœº -->
                        <col style="width: 12%;">  <!-- åº—é“ºç”µè¯ -->
                        <col style="width: 8%;">  <!-- é‚®ç®± -->
                        <col style="width: 6%;">   <!-- è´Ÿè´£äºº -->
                    </colgroup>
                    <thead>
                        <tr style="background: rgba(135, 206, 235, 0.2);">
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; text-align: center; font-size: 0.8em;" data-i18n="select">é€‰æ‹©</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="salon-name">æ²™é¾™åç§°</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="salon-address">åœ°å€</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="salon-region">åŒºåŸŸ</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="director-name">é™¢é•¿å§“å</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœº</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="salon-phone">åº—é“ºç”µè¯</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="salon-email">é‚®ç®±</th>
                            <th style="padding: 4px; border: 1px solid #87CEEB; color: #87CEEB; font-size: 0.8em;" data-i18n="responsible-person">è´Ÿè´£äºº</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            batchSalonData.forEach((salon, index) => {
                const region = getDistrictDisplayText(salon.district);
                const responsibleText = salon.responsibleEmployeeId ? 
                    getEmployees().find(e => e.id === salon.responsibleEmployeeId)?.name || getText('unassigned') : 
                    getText('unassigned');
                
                tableHtml += `
                    <tr style="border-bottom: 1px solid #444;">
                        <td style="padding: 3px; border: 1px solid #444; text-align: center;">
                            <input type="checkbox" data-index="${index}" onchange="updateSelectedCount()" style="transform: scale(0.9);">
                        </td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--text-light); font-size: 0.75em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${salon.name}">${salon.name}</td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--text-light); font-size: 0.7em; line-height: 1.2; word-wrap: break-word; max-height: 32px; overflow: hidden;" title="${salon.address}">${salon.address}</td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--gold); font-size: 0.7em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${region}">${region}</td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--gold); font-size: 0.7em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${salon.directorName}">${salon.directorName}</td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--text-light); font-size: 0.7em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${salon.directorMobile || '-'}">${salon.directorMobile || '-'}</td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--text-light); font-size: 0.7em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${salon.phone || '-'}">${salon.phone || '-'}</td>
                        <td style="padding: 3px 4px; border: 1px solid #444; color: var(--text-light); font-size: 0.65em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${salon.email || '-'}">${salon.email || '-'}</td>
                        <td class="responsible-cell" style="padding: 3px 4px; border: 1px solid #444; color: #aaa; font-size: 0.65em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${responsibleText}">${responsibleText}</td>
                    </tr>
                `;
            });
            
            tableHtml += `
                    </tbody>
                </table>
            `;
            
            dataPreviewTable.innerHTML = tableHtml;
            dataPreviewArea.style.display = 'flex';
            confirmBtn.style.display = 'inline-block';
            cancelBtn.style.display = 'inline-block';
            
            updateTexts();
            updateSelectedCount();
        }
        
        // æ‰¹é‡æ•°æ®å­˜å‚¨
        let batchSalonData = [];
        
        // æ²™é¾™æ•°æ®ç®¡ç†å‡½æ•°ï¼ˆå·²åœ¨Firebaseå°è£…ä¸­é‡æ–°å®šä¹‰ï¼‰
        // function getSalons() å·²åœ¨Firebaseå°è£…ä¸­å®ç°
        
        // function saveSalons(salons) å·²åœ¨Firebaseå°è£…ä¸­å®ç°
        
        function addSalon(salon) {
            const salons = getSalons();
            salon.id = Date.now(); // ç®€å•çš„IDç”Ÿæˆ
            salon.addTime = new Date().toLocaleString('zh-CN');
            salon.joinDate = new Date(); // åŠ å…¥æ—¥æœŸï¼Œç”¨äºè®¡ç®—
            salon.transactions = []; // åˆå§‹åŒ–äº¤æ˜“è®°å½•æ•°ç»„
            salon.lastTransactionDate = null; // æœ€åä¸€æ¬¡äº¤æ˜“æ—¥æœŸ
            salons.push(salon);
            saveSalons(salons);
            
            // è®°å½•æ“ä½œå†å²
            if (typeof recordOperation === 'function') {
                recordOperation(
                    'create', 
                    'salon', 
                    salon.id, 
                    salon.name, 
                    `åˆ›å»ºæ–°æ²™é¾™ï¼š${salon.name}ï¼Œé™¢é•¿ï¼š${salon.directorName}`,
                    null,
                    salon
                );
            }
            
            return true;
        }
        
        function deleteSalon(salonId) {
            const salons = getSalons();
            const salonToDelete = salons.find(salon => salon.id === salonId);
            const filteredSalons = salons.filter(salon => salon.id !== salonId);
            saveSalons(filteredSalons);
            
            // è®°å½•æ“ä½œå†å²
            if (salonToDelete && typeof recordOperation === 'function') {
                recordOperation(
                    'delete', 
                    'salon', 
                    salonToDelete.id, 
                    salonToDelete.name, 
                    `åˆ é™¤æ²™é¾™ï¼š${salonToDelete.name}ï¼Œé™¢é•¿ï¼š${salonToDelete.directorName}`,
                    salonToDelete,
                    null
                );
            }
        }
        
        function updateSalon(updatedSalon) {
            const salons = getSalons();
            const index = salons.findIndex(salon => salon.id === updatedSalon.id);
            
            if (index !== -1) {
                const beforeData = JSON.parse(JSON.stringify(salons[index]));
                
                // ä¿ç•™åŸæœ‰çš„åˆ›å»ºæ—¶é—´å’Œäº¤æ˜“è®°å½•
                updatedSalon.addTime = salons[index].addTime;
                updatedSalon.joinDate = salons[index].joinDate;
                updatedSalon.transactions = salons[index].transactions;
                updatedSalon.lastTransactionDate = salons[index].lastTransactionDate;
                
                salons[index] = updatedSalon;
                saveSalons(salons);
                
                // è®°å½•æ“ä½œå†å²
                if (typeof recordOperation === 'function') {
                    recordOperation(
                        'edit', 
                        'salon', 
                        updatedSalon.id, 
                        updatedSalon.name, 
                        `ç¼–è¾‘æ²™é¾™ä¿¡æ¯ï¼š${updatedSalon.name}`,
                        beforeData,
                        updatedSalon
                    );
                }
                
                return true;
            }
            return false;
        }
        
        // æ˜¾ç¤ºæ²™é¾™åˆ—è¡¨ - æ”¯æŒæ’åºå’Œç­›é€‰
        function displaySalonList(filteredByDistrict = null, page = 1) {
            const salonListContainer = document.getElementById('salon-list-content');
            const salonCountText = document.getElementById('salon-count-text');
            let salons = getSalons();
            
            if (!salonListContainer) {
                console.error('salon-list-content element not found');
                return;
            }
            
            // æ ¹æ®æƒé™ç­›é€‰æ²™é¾™åˆ—è¡¨
            if (currentUser && currentUser.position === 'salesperson') {
                // ä¸šåŠ¡å‘˜åªèƒ½çœ‹åˆ°æŒ‡å®šç»™è‡ªå·±è´Ÿè´£çš„æ²™é¾™
                salons = salons.filter(salon => canSalespersonViewSalon(salon, currentUser.id));
            }
            
            // å¦‚æœæœ‰åŒºåŸŸç­›é€‰
            if (filteredByDistrict) {
                salons = salons.filter(salon => salon.district === filteredByDistrict);
            }
            
            // åº”ç”¨æ’åº
            if (currentSortField !== 'default') {
                salons = applySalonSort(salons, currentSortField, currentSortOrder);
            }
            
            // ä¿å­˜å½“å‰æ•°æ®å’Œç­›é€‰æ¡ä»¶
            currentSalonsData = salons;
            currentFilter = filteredByDistrict;
            
            // è®¡ç®—åˆ†é¡µ
            const totalItems = salons.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            currentPage = Math.min(Math.max(1, page), totalPages || 1);
            
            // è·å–å½“å‰é¡µçš„æ•°æ®
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentPageSalons = salons.slice(startIndex, endIndex);
            
            // æ›´æ–°åˆ†é¡µä¿¡æ¯
            updatePaginationInfo(currentPage, totalPages, totalItems);
            
            // æ›´æ–°æ²™é¾™æ€»æ•°æ˜¾ç¤º
            if (salonCountText) {
                if (filteredByDistrict) {
                    salonCountText.setAttribute('data-i18n', 'district-salons-count');
                    salonCountText.setAttribute('data-i18n-params', `{"count": "${salons.length}"}`);
                    salonCountText.textContent = getText('district-salons-count').replace('{count}', salons.length);
                } else {
                    salonCountText.setAttribute('data-i18n', 'total-salons-count');
                    salonCountText.setAttribute('data-i18n-params', `{"count": "${salons.length}"}`);
                    salonCountText.textContent = getText('total-salons-count').replace('{count}', salons.length);
                }
            }
            
            if (salons.length === 0) {
                let noSalonMessage = getText('no-salon-info');
                let tipMessage = getText('add-salon-tip');
                
                if (currentUser && currentUser.position === 'salesperson') {
                    noSalonMessage = getText('no-salesperson-salons');
                    tipMessage = getText('salesperson-salon-tip');
                }
                
                salonListContainer.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p>${noSalonMessage}</p>
                        <p style="font-size: 0.9em;">${tipMessage}</p>
                    </div>
                `;
                
                // æ›´æ–°æ²™é¾™æ€»æ•°æ˜¾ç¤º
                if (salonCountText) {
                    if (filteredByDistrict) {
                        salonCountText.setAttribute('data-i18n', 'district-salons-count');
                        salonCountText.setAttribute('data-i18n-params', '{"count": "0"}');
                        salonCountText.textContent = getText('district-salons-count').replace('{count}', 0);
                    } else {
                        salonCountText.setAttribute('data-i18n', 'total-salons-count');
                        salonCountText.setAttribute('data-i18n-params', '{"count": "0"}');
                        salonCountText.textContent = getText('total-salons-count').replace('{count}', 0);
                    }
                }
                return;
            }
            
            let html = `<div style="display: flex; flex-direction: column; gap: 6px; padding-bottom: 10px;">`;
            
            currentPageSalons.forEach((salon, index) => {
                const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
                
                html += `
                    <div onclick="showSalonDetail(${salon.id})" style="
                        display: flex; 
                        justify-content: space-between; 
                        align-items: center; 
                        padding: 10px 12px; 
                        background: rgba(212, 175, 55, 0.1); 
                        border-radius: 5px; 
                        border: 1px solid rgba(212, 175, 55, 0.3);
                        cursor: pointer;
                        transition: all 0.3s ease;
                        hover: background-color: rgba(212, 175, 55, 0.2);
                    " 
                    onmouseover="this.style.backgroundColor='rgba(212, 175, 55, 0.2)'" 
                    onmouseout="this.style.backgroundColor='rgba(212, 175, 55, 0.1)'">
                        <!-- å·¦ä¾§ï¼šåº—å -->
                        <div style="flex: 1; color: var(--gold); font-weight: bold; font-size: 0.9em;">
                            ${salon.name}
                        </div>
                        <!-- å³ä¾§ï¼šè´Ÿè´£èŒå‘˜ -->
                        <div style="color: #cccccc; font-size: 0.8em;">
                            ${responsibleEmployeeName}
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            salonListContainer.innerHTML = html;
        }
        
        // åº”ç”¨æ²™é¾™æ’åº
        function applySalonSort(salons, sortField, sortOrder) {
            if (sortField === 'default') {
                return salons; // è¿”å›åŸå§‹é¡ºåº
            }
            
            return salons.sort((a, b) => {
                let valueA, valueB;
                
                switch (sortField) {
                    case 'name':
                        valueA = a.name ? a.name.toLowerCase() : '';
                        valueB = b.name ? b.name.toLowerCase() : '';
                        break;
                    case 'address':
                        valueA = a.address ? a.address.toLowerCase() : '';
                        valueB = b.address ? b.address.toLowerCase() : '';
                        break;
                    case 'addTime':
                        // ç¡®ä¿æ—¥æœŸå­—ç¬¦ä¸²å¯ä»¥æ­£ç¡®æ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰æ—¶é—´åˆ™ä½¿ç”¨é»˜è®¤å€¼
                        valueA = a.addTime ? new Date(a.addTime).getTime() : 0;
                        valueB = b.addTime ? new Date(b.addTime).getTime() : 0;
                        break;
                    case 'lastTransaction':
                        // æœ€åäº¤æ˜“æ—¶é—´æ’åº
                        valueA = a.lastTransactionDate ? new Date(a.lastTransactionDate).getTime() : 0;
                        valueB = b.lastTransactionDate ? new Date(b.lastTransactionDate).getTime() : 0;
                        break;
                    case 'overdueDays':
                        // æ¬ æ¬¾å¤©æ•°æ’åº
                        valueA = calculateOverdueDays(a);
                        valueB = calculateOverdueDays(b);
                        break;
                    case 'overdueAmount':
                        // æ¬ æ¬¾é‡‘é¢æ’åº
                        valueA = calculateOverdueAmount(a);
                        valueB = calculateOverdueAmount(b);
                        break;
                    default:
                        return 0;
                }
                
                // å¤„ç†å­—ç¬¦ä¸²æ¯”è¾ƒ
                if (typeof valueA === 'string' && typeof valueB === 'string') {
                    const result = valueA.localeCompare(valueB);
                    return sortOrder === 'asc' ? result : -result;
                }
                
                // å¤„ç†æ•°å­—æ¯”è¾ƒ
                if (sortOrder === 'asc') {
                    return valueA - valueB;
                } else {
                    return valueB - valueA;
                }
            });
        }
        
        // è®¡ç®—æ¬ æ¬¾å¤©æ•°
        function calculateOverdueDays(salon) {
            if (!salon.lastTransactionDate) {
                return 0; // æ²¡æœ‰äº¤æ˜“è®°å½•
            }
            
            const lastDate = new Date(salon.lastTransactionDate);
            const today = new Date();
            const diffTime = today - lastDate;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            return Math.max(0, diffDays);
        }
        
        // è®¡ç®—æ¬ æ¬¾é‡‘é¢
        function calculateOverdueAmount(salon) {
            if (!salon.transactions || salon.transactions.length === 0) {
                return 0;
            }
            
            let totalAmount = 0;
            salon.transactions.forEach(transaction => {
                if (transaction.status === 'pending' || transaction.status === 'overdue') {
                    totalAmount += parseFloat(transaction.amount) || 0;
                }
            });
            
            return totalAmount;
        }
        
        // æ£€æŸ¥ä¸šåŠ¡å‘˜æ˜¯å¦å¯ä»¥æŸ¥çœ‹æ²™é¾™
        function canSalespersonViewSalon(salon, salespersonId) {
            // ä¸šåŠ¡å‘˜å¯ä»¥æŸ¥çœ‹åˆ†é…ç»™è‡ªå·±çš„æ²™é¾™
            return salon.responsibleEmployeeId == salespersonId;
        }
        
        // è·å–èŒå‘˜å§“å
        function getEmployeeName(employeeId) {
            if (!employeeId || employeeId === 'unassigned' || employeeId === '') {
                return getText('unassigned');
            }
            const employees = getEmployees();
            const employee = employees.find(emp => emp.id == employeeId);
            return employee ? employee.name : getText('unassigned');
        }
        
        // è·å–èŒä½æ–‡æœ¬
        function getPositionText(position) {
            switch (position) {
                case 'admin': return getText('admin');
                case 'manager': return getText('manager');
                case 'salesperson': return getText('salesperson');
                default: return position;
            }
        }
        
        // æ›´æ–°è´Ÿè´£èŒå‘˜ç­›é€‰é€‰é¡¹
        function updateResponsibleFilterOptions() {
            const selectElement = document.getElementById('responsibleFilter');
            if (!selectElement) return;
            
            const employees = getEmployees();
            let optionsHtml = `<option value="" data-i18n="all-employees">${getText('all-employees')}</option>`;
            
            employees.forEach(employee => {
                const positionText = getPositionText(employee.position);
                optionsHtml += `<option value="${employee.id}">${employee.name} - ${positionText}</option>`;
            });
            
            selectElement.innerHTML = optionsHtml;
            updateTexts(); // ç¡®ä¿ç¿»è¯‘æ›´æ–°
        }
        
        // ä¸‹è½½Excelæ¨¡æ¿
        function downloadTemplate() {
            // æ£€æŸ¥SheetJSåº“æ˜¯å¦å·²åŠ è½½
            if (typeof XLSX === 'undefined') {
                alert('Excelå¤„ç†åº“å°šæœªåŠ è½½å®Œæˆï¼Œè¯·ç¨åå†è¯•ï¼');
                return;
            }
            
            const sampleData = [
                ['ì‚´ë¡± ì •ë³´ ì¼ê´„ ì—…ë¡œë“œ í…œí”Œë¦¿', '', '', ''],  // ç¬¬1è¡Œï¼šè¡¨æ ¼æ ‡é¢˜
                ['ì—…ì†Œëª…', 'ì˜ì—…ì†Œ ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'ëŒ€í‘œìëª…'],    // ç¬¬2è¡Œï¼šåˆ—æ ‡é¢˜
                ['ë¯¸ìš©ì‹¤ A', 'ì„œìš¸ êµ¬ë¡œêµ¬ êµ¬ë¡œì¤‘ì•™ë¡œ 12', '02-1234-5678', 'ê¹€ëŒ€í‘œ'],
                ['í—¤ì–´ìƒµ B', 'ì„œìš¸ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 34', '02-2345-6789', 'ì´ì‚¬ì¥'],
                ['ë·°í‹°ìƒµ C', 'ì„œìš¸ ê¸ˆì²œêµ¬ ê¸ˆì²œë¡œ 56', '02-3456-7890', 'ë°•ì›ì¥'],
                ['ì‚´ë¡± D', 'ë¶€ì‚° í•´ìš´ëŒ€êµ¬ í•´ìš´ëŒ€ë¡œ 78', '051-4567-8901', 'ìµœì›ì¥']
            ];
            
            try {
                // åˆ›å»ºæ–°çš„å·¥ä½œç°¿
                const workbook = XLSX.utils.book_new();
                
                // åˆ›å»ºå·¥ä½œè¡¨
                const worksheet = XLSX.utils.aoa_to_sheet(sampleData);
                
                // è®¾ç½®åˆ—å®½
                worksheet['!cols'] = [
                    { width: 25 }, // ì—…ì†Œëª…/æ ‡é¢˜
                    { width: 35 }, // ì˜ì—…ì†Œ ì£¼ì†Œ
                    { width: 15 }, // ì „í™”ë²ˆí˜¸
                    { width: 15 }  // ëŒ€í‘œìëª…
                ];
                
                // åˆå¹¶ç¬¬ä¸€è¡Œçš„å•å…ƒæ ¼ä½œä¸ºæ ‡é¢˜
                worksheet['!merges'] = [
                    { s: { r: 0, c: 0 }, e: { r: 0, c: 3 } }  // åˆå¹¶ç¬¬1è¡Œçš„A1åˆ°D1å•å…ƒæ ¼
                ];
                
                // æ·»åŠ å·¥ä½œè¡¨åˆ°å·¥ä½œç°¿
                XLSX.utils.book_append_sheet(workbook, worksheet, 'æ²™é¾™ä¿¡æ¯');
                
                // ä¸‹è½½Excelæ–‡ä»¶
                XLSX.writeFile(workbook, 'salon_template_sample.xlsx');
            } catch (error) {
                // å¦‚æœExcelç”Ÿæˆå¤±è´¥ï¼Œå›é€€åˆ°CSVæ ¼å¼
                console.warn('Excelç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨CSVæ ¼å¼:', error);
                const csvData = [
                    ['ì—…ì†Œëª…', 'ì˜ì—…ì†Œ ì£¼ì†Œ', 'ì „í™”ë²ˆí˜¸', 'ëŒ€í‘œìëª…'],
                    ['ë¯¸ìš©ì‹¤ A', 'ì„œìš¸ êµ¬ë¡œêµ¬ êµ¬ë¡œì¤‘ì•™ë¡œ 12', '02-1234-5678', 'ê¹€ëŒ€í‘œ'],
                    ['í—¤ì–´ìƒµ B', 'ì„œìš¸ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 34', '02-2345-6789', 'ì´ì‚¬ì¥'],
                    ['ë·°í‹°ìƒµ C', 'ì„œìš¸ ê¸ˆì²œêµ¬ ê¸ˆì²œë¡œ 56', '02-3456-7890', 'ë°•ì›ì¥'],
                    ['ì‚´ë¡± D', 'ë¶€ì‚° í•´ìš´ëŒ€êµ¬ í•´ìš´ëŒ€ë¡œ 78', '051-4567-8901', 'ìµœì›ì¥']
                ];
                
                const csvContent = csvData.map(row => row.join(',')).join('\n');
                const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                link.setAttribute('href', url);
                link.setAttribute('download', 'salon_template_sample.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
        
        // åˆ‡æ¢å…¨é€‰
        function toggleSelectAll() {
            const selectAllCheckbox = document.getElementById('selectAll');
            // åªé€‰æ‹©æ•°æ®è¡Œçš„å¤é€‰æ¡†ï¼Œä¸åŒ…æ‹¬å…¨é€‰å¤é€‰æ¡†æœ¬èº«
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]');
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
            
            updateSelectedCount();
        }
        
        // æ›´æ–°é€‰ä¸­è®¡æ•°
        function updateSelectedCount() {
            // åªæŸ¥è¯¢æ•°æ®è¡Œçš„å¤é€‰æ¡†ï¼Œä¸åŒ…æ‹¬å…¨é€‰å¤é€‰æ¡†
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]:checked');
            const selectedCountElement = document.querySelector('[data-i18n="selected-count"]');
            
            if (selectedCountElement) {
                const count = checkboxes.length;
                const currentLanguage = localStorage.getItem('language') || 'zh';
                selectedCountElement.textContent = currentLanguage === 'ko' ? 
                    `${count}ê°œ ì‚´ë¡± ì„ íƒë¨` : 
                    `å·²é€‰æ‹© ${count} ä¸ªæ²™é¾™`;
            }
        }
        
        // åˆ†é…è´Ÿè´£äºº
        function assignResponsible() {
            const responsibleSelect = document.getElementById('responsibleEmployeeSelect');
            const responsibleId = responsibleSelect.value;
            
            if (!responsibleId) {
                alert(getText('please-select-employee'));
                return;
            }
            
            // åªæŸ¥è¯¢æ•°æ®è¡Œçš„å¤é€‰æ¡†
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert(getText('please-select-to-assign'));
                return;
            }
            
            const employees = getEmployees();
            const employee = employees.find(e => e.id === parseInt(responsibleId));
            const employeeName = employee ? employee.name : getText('unassigned');
            
            checkboxes.forEach(checkbox => {
                const row = checkbox.closest('tr');
                const index = parseInt(checkbox.dataset.index);
                
                if (batchSalonData[index]) {
                    batchSalonData[index].responsibleEmployeeId = responsibleId;
                    
                    // æ›´æ–°è¡¨æ ¼æ˜¾ç¤º
                    const responsibleCell = row.querySelector('.responsible-cell');
                    if (responsibleCell) {
                        responsibleCell.textContent = employeeName;
                        responsibleCell.style.color = '#4CAF50';
                    }
                }
            });
            
            const message = getText('assign-success').replace('{count}', checkboxes.length).replace('{name}', employeeName);
            alert(message);
        }
        
        // ç¡®è®¤æ‰¹é‡åˆ›å»º
        function confirmBatchCreate() {
            // åªæŸ¥è¯¢æ•°æ®è¡Œçš„å¤é€‰æ¡†
            const checkboxes = document.querySelectorAll('#dataPreviewTable tbody input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert(getText('please-select-to-create'));
                return;
            }
            
            let successCount = 0;
            let failCount = 0;
            
            checkboxes.forEach(checkbox => {
                const index = parseInt(checkbox.dataset.index);
                const salonData = batchSalonData[index];
                
                if (salonData) {
                    if (addSalon(salonData)) {
                        successCount++;
                    } else {
                        failCount++;
                    }
                }
            });
            
            const message = getText('batch-create-complete').replace('{success}', successCount).replace('{fail}', failCount);
            alert(message);
            
            if (successCount > 0) {
                cancelBatch();
                showContent('salon-info');
            }
        }
        
        // å–æ¶ˆæ‰¹é‡æ“ä½œ
        function cancelBatch() {
            batchSalonData = [];
            
            const dataPreviewArea = document.getElementById('dataPreviewArea');
            const confirmBtn = document.getElementById('confirmBatchCreateBtn');
            const cancelBtn = document.getElementById('cancelBatchBtn');
            const fileInput = document.getElementById('salonFileInput');
            const fileUploadIconArea = document.getElementById('fileUploadIconArea');
            const filePreviewArea = document.getElementById('filePreviewArea');
            const dataPreviewTable = document.getElementById('dataPreviewTable');
            
            if (dataPreviewArea) dataPreviewArea.style.display = 'none';
            if (confirmBtn) confirmBtn.style.display = 'none';
            if (cancelBtn) cancelBtn.style.display = 'none';
            if (dataPreviewTable) dataPreviewTable.innerHTML = '';
            
            fileInput.value = '';
            fileUploadIconArea.style.display = 'block';
            filePreviewArea.style.display = 'none';
        }
        
        // æŸ¥çœ‹æ²™é¾™äº¤æ˜“è®°å½•
        function viewTransactions(salonId) {
            // è¿™é‡Œå¯ä»¥å®ç°æŸ¥çœ‹äº¤æ˜“è®°å½•çš„é€»è¾‘
            alert(getText('view-transactions-not-implemented'));
        }
        
        // ç¼–è¾‘æ²™é¾™
        function editSalon(salonId) {
            // è¿™é‡Œå¯ä»¥å®ç°ç¼–è¾‘æ²™é¾™çš„é€»è¾‘
            alert('ç¼–è¾‘æ²™é¾™åŠŸèƒ½å°šæœªå®ç°');
        }
        
        // å¤„ç†æ–°å¢æ²™é¾™è¡¨å•æäº¤
        document.getElementById('newSalonForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const salonName = document.getElementById('salonName').value.trim();
            const salonAddress = document.getElementById('salonAddress').value.trim();
            const businessLicense = document.getElementById('businessLicense').value.trim();
            const responsibleEmployeeId = document.getElementById('responsibleEmployee').value;
            const directorName = document.getElementById('directorName').value.trim();
            const directorMobile = document.getElementById('directorMobile').value.trim();
            const salonPhone = document.getElementById('salonPhone').value.trim();
            const salonEmail = document.getElementById('salonEmail').value.trim();
            const salonNotes = document.getElementById('salonNotes') ? document.getElementById('salonNotes').value.trim() : '';
            
            if (!salonName) {
                alert(getText('salon-name-required'));
                return;
            }
            
            if (!salonAddress) {
                alert(getText('salon-address-required'));
                return;
            }
            
            // è‡ªåŠ¨è¯†åˆ«åŒºåŸŸ
            const detectedDistrict = autoDetectDistrict(salonAddress);
            
            const salon = {
                name: salonName,
                address: salonAddress,
                district: detectedDistrict, // æ·»åŠ è‡ªåŠ¨è¯†åˆ«çš„åŒºåŸŸ
                businessLicense: businessLicense,
                responsibleEmployeeId: responsibleEmployeeId || null,
                directorName: directorName,
                directorMobile: directorMobile,
                phone: salonPhone,
                email: salonEmail,
                notes: salonNotes
            };
            
            if (addSalon(salon)) {
                alert(getText('salon-added-success'));
                this.reset();
                showContent('salon-info');
            }
        });
        
        // å¤„ç†æ–°å¢èŒå‘˜è¡¨å•æäº¤
        document.getElementById('newEmployeeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const employeeName = document.getElementById('employeeName').value.trim();
            const employeePosition = document.getElementById('employeePosition').value;
            const employeeEmail = document.getElementById('employeeEmail').value.trim();
            const employeeJoinDate = document.getElementById('employeeJoinDate').value;
            const employeeMobile = document.getElementById('employeeMobile').value.trim();
            const bankName = document.getElementById('bankName').value.trim();
            const bankAccount = document.getElementById('bankAccount').value.trim();
            const accountHolder = document.getElementById('accountHolder').value.trim() || employeeName;
            const bankBranch = document.getElementById('bankBranch').value.trim();
            
            if (!employeeName) {
                alert(getText('employee-name-required'));
                return;
            }
            
            // éªŒè¯é‚®ç®±æ ¼å¼ï¼ˆå¦‚æœå¡«å†™äº†é‚®ç®±ï¼‰
            if (employeeEmail && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(employeeEmail)) {
                alert('è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼');
                return;
            }
            
            const employee = {
                name: employeeName,
                position: employeePosition || 'salesperson',
                email: employeeEmail || '',
                joinDate: employeeJoinDate || new Date().toISOString().split('T')[0],
                mobile: employeeMobile,
                addedBy: 'manual-add', // æ ‡è®°ä¸ºæ‰‹åŠ¨æ·»åŠ 
                bankInfo: {
                    bankName: bankName,
                    bankAccount: bankAccount,
                    accountHolder: accountHolder,
                    bankBranch: bankBranch
                }
            };
            
            if (addEmployee(employee)) {
                alert(getText('employee-added-success'));
                this.reset();
                // è®¾ç½®é»˜è®¤å…¥èŒæ—¥æœŸä¸ºä»Šå¤©
                document.getElementById('employeeJoinDate').valueAsDate = new Date();
                showContent('employee-list');
            } else {
                alert('æ·»åŠ å‘˜å·¥å¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        });
        
        // è®°å½•æ“ä½œå†å²
        function recordOperation(operationType, objectType, objectId, objectName, description, beforeData = null, afterData = null) {
            // è¿™é‡Œå¯ä»¥å®ç°è®°å½•æ“ä½œå†å²çš„é€»è¾‘
            console.log(`è®°å½•æ“ä½œï¼š${operationType} ${objectType} ${objectName} - ${description}`);
        }
        
        // æ˜¾ç¤ºæ“ä½œå†å²è®°å½•
        function displayOperationHistory() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºæ“ä½œå†å²è®°å½•çš„é€»è¾‘
            console.log('æ˜¾ç¤ºæ“ä½œå†å²è®°å½•');
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('operation-history-list');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-operation-history">æš‚æ— æ“ä½œå†å²è®°å½•</p>`;
                updateTexts();
            }
        }
        
        // ç­›é€‰æ“ä½œå†å²è®°å½•
        function filterOperationHistory() {
            // è¿™é‡Œå¯ä»¥å®ç°ç­›é€‰æ“ä½œå†å²è®°å½•çš„é€»è¾‘
            console.log('ç­›é€‰æ“ä½œå†å²è®°å½•');
            displayOperationHistory();
        }
        
        // æ¸…ç©ºå†å²ç­›é€‰æ¡ä»¶
        function clearHistoryFilters() {
            // è¿™é‡Œå¯ä»¥å®ç°æ¸…ç©ºå†å²ç­›é€‰æ¡ä»¶çš„é€»è¾‘
            console.log('æ¸…ç©ºå†å²ç­›é€‰æ¡ä»¶');
            
            // é‡ç½®æ‰€æœ‰ç­›é€‰æ§ä»¶
            const userFilter = document.getElementById('history-user-filter');
            const operationFilter = document.getElementById('history-operation-filter');
            const objectFilter = document.getElementById('history-object-filter');
            const startDateInput = document.getElementById('history-start-date');
            const endDateInput = document.getElementById('history-end-date');
            
            if (userFilter) userFilter.value = '';
            if (operationFilter) operationFilter.value = '';
            if (objectFilter) objectFilter.value = '';
            if (startDateInput) startDateInput.value = '';
            if (endDateInput) endDateInput.value = '';
            
            // é‡æ–°æ˜¾ç¤ºæ‰€æœ‰å†å²è®°å½•
            displayOperationHistory();
        }
        
        // æ˜¾ç¤ºå®¡è®¡æŠ¥å‘Š
        function displayAuditReport() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºå®¡è®¡æŠ¥å‘Šçš„é€»è¾‘
            console.log('æ˜¾ç¤ºå®¡è®¡æŠ¥å‘Š');
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç»Ÿè®¡æ•°æ®
            document.getElementById('total-operations-count').textContent = '0';
            document.getElementById('today-operations-count').textContent = '0';
            document.getElementById('active-users-count').textContent = '0';
            document.getElementById('critical-operations-count').textContent = '0';
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('audit-report-content');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-audit-data">æš‚æ— å®¡è®¡æ•°æ®</p>`;
                updateTexts();
            }
        }
        
        // æ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨
        function displayApprovalList() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨çš„é€»è¾‘
            console.log('æ˜¾ç¤ºå®¡æ‰¹åˆ—è¡¨');
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('approvalList');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-pending-approvals">æš‚æ— å¾…å®¡æ‰¹é¡¹ç›®</p>`;
                updateTexts();
            }
        }
        
        // æ˜¾ç¤ºä¸šç»©ç›®æ ‡
        function displayPerformanceTargets() {
            // è¿™é‡Œå¯ä»¥å®ç°æ˜¾ç¤ºä¸šç»©ç›®æ ‡çš„é€»è¾‘
            console.log('æ˜¾ç¤ºä¸šç»©ç›®æ ‡');
            
            // è®¾ç½®å½“å‰æœˆä»½
            const now = new Date();
            const currentMonth = now.getMonth() + 1; // æœˆä»½ä»0å¼€å§‹ï¼Œæ‰€ä»¥è¦+1
            const monthSelect = document.getElementById('performance-month');
            if (monthSelect) {
                monthSelect.value = currentMonth;
            }
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºå›¢é˜Ÿç›®æ ‡æ•°æ®
            document.getElementById('team-target-amount').textContent = '10,000';
            document.getElementById('team-actual-amount').textContent = '0';
            document.getElementById('team-progress-text').textContent = '0%';
            document.getElementById('team-progress-bar').style.width = '0%';
            document.getElementById('team-target-display').textContent = '10,000';
            
            // æ¨¡æ‹Ÿæ˜¾ç¤ºç©ºæ•°æ®
            const container = document.getElementById('performance-list');
            if (container) {
                container.innerHTML = `<p style="text-align: center; color: #cccccc; padding: 40px;" data-i18n="no-performance-data">æš‚æ— ä¸šç»©æ•°æ®</p>`;
                updateTexts();
            }
        }
        
        // é‡æ–°è®¡ç®—ä¸šç»©ç›®æ ‡
        function recalculatePerformanceTargets() {
            // è¿™é‡Œå¯ä»¥å®ç°é‡æ–°è®¡ç®—ä¸šç»©ç›®æ ‡çš„é€»è¾‘
            console.log('é‡æ–°è®¡ç®—ä¸šç»©ç›®æ ‡');
            alert(getText('recalculate-targets-success'));
            displayPerformanceTargets();
        }
        
        // é‡ç½®ä¸šç»©ç›®æ ‡
        function resetPerformanceTargets() {
            // è¿™é‡Œå¯ä»¥å®ç°é‡ç½®ä¸šç»©ç›®æ ‡çš„é€»è¾‘
            console.log('é‡ç½®ä¸šç»©ç›®æ ‡');
            if (confirm(getText('confirm-reset-targets'))) {
                alert(getText('reset-targets-success'));
                displayPerformanceTargets();
            }
        }
        
        // æ˜¾ç¤ºèŒå‘˜è¯¦æƒ…
        function showEmployeeDetail(employeeId) {
            const employees = getEmployees();
            const employee = employees.find(e => e.id === employeeId);
            
            if (!employee) return;
            
            // æ˜¾ç¤ºå³ä¾§è¯¦æƒ…é¢æ¿å¹¶ç§»é™¤æ»šåŠ¨æ¡ï¼ˆæŸ¥çœ‹æ¨¡å¼ä¸éœ€è¦æ»šåŠ¨æ¡ï¼‰
            const rightPanel = document.getElementById('employee-list-right');
            rightPanel.style.display = 'block';
            rightPanel.style.overflowY = 'visible';
            
            // è·å–èŒä½æ–‡æœ¬
            let positionText = '';
            switch (employee.position) {
                case 'admin': positionText = getText('admin'); break;
                case 'manager': positionText = getText('manager'); break;
                case 'salesperson': positionText = getText('salesperson'); break;
                default: positionText = employee.position;
            }
            
            // æ„å»ºè¯¦æƒ…HTML
            let detailHtml = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="color: var(--gold); margin: 0;" data-i18n="employee-detail">èŒå‘˜è¯¦æƒ…</h2>
                    <button onclick="editEmployee(${employee.id})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer;" data-i18n="edit-btn">ç¼–è¾‘</button>
                </div>
                
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="employee-name">å§“å</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.name}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="employee-position">èŒä½</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${positionText}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="login-account">ç™»å½•è´¦å·</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.username || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="mobile-number">æ‰‹æœºå·</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.mobile || '-'}</p>
                        </div>
                    </div>
                </div>
                
                <!-- é“¶è¡Œè´¦æˆ·ä¿¡æ¯ -->
                <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px;">
                    <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="bank-account-info">é“¶è¡Œè´¦æˆ·ä¿¡æ¯</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="bank-name">é“¶è¡Œåç§°</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.bankName || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="bank-account">é“¶è¡Œè´¦å·</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.bankAccount || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="account-holder">è´¦æˆ·æŒæœ‰äºº</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.accountHolder || '-'}</p>
                        </div>
                        <div>
                            <label style="color: #aaa; font-size: 0.9em;" data-i18n="bank-branch">å¤‡æ³¨</label>
                            <p style="color: var(--text-light); font-size: 1.1em; margin: 5px 0;">${employee.bankInfo?.bankBranch || '-'}</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('employee-detail-content').innerHTML = detailHtml;
            updateTexts();
        }
        
        // ä¿å­˜èŒå‘˜ç¼–è¾‘
        function saveEmployeeEdit(employeeId) {
            const updatedEmployee = {
                id: employeeId,
                name: document.getElementById('editEmployeeName').value.trim(),
                position: document.getElementById('editEmployeePosition').value,
                username: document.getElementById('editEmployeeUsername').value.trim(),
                password: document.getElementById('editEmployeePassword').value,
                mobile: document.getElementById('editEmployeeMobile').value.trim(),
                bankInfo: {
                    bankName: document.getElementById('editBankName').value.trim(),
                    bankAccount: document.getElementById('editBankAccount').value.trim(),
                    accountHolder: document.getElementById('editAccountHolder').value.trim() || document.getElementById('editEmployeeName').value.trim(),
                    bankBranch: document.getElementById('editBankBranch').value.trim()
                }
            };
            
            if (updateEmployee(updatedEmployee)) {
                alert(getText('employee-updated-success'));
                displayEmployeeList();
                showEmployeeDetail(employeeId);
            } else {
                alert(getText('username-already-exists'));
            }
        }
        
        // ç¼–è¾‘èŒå‘˜
        function editEmployee(employeeId) {
            const employees = getEmployees();
            const employee = employees.find(e => e.id === employeeId);
            
            if (!employee) return;
            
            // ä¸ºç¼–è¾‘æ¨¡å¼æ·»åŠ æ»šåŠ¨æ¡ï¼ˆç¼–è¾‘è¡¨å•å†…å®¹è¾ƒå¤šï¼Œéœ€è¦æ»šåŠ¨ï¼‰
            const rightPanel = document.getElementById('employee-list-right');
            rightPanel.style.overflowY = 'auto';
            
            // è·å–å½“å‰è¯­è¨€çš„æŒ‰é’®æ–‡æœ¬
            const cancelText = getText('cancel');
            const saveText = getText('save');
            
            // æ„å»ºç¼–è¾‘è¡¨å•HTML
            let editHtml = `
                <h2 style="color: var(--gold); margin: 0 0 20px 0;" data-i18n="edit-employee">ç¼–è¾‘èŒå‘˜</h2>
                
                <form id="editEmployeeForm" onsubmit="saveEmployeeEdit(${employeeId}); return false;">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label for="editEmployeeName" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="employee-name">å§“åï¼š</label>
                                <input type="text" id="editEmployeeName" value="${employee.name}" required style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            <div>
                                <label for="editEmployeePosition" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="employee-position">èŒä½ï¼š</label>
                                <select id="editEmployeePosition" required style="width: 100%; padding: 10px; background: var(--dark-gray); border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                                    <option value="salesperson" ${employee.position === 'salesperson' ? 'selected' : ''} data-i18n="salesperson">ä¸šåŠ¡å‘˜</option>
                                    <option value="manager" ${employee.position === 'manager' ? 'selected' : ''} data-i18n="manager">ç»ç†</option>
                                    <option value="admin" ${employee.position === 'admin' ? 'selected' : ''} data-i18n="admin">ç®¡ç†å‘˜</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label for="editEmployeeUsername" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="login-account">ç™»å½•è´¦å·ï¼š</label>
                                <input type="text" id="editEmployeeUsername" value="${employee.username || ''}" required style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            <div>
                                <label for="editEmployeePassword" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="password">å¯†ç ï¼ˆç•™ç©ºåˆ™ä¸ä¿®æ”¹ï¼‰ï¼š</label>
                                <input type="password" id="editEmployeePassword" placeholder="ç•™ç©ºåˆ™ä¸ä¿®æ”¹å¯†ç " style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                        </div>
                    </div>
                    
                    <!-- è”ç³»ä¿¡æ¯ -->
                    <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="contact-info">è”ç³»ä¿¡æ¯</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label for="editEmployeeMobile" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="mobile-number">æ‰‹æœºå·ï¼š</label>
                            <input type="tel" id="editEmployeeMobile" value="${employee.mobile || ''}" oninput="formatPhoneNumber(this)" placeholder="13812345678 æˆ– 01029968866" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                        </div>
                    </div>
                    
                    <!-- é“¶è¡Œè´¦æˆ·ä¿¡æ¯ -->
                    <div style="background: rgba(24,24,24,0.5); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="color: var(--gold); margin: 0 0 15px 0;" data-i18n="bank-account-info">é“¶è¡Œè´¦æˆ·ä¿¡æ¯</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label for="editBankName" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="bank-name">é“¶è¡Œåç§°ï¼š</label>
                                <input type="text" id="editBankName" value="${employee.bankInfo?.bankName || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                            <div>
                                <label for="editBankAccount" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="bank-account">é“¶è¡Œè´¦å·ï¼š</label>
                                <input type="text" id="editBankAccount" value="${employee.bankInfo?.bankAccount || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label for="editAccountHolder" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="account-holder">è´¦æˆ·æŒæœ‰äººï¼š</label>
                            <input type="text" id="editAccountHolder" value="${employee.bankInfo?.accountHolder || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                        </div>
                        
                        <div>
                            <label for="editBankBranch" style="display: block; color: var(--gold); margin-bottom: 5px;" data-i18n="bank-branch">å¤‡æ³¨ï¼š</label>
                            <input type="text" id="editBankBranch" value="${employee.bankInfo?.bankBranch || ''}" style="width: 100%; padding: 10px; background: transparent; border: 1px solid var(--gold); color: var(--text-light); border-radius: 5px; box-sizing: border-box;">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" onclick="showEmployeeDetail(${employeeId})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em; margin-right: 10px;">${cancelText}</button>
                        <button type="submit" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;">${saveText}</button>
                    </div>
                </form>
            `;
            
            document.getElementById('employee-detail-content').innerHTML = editHtml;
            updateTexts();
        }
        
        // æ‰‹æœºå·ç æ ¼å¼åŒ–å‡½æ•°ï¼ˆæ”¯æŒä¸­å›½å’ŒéŸ©å›½æ ¼å¼ï¼‰
        function formatPhoneNumber(input) {
            // åªä¿ç•™æ•°å­—
            let value = input.value.replace(/\D/g, '');
            
            // é™åˆ¶æœ€å¤§é•¿åº¦ä¸º11ä½
            if (value.length > 11) {
                value = value.slice(0, 11);
            }
            
            // æ™ºèƒ½æ ¼å¼åŒ–ï¼šæ ¹æ®å·ç å¼€å¤´åˆ¤æ–­æ ¼å¼
            if (value.startsWith('1') && value.length >= 3) {
                // ä¸­å›½æ‰‹æœºå·ï¼š1xxxxxxxxxx -> æ— åˆ†éš”ç¬¦
                input.value = value;
            } else if ((value.startsWith('010') || value.startsWith('011') || value.startsWith('016') || 
                      value.startsWith('017') || value.startsWith('018') || value.startsWith('019')) && value.length >= 3) {
                // éŸ©å›½æ‰‹æœºå·ï¼š010-xxxx-xxxx æ ¼å¼
                if (value.length >= 7) {
                    value = value.replace(/(\d{3})(\d{4})(\d{0,4})/, '$1-$2-$3');
                } else if (value.length >= 3) {
                    value = value.replace(/(\d{3})(\d{0,4})/, '$1-$2');
                }
                input.value = value;
            } else {
                // å…¶ä»–æƒ…å†µï¼šä¿æŒåŸæ ·æˆ–æŒ‰é»˜è®¤æ ¼å¼
                if (value.length >= 7) {
                    value = value.replace(/(\d{3})(\d{4})(\d{0,4})/, '$1-$2-$3');
                } else if (value.length >= 3) {
                    value = value.replace(/(\d{3})(\d{0,4})/, '$1-$2');
                }
                input.value = value;
            }
        }
        
        // è¥ä¸šæ‰§ç…§å·ç æ ¼å¼åŒ–å‡½æ•°
        function formatBusinessLicense(input) {
            // åªä¿ç•™æ•°å­—
            let value = input.value.replace(/\D/g, '');
            
            // é™åˆ¶æœ€å¤§é•¿åº¦ä¸º10ä½
            if (value.length > 10) {
                value = value.slice(0, 10);
            }
            
            // æ ¼å¼åŒ–ä¸º 000-00-00000
            if (value.length >= 8) {
                value = value.replace(/(\d{3})(\d{2})(\d{0,5})/, '$1-$2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d{0,2})/, '$1-$2');
            }
            
            input.value = value;
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            
            // å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
            if (isLoggedIn !== 'true') {
                window.location.href = 'login.html';
            }
        }
        
        // æ˜¾ç¤ºæ²™é¾™è¯¦æƒ…
        function showSalonDetail(salonId) {
            const salons = getSalons();
            const salon = salons.find(s => s.id === salonId);
            
            if (!salon) {
                console.error('Salon not found:', salonId);
                return;
            }
            
            const salonDetailRight = document.getElementById('salon-detail-right');
            const salonDetailContent = document.getElementById('salon-detail-content');
            
            if (!salonDetailRight || !salonDetailContent) {
                console.error('Salon detail elements not found');
                return;
            }
            
            // æ˜¾ç¤ºå³ä¾§è¯¦æƒ…é¢æ¿
            salonDetailRight.style.display = 'flex';
            
            // ç”Ÿæˆè¯¦æƒ…å†…å®¹
            const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
            
            const detailHtml = `
                <div style="width: 100%; line-height: 1.6;">
                    <!-- ç¬¬ä¸€æ’ï¼šåŸºæœ¬ä¿¡æ¯å’Œé™¢é•¿ä¿¡æ¯ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <!-- åŸºæœ¬ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-name">æ²™é¾™åç§°ï¼š</span>
                                    <span style="color: var(--text-light); font-weight: bold; font-size: 1em; line-height: 1.4;">${salon.name}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-address-label">åœ°å€ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.address || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="business-license-label">è¥ä¸šæ‰§ç…§ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.businessLicense || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="responsible-employee">è´Ÿè´£èŒå‘˜ï¼š</span>
                                    <span style="color: var(--gold); line-height: 1.4;">${responsibleEmployeeName}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é™¢é•¿ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="director-info">é™¢é•¿ä¿¡æ¯</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="director-name">é™¢é•¿å§“åï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.directorName || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœºï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.directorMobile || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-phone">åº—é“ºç”µè¯ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.phone || getText('not-specified')}</span>
                                </div>
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="salon-email">ç”µå­é‚®ç®±ï¼š</span>
                                    <span style="color: var(--text-light); line-height: 1.4;">${salon.email || getText('not-specified')}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç¬¬äºŒæ’ï¼šå…¶ä»–ä¿¡æ¯ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- å…¶ä»–ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="other-info">å…¶ä»–ä¿¡æ¯</h4>
                            <div style="display: grid; gap: 10px;">
                                <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                    <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="add-time">æ·»åŠ æ—¶é—´ï¼š</span>
                                    <span style="color: var(--text-light); font-size: 0.9em; line-height: 1.4;">${salon.addTime || getText('not-specified')}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- å¤‡æ³¨ä¿¡æ¯ -->
                        <div>
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="notes">å¤‡æ³¨</h4>
                            <div style="background: rgba(24,24,24,0.3); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 5px; padding: 12px; min-height: 80px; color: var(--text-light); font-size: 0.9em; line-height: 1.4;">
                                ${salon.notes || getText('no-notes')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            salonDetailContent.innerHTML = detailHtml;
            
            // åœ¨æ ‡é¢˜è¡Œæ·»åŠ ç¼–è¾‘æŒ‰é’®
            const actionButtons = document.getElementById('salon-action-buttons');
            if (actionButtons) {
                actionButtons.innerHTML = `
                    <button onclick="editSalonDetail(${salon.id})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="edit-btn">ç¼–è¾‘</button>
                `;
            }
            
            // æ›´æ–°ç¿»è¯‘æ–‡æœ¬
            updateTexts();
        }
        
        // ç¼–è¾‘æ²™é¾™è¯¦æƒ…
        function editSalonDetail(salonId) {
            const salons = getSalons();
            const salon = salons.find(s => s.id === salonId);
            
            if (!salon) {
                console.error('Salon not found:', salonId);
                return;
            }
            
            const salonDetailContent = document.getElementById('salon-detail-content');
            
            if (!salonDetailContent) {
                console.error('Salon detail content element not found');
                return;
            }
            
            // ç”Ÿæˆç¼–è¾‘è¡¨å•
            const editFormHtml = `
                <div class="edit-form-container" style="width: 100%; padding-bottom: 20px; line-height: 1.6;">
                    <form id="editSalonForm" style="width: 100%; box-sizing: border-box;">
                        <!-- ç¬¬ä¸€æ’ï¼šåŸºæœ¬ä¿¡æ¯å’Œé™¢é•¿ä¿¡æ¯ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                            <!-- åŸºæœ¬ä¿¡æ¯ -->
                            <div>
                                <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h4>
                                <div style="display: grid; gap: 12px;">
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-name">æ²™é¾™åç§°ï¼š</label>
                                        <input type="text" id="editSalonName" value="${salon.name}" required style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-address-label">åœ°å€ï¼š</label>
                                        <input type="text" id="editSalonAddress" value="${salon.address || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="business-license-label">è¥ä¸šæ‰§ç…§ï¼š</label>
                                        <input type="text" id="editBusinessLicense" value="${salon.businessLicense || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        " oninput="formatBusinessLicense(this)">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="responsible-employee">è´Ÿè´£èŒå‘˜ï¼š</label>
                                        <select id="editResponsibleEmployee" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                            <option value="" data-i18n="please-select-employee">è¯·é€‰æ‹©èŒå‘˜</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- é™¢é•¿ä¿¡æ¯ -->
                            <div>
                                <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px;" data-i18n="director-info">é™¢é•¿ä¿¡æ¯</h4>
                                <div style="display: grid; gap: 12px;">
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="director-name">é™¢é•¿å§“åï¼š</label>
                                        <input type="text" id="editDirectorName" value="${salon.directorName || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="director-mobile">é™¢é•¿æ‰‹æœºï¼š</label>
                                        <input type="text" id="editDirectorMobile" value="${salon.directorMobile || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        " oninput="formatPhoneNumber(this)">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-phone">åº—é“ºç”µè¯ï¼š</label>
                                        <input type="text" id="editSalonPhone" value="${salon.phone || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                    <div>
                                        <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="salon-email">ç”µå­é‚®ç®±ï¼š</label>
                                        <input type="email" id="editSalonEmail" value="${salon.email || ''}" style="
                                            width: 100%; 
                                            padding: 8px 10px; 
                                            background: rgba(24,24,24,0.8); 
                                            border: 1px solid rgba(212, 175, 55, 0.5); 
                                            color: var(--text-light); 
                                            border-radius: 5px;
                                            font-size: 0.9em;
                                            box-sizing: border-box;
                                            height: 40px;
                                        ">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç¬¬äºŒæ’ï¼šå¤‡æ³¨ä¿¡æ¯ -->
                        <div style="margin-bottom: 25px;">
                            <div>
                                <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px;" data-i18n="notes">å¤‡æ³¨</h4>
                                <div>
                                    <label style="color: #cccccc; display: block; margin-bottom: 6px; font-size: 0.9em;" data-i18n="notes">å¤‡æ³¨ï¼š</label>
                                    <textarea id="editSalonNotes" data-i18n-placeholder="notes-placeholder" placeholder="åœ¨è¿™é‡Œæ·»åŠ å¤‡æ³¨ä¿¡æ¯..." style="
                                        width: 100%; 
                                        padding: 8px 10px; 
                                        background: rgba(24,24,24,0.8); 
                                        border: 1px solid rgba(212, 175, 55, 0.5); 
                                        color: var(--text-light); 
                                        border-radius: 5px;
                                        font-size: 0.9em;
                                        box-sizing: border-box;
                                        min-height: 80px;
                                        resize: vertical;
                                        font-family: inherit;
                                    ">${salon.notes || ''}</textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            `;
            
            salonDetailContent.innerHTML = editFormHtml;
            
            // åœ¨æ ‡é¢˜è¡Œæ·»åŠ å–æ¶ˆå’Œä¿å­˜æŒ‰é’®
            const actionButtons = document.getElementById('salon-action-buttons');
            if (actionButtons) {
                actionButtons.innerHTML = `
                    <button onclick="cancelSalonEdit(${salon.id})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em; margin-right: 10px;" data-i18n="cancel">å–æ¶ˆ</button>
                    <button onclick="saveSalonEdit(${salon.id})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="save">ä¿å­˜</button>
                `;
            }
            
            // å¡«å……èŒå‘˜ä¸‹æ‹‰é€‰é¡¹
            const employees = getEmployees();
            const responsibleSelect = document.getElementById('editResponsibleEmployee');
            if (responsibleSelect) {
                employees.forEach(employee => {
                    const option = document.createElement('option');
                    option.value = employee.id;
                    option.textContent = employee.name;
                    if (employee.id == salon.responsibleEmployeeId) {
                        option.selected = true;
                    }
                    responsibleSelect.appendChild(option);
                });
            }
            
            // æ›´æ–°ç¿»è¯‘æ–‡æœ¬
            updateTexts();
        }
        
        // å–æ¶ˆæ²™é¾™ç¼–è¾‘
        function cancelSalonEdit(salonId) {
            showSalonDetail(salonId);
        }
        
        // ä¿å­˜æ²™é¾™ç¼–è¾‘
        function saveSalonEdit(salonId) {
            const form = document.getElementById('editSalonForm');
            if (!form) return;
            
            const salonName = document.getElementById('editSalonName').value.trim();
            const salonAddress = document.getElementById('editSalonAddress').value.trim();
            const businessLicense = document.getElementById('editBusinessLicense').value.trim();
            const responsibleEmployeeId = document.getElementById('editResponsibleEmployee').value;
            const salonPhone = document.getElementById('editSalonPhone').value.trim();
            const salonEmail = document.getElementById('editSalonEmail').value.trim();
            const directorName = document.getElementById('editDirectorName').value.trim();
            const directorMobile = document.getElementById('editDirectorMobile').value.trim();
            const salonNotes = document.getElementById('editSalonNotes').value.trim();
            
            if (!salonName) {
                alert(getText('salon-name-required'));
                return;
            }
            
            const salons = getSalons();
            const salonIndex = salons.findIndex(s => s.id === salonId);
            
            if (salonIndex === -1) {
                alert(getText('salon-not-found'));
                return;
            }
            
            // æ›´æ–°æ²™é¾™æ•°æ®
            salons[salonIndex] = {
                ...salons[salonIndex],
                name: salonName,
                address: salonAddress,
                businessLicense: businessLicense,
                responsibleEmployeeId: responsibleEmployeeId || null,
                phone: salonPhone,
                email: salonEmail,
                directorName: directorName,
                directorMobile: directorMobile,
                notes: salonNotes
            };
            
            // ä¿å­˜åˆ°localStorage
            saveSalons(salons);
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            alert(getText('salon-updated-success'));
            
            // åˆ·æ–°åˆ—è¡¨å’Œè¯¦æƒ…
            displaySalonList();
            showSalonDetail(salonId);
        }
        
        // æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶
        function clearAllFilters() {
            document.getElementById('salonSearchInput').value = '';
            document.getElementById('responsibleFilter').value = '';
            document.getElementById('districtFilter').value = '';
            
            // é‡æ–°æ˜¾ç¤ºæ‰€æœ‰æ²™é¾™ï¼Œé‡ç½®åˆ°ç¬¬ä¸€é¡µ
            displaySalonList(null, 1);
        }
        
        // å¢å¼ºçš„æœç´¢æ²™é¾™å‡½æ•°
        function searchSalons() {
            const searchInput = document.getElementById('salonSearchInput').value.toLowerCase();
            const responsibleFilter = document.getElementById('responsibleFilter').value;
            const districtFilter = document.getElementById('districtFilter').value;
            
            const salons = getSalons();
            let filteredSalons = salons;
            
            // æ–‡æœ¬æœç´¢ï¼šæ”¯æŒæ²™é¾™åã€é™¢é•¿åã€æ‰‹æœºå·
            if (searchInput) {
                filteredSalons = filteredSalons.filter(salon => {
                    return (salon.name && salon.name.toLowerCase().includes(searchInput)) ||
                           (salon.directorName && salon.directorName.toLowerCase().includes(searchInput)) ||
                           (salon.directorMobile && salon.directorMobile.includes(searchInput)) ||
                           (salon.phone && salon.phone.includes(searchInput));
                });
            }
            
            // è´Ÿè´£äººç­›é€‰
            if (responsibleFilter) {
                filteredSalons = filteredSalons.filter(salon => {
                    return salon.responsibleEmployeeId == responsibleFilter;
                });
            }
            
            // åŒºåŸŸç­›é€‰
            if (districtFilter) {
                filteredSalons = filteredSalons.filter(salon => {
                    // ä½¿ç”¨æ²™é¾™çš„districtå­—æ®µè¿›è¡Œç­›é€‰ï¼Œæ›´å‡†ç¡®
                    if (salon.district) {
                        return salon.district === districtFilter;
                    } else {
                        // å¦‚æœæ²¡æœ‰districtå­—æ®µï¼Œå›é€€åˆ°åœ°å€åŒ¹é…
                        if (!salon.address) return districtFilter === 'others';
                        
                        // ä½¿ç”¨åŠ¨æ€åŒºåŸŸæ•°æ®åŒ¹é…
                        try {
                            const districts = getDistricts();
                            const districtData = districts.find(d => d.code === districtFilter);
                            if (districtData) {
                                for (const keyword of districtData.keywords) {
                                    if (salon.address.toLowerCase().includes(keyword.toLowerCase())) {
                                        return true;
                                    }
                                }
                            }
                        } catch (e) {
                            console.error('è·å–åŒºåŸŸæ•°æ®å¤±è´¥:', e);
                            // å›é€€åˆ°ç¡¬ç¼–ç åŒ¹é…
                            switch (districtFilter) {
                                case 'yeongdeungpo':
                                    return salon.address.includes('ì˜ë“±í¬êµ¬') || salon.address.includes('æ°¸ç™»æµ¦åŒº');
                                case 'guro':
                                    return salon.address.includes('êµ¬ë¡œêµ¬') || salon.address.includes('ä¹è€åŒº');
                                case 'geumcheon':
                                    return salon.address.includes('ê¸ˆì²œêµ¬') || salon.address.includes('è¡¿å·êµ¬') || 
                                           salon.address.includes('è¡¿å·åŒº') || salon.address.includes('ê¸ˆì²œ') || 
                                           salon.address.includes('è¡¿å·') || salon.address.includes('Geumcheon') ||
                                           salon.address.toLowerCase().includes('geumcheon');
                                case 'yangcheon':
                                    return salon.address.includes('ì–‘ì²œêµ¬') || salon.address.includes('é˜³å·åŒº');
                                case 'gangso':
                                    return salon.address.includes('ê°•ì„œêµ¬') || salon.address.includes('æ±Ÿè¥¿åŒº');
                                case 'others':
                                    return !salon.address.includes('êµ¬ë¡œêµ¬') && !salon.address.includes('ì˜ë“±í¬êµ¬') && 
                                           !salon.address.includes('ê¸ˆì²œêµ¬') && !salon.address.includes('ì–‘ì²œêµ¬') && !salon.address.includes('ê°•ì„œêµ¬') &&
                                           !salon.address.includes('ä¹è€åŒº') && !salon.address.includes('æ°¸ç™»æµ¦åŒº') && 
                                           !salon.address.includes('è¡¿å·åŒº') && !salon.address.includes('é˜³å·åŒº') && !salon.address.includes('æ±Ÿè¥¿åŒº') &&
                                           (salon.address.includes('ì„œìš¸') || salon.address.includes('seoul') || salon.address.includes('é¦–å°”') ||
                                            salon.address.includes('ëŒ€í•œë¯¼êµ­') || salon.address.includes('í•œêµ­') || 
                                            salon.address.includes('ë¶€ì‚°') || salon.address.includes('ëŒ€êµ¬') || salon.address.includes('ì¸ì²œ'));
                                case 'overseas':
                                    return !salon.address.includes('ì„œìš¸') && !salon.address.includes('seoul') && !salon.address.includes('é¦–å°”') && 
                                           !salon.address.includes('ëŒ€í•œë¯¼êµ­') && !salon.address.includes('í•œêµ­') && 
                                           !salon.address.includes('ë¶€ì‚°') && !salon.address.includes('ëŒ€êµ¬') && !salon.address.includes('ì¸ì²œ');
                                default:
                                    return true;
                            }
                        }
                    }
                });
            }
            
            // æ›´æ–°æ˜¾ç¤º
            displayFilteredSalonList(filteredSalons);
        }
        
        // æ˜¾ç¤ºç­›é€‰åçš„æ²™é¾™åˆ—è¡¨
        function displayFilteredSalonList(salons, page = 1) {
            const salonListContainer = document.getElementById('salon-list-content');
            const salonCountText = document.getElementById('salon-count-text');
            
            if (!salonListContainer) return;
            
            // åº”ç”¨æ’åº
            if (currentSortField !== 'default') {
                salons = applySalonSort(salons, currentSortField, currentSortOrder);
            }
            
            // ä¿å­˜å½“å‰æ•°æ®å’Œç­›é€‰çŠ¶æ€
            currentSalonsData = salons;
            currentFilter = 'filtered'; // æ ‡è®°ä¸ºç­›é€‰çŠ¶æ€
            
            // è®¡ç®—åˆ†é¡µ
            const totalItems = salons.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            currentPage = Math.min(Math.max(1, page), totalPages || 1);
            
            // è·å–å½“å‰é¡µçš„æ•°æ®
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentPageSalons = salons.slice(startIndex, endIndex);
            
            // æ›´æ–°åˆ†é¡µä¿¡æ¯
            updatePaginationInfo(currentPage, totalPages, totalItems);
            
            // æ›´æ–°ç»Ÿè®¡æ•°å­—
            if (salonCountText) {
                salonCountText.textContent = getText('total-salons-count').replace('{count}', salons.length);
            }
            
            if (salons.length === 0) {
                salonListContainer.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p>${getText('no-matching-salons')}</p>
                    </div>
                `;
                return;
            }
            
            // ç”Ÿæˆåˆ—è¡¨HTML - ä½¿ç”¨ä¸æ­£å¸¸åˆ—è¡¨ç›¸åŒçš„æ ¼å¼
            let html = `<div style="display: flex; flex-direction: column; gap: 6px; padding-bottom: 10px;">`;
            
            currentPageSalons.forEach(salon => {
                const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
                
                html += `
                    <div onclick="showSalonDetail(${salon.id})" style="
                        display: flex; 
                        justify-content: space-between; 
                        align-items: center; 
                        padding: 10px 12px; 
                        background: rgba(212, 175, 55, 0.1); 
                        border-radius: 5px; 
                        border: 1px solid rgba(212, 175, 55, 0.3);
                        cursor: pointer;
                        transition: all 0.3s ease;
                        hover: background-color: rgba(212, 175, 55, 0.2);
                    " 
                    onmouseover="this.style.backgroundColor='rgba(212, 175, 55, 0.2)'" 
                    onmouseout="this.style.backgroundColor='rgba(212, 175, 55, 0.1)'">
                        <!-- å·¦ä¾§ï¼šåº—å -->
                        <div style="flex: 1; color: var(--gold); font-weight: bold; font-size: 0.9em;">
                            ${salon.name}
                        </div>
                        <!-- å³ä¾§ï¼šè´Ÿè´£èŒå‘˜ -->
                        <div style="color: #cccccc; font-size: 0.8em;">
                            ${responsibleEmployeeName}
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            salonListContainer.innerHTML = html;
        }
        
        // æ˜¾ç¤ºåˆ é™¤é¡µé¢çš„æ²™é¾™åˆ—è¡¨
        function displayDeleteSalonList(page = 1) {
            const listContainer = document.getElementById('delete-salon-list-content');
            
            if (!listContainer) {
                console.error('æ‰¾ä¸åˆ°æ²™é¾™åˆ—è¡¨å®¹å™¨ (delete-salon-list-content)');
                return;
            }
            
            console.log('=== å¼€å§‹æ˜¾ç¤ºåˆ é™¤æ²™é¾™åˆ—è¡¨ ===');
            console.log('å½“å‰ç­›é€‰çš„æ²™é¾™æ•°é‡:', deleteFilteredSalons.length);
            console.log('è¯·æ±‚æ˜¾ç¤ºç¬¬', page, 'é¡µ');
            
            const allSalons = getSalons();
            
            // è®¡ç®—åˆ†é¡µ
            const totalItems = deleteFilteredSalons.length;
            const totalPages = Math.ceil(totalItems / deleteItemsPerPage) || 1;
            deleteCurrentPage = Math.min(Math.max(1, page), totalPages);
            
            console.log('åˆ†é¡µä¿¡æ¯ - æ€»é¡¹ç›®æ•°:', totalItems, 'æ€»é¡µæ•°:', totalPages, 'å½“å‰é¡µ:', deleteCurrentPage);
            
            // è·å–å½“å‰é¡µçš„æ•°æ®
            const startIndex = (deleteCurrentPage - 1) * deleteItemsPerPage;
            const endIndex = startIndex + deleteItemsPerPage;
            const currentPageSalons = deleteFilteredSalons.slice(startIndex, endIndex);
            
            console.log('å½“å‰é¡µæ˜¾ç¤ºæ²™é¾™æ•°é‡:', currentPageSalons.length);
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateDeleteStatistics(allSalons.length, deleteFilteredSalons.length);
            
            // æ›´æ–°åˆ†é¡µä¿¡æ¯
            updateDeletePaginationInfo(deleteCurrentPage, totalPages, totalItems);
            
            if (deleteFilteredSalons.length === 0) {
                console.log('æ²¡æœ‰æ²™é¾™æ•°æ®ï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€');
                listContainer.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p data-i18n="no-salons-to-delete">æ²¡æœ‰å¯åˆ é™¤çš„æ²™é¾™</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">è¯·æ£€æŸ¥ç­›é€‰æ¡ä»¶æˆ–æ·»åŠ æ–°çš„æ²™é¾™</p>
                    </div>
                `;
                updateTexts();
                return;
            }
            
            // ç”Ÿæˆåˆ—è¡¨HTML
            let html = `<div style="display: flex; flex-direction: column; gap: 8px; padding-bottom: 20px;">`;
            
            currentPageSalons.forEach((salon, index) => {
                const isSelected = deleteSelectedSalonIds.has(salon.id);
                const responsibleEmployeeName = getEmployeeName(salon.responsibleEmployeeId);
                const districtName = getDistrictDisplayText(salon.district);
                
                html += `
                    <div style="
                        display: flex; 
                        align-items: center; 
                        padding: 12px 15px; 
                        background: ${isSelected ? 'rgba(212, 175, 55, 0.3)' : 'rgba(212, 175, 55, 0.1)'}; 
                        border-radius: 6px; 
                        border: 1px solid ${isSelected ? 'var(--gold)' : 'rgba(212, 175, 55, 0.3)'};
                        transition: all 0.3s ease;
                        margin-bottom: 2px;
                    " onmouseover="this.style.background='rgba(212, 175, 55, 0.25)'" 
                       onmouseout="this.style.background='${isSelected ? 'rgba(212, 175, 55, 0.3)' : 'rgba(212, 175, 55, 0.1)'}'">
                        
                        <!-- é€‰æ‹©æ¡† -->
                        <input type="checkbox" 
                               ${isSelected ? 'checked' : ''} 
                               onchange="toggleSalonSelection(${salon.id})"
                               style="margin-right: 15px; width: 18px; height: 18px; cursor: pointer; accent-color: var(--gold);">
                        
                        <!-- æ²™é¾™ä¿¡æ¯ - æ°´å¹³å¹¶æ’æ˜¾ç¤º -->
                        <div style="flex: 1; display: flex; align-items: center; gap: 15px; font-size: 0.85em;">
                            <div style="color: var(--gold); font-weight: bold; min-width: 120px; max-width: 120px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                    ${salon.name}
                            </div>
                            <div style="color: #cccccc; min-width: 80px; max-width: 80px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                ${salon.directorName || 'æœªè®¾ç½®'}
                            </div>
                            <div style="color: #cccccc; min-width: 100px; max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                ${salon.directorMobile || 'æ— æ‰‹æœºå·'}
                        </div>
                            <div style="color: #aaa; flex: 1; min-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                ${salon.address || 'æ— åœ°å€ä¿¡æ¯'}
                            </div>
                            <div style="color: #87CEEB; min-width: 60px; max-width: 60px; text-align: center;">
                                ${districtName}
                            </div>
                            <div style="color: #90EE90; font-weight: bold; min-width: 70px; max-width: 70px; text-align: center;">
                                ${responsibleEmployeeName}
                            </div>
                            <div style="color: #aaa; font-size: 0.8em; min-width: 80px; max-width: 80px; text-align: center;">
                                ${salon.addTime ? new Date(salon.addTime).toLocaleDateString() : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            listContainer.innerHTML = html;
            
            console.log('=== æ²™é¾™åˆ—è¡¨æ˜¾ç¤ºå®Œæˆ ===');
            
            // æ›´æ–°ç¿»è¯‘
            updateTexts();
        }
        
        // åˆ‡æ¢å•ä¸ªæ²™é¾™çš„é€‰æ‹©çŠ¶æ€
        function toggleSalonSelection(salonId) {
            if (deleteSelectedSalonIds.has(salonId)) {
                deleteSelectedSalonIds.delete(salonId);
            } else {
                deleteSelectedSalonIds.add(salonId);
            }
            updateDeleteStatistics();
            displayDeleteSalonList(deleteCurrentPage); // åˆ·æ–°æ˜¾ç¤º
        }
        
        // å…¨é€‰ç­›é€‰ç»“æœï¼ˆæ™ºèƒ½å…¨é€‰ï¼‰
        function selectAllFilteredSalons() {
            console.log('æ­£åœ¨é€‰æ‹©ç­›é€‰ç»“æœä¸­çš„æ‰€æœ‰æ²™é¾™...');
            console.log('ç­›é€‰ç»“æœæ€»æ•°:', deleteFilteredSalons.length);
            
            // é€‰æ‹©å½“å‰ç­›é€‰ç»“æœä¸­çš„æ‰€æœ‰æ²™é¾™
            deleteFilteredSalons.forEach(salon => {
                deleteSelectedSalonIds.add(salon.id);
            });
            
            console.log('å·²é€‰æ‹©æ²™é¾™æ•°é‡:', deleteSelectedSalonIds.size);
            updateDeleteStatistics();
            displayDeleteSalonList(deleteCurrentPage);
        }
        
        // å…¨é€‰æ‰€æœ‰æ²™é¾™ï¼ˆä¸å—ç­›é€‰é™åˆ¶ï¼‰
        function selectAllSalonsGlobal() {
            console.log('æ­£åœ¨é€‰æ‹©ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ²™é¾™...');
            const allSalons = getSalons();
            console.log('ç³»ç»Ÿæ€»æ²™é¾™æ•°:', allSalons.length);
            
            // é€‰æ‹©ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ²™é¾™
            allSalons.forEach(salon => {
                deleteSelectedSalonIds.add(salon.id);
            });
            
            console.log('å·²é€‰æ‹©æ²™é¾™æ•°é‡:', deleteSelectedSalonIds.size);
            updateDeleteStatistics();
            displayDeleteSalonList(deleteCurrentPage);
        }
        
        // å–æ¶ˆå…¨é€‰
        function deselectAllSalonsForDelete() {
            console.log('æ­£åœ¨å–æ¶ˆæ‰€æœ‰é€‰æ‹©...');
            deleteSelectedSalonIds.clear();
            updateDeleteStatistics();
            displayDeleteSalonList(deleteCurrentPage);
        }
        
        // æ¸…ç©ºç­›é€‰æ¡ä»¶
        function clearDeleteFilters() {
            console.log('=== æ¸…ç©ºç­›é€‰æ¡ä»¶ ===');
            
            // é‡ç½®è¾“å…¥æ¡†
            const searchInput = document.getElementById('deleteSalonSearchInput');
            const responsibleFilter = document.getElementById('deleteResponsibleFilter');
            const districtFilter = document.getElementById('deleteDistrictFilter');
            
            if (searchInput) {
                searchInput.value = '';
                console.log('å·²æ¸…ç©ºæœç´¢æ¡†');
            }
            if (responsibleFilter) {
                responsibleFilter.selectedIndex = 0;
                console.log('å·²é‡ç½®è´Ÿè´£äººç­›é€‰');
            }
            if (districtFilter) {
                districtFilter.selectedIndex = 0;
                console.log('å·²é‡ç½®åŒºåŸŸç­›é€‰');
            }
            
            // é‡æ–°è·å–æ‰€æœ‰æ²™é¾™å¹¶æ˜¾ç¤º
            const allSalons = getSalons();
            deleteFilteredSalons = [...allSalons];
            deleteCurrentPage = 1;
            
            console.log('é‡æ–°åŠ è½½æ‰€æœ‰æ²™é¾™ï¼Œå…±', deleteFilteredSalons.length, 'ä¸ª');
            
            // æ¸…ç©ºé€‰æ‹©çŠ¶æ€
            deleteSelectedSalonIds.clear();
            
            // æ˜¾ç¤ºåˆ—è¡¨
            displayDeleteSalonList(1);
            
            console.log('ç­›é€‰æ¡ä»¶å·²æ¸…ç©ºï¼Œæ˜¾ç¤º', deleteFilteredSalons.length, 'ä¸ªæ²™é¾™');
        }
        
        // æ›´æ–°åˆ é™¤é¡µé¢ç»Ÿè®¡ä¿¡æ¯
        function updateDeleteStatistics(totalSalons = null, filteredCount = null) {
            const allSalons = getSalons();
            const total = totalSalons !== null ? totalSalons : allSalons.length;
            const filtered = filteredCount !== null ? filteredCount : deleteFilteredSalons.length;
            const selected = deleteSelectedSalonIds.size;
            
            // æ›´æ–°å„ä¸ªç»Ÿè®¡å…ƒç´ 
            const totalElement = document.getElementById('delete-total-salons');
            const filteredElement = document.getElementById('delete-filtered-salons');
            const selectedElement = document.getElementById('delete-selected-salons');
            const selectedCountElement = document.getElementById('delete-selected-count');
            const statisticsElement = document.getElementById('delete-salon-statistics');
            
            if (totalElement) {
                totalElement.textContent = `ì´ ì‚´ë¡± ìˆ˜: ${total}`;
            }
            
            if (filteredElement) {
                filteredElement.textContent = `í•„í„° ê²°ê³¼: ${filtered}`;
            }
            
            if (selectedElement) {
                selectedElement.textContent = `ì„ íƒë¨: ${selected}`;
            }
            
            if (selectedCountElement) {
                selectedCountElement.textContent = `${selected} ê°œ ì‚´ë¡± ì„ íƒë¨`;
            }
            
            if (statisticsElement) {
                statisticsElement.textContent = `í•„í„° ê²°ê³¼: ${filtered} ê°œ ì‚´ë¡± í‘œì‹œ`;
            }
        }
        
        // æ›´æ–°åˆ é™¤é¡µé¢åˆ†é¡µä¿¡æ¯
        function updateDeletePaginationInfo(currentPage, totalPages, totalItems) {
            const pageInfo = document.getElementById('delete-page-info');
            const firstPageBtn = document.getElementById('delete-first-page');
            const prevPageBtn = document.getElementById('delete-prev-page');
            const nextPageBtn = document.getElementById('delete-next-page');
            const lastPageBtn = document.getElementById('delete-last-page');
            const jumpInput = document.getElementById('delete-page-jump-input');
            
            if (pageInfo) {
                pageInfo.textContent = `${currentPage} í˜ì´ì§€ / ì´ ${totalPages} í˜ì´ì§€ (${totalItems} ê°œ í•­ëª©)`;
            }
            
            if (jumpInput) {
                jumpInput.max = totalPages;
                jumpInput.placeholder = totalPages > 0 ? `1-${totalPages}` : '1';
            }
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const updateButtonState = (btn, disabled) => {
                if (btn) {
                    btn.disabled = disabled;
                    btn.style.opacity = disabled ? '0.5' : '1';
                    btn.style.cursor = disabled ? 'not-allowed' : 'pointer';
                }
            };
            
            updateButtonState(firstPageBtn, currentPage === 1);
            updateButtonState(prevPageBtn, currentPage === 1);
            updateButtonState(nextPageBtn, currentPage === totalPages);
            updateButtonState(lastPageBtn, currentPage === totalPages);
        }
        
        // åˆ é™¤é¡µé¢åˆ†é¡µå‡½æ•°
        function goToDeletePage(page) {
            displayDeleteSalonList(page);
        }
        
        function goToPrevDeletePage() {
            if (deleteCurrentPage > 1) {
                displayDeleteSalonList(deleteCurrentPage - 1);
            }
        }
        
        function goToNextDeletePage() {
            const totalPages = Math.ceil(deleteFilteredSalons.length / deleteItemsPerPage);
            if (deleteCurrentPage < totalPages) {
                displayDeleteSalonList(deleteCurrentPage + 1);
            }
        }
        
        function goToLastDeletePage() {
            const totalPages = Math.ceil(deleteFilteredSalons.length / deleteItemsPerPage);
            displayDeleteSalonList(totalPages);
        }
        
        function changeDeleteItemsPerPage() {
            const select = document.getElementById('delete-items-per-page');
            deleteItemsPerPage = parseInt(select.value);
            displayDeleteSalonList(1); // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
        }
        
        function jumpToDeletePage() {
            const input = document.getElementById('delete-page-jump-input');
            const pageNumber = parseInt(input.value);
            
            if (!pageNumber || pageNumber < 1) {
                alert('ìœ íš¨í•œ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”');
                return;
            }
            
            const totalPages = Math.ceil(deleteFilteredSalons.length / deleteItemsPerPage);
            
            if (pageNumber > totalPages) {
                alert(`í˜ì´ì§€ ë²ˆí˜¸ëŠ” ì´ í˜ì´ì§€ ìˆ˜ ${totalPages}ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
                return;
            }
            
            displayDeleteSalonList(pageNumber);
            input.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
        }
        
        function handleDeletePageJumpKeypress(event) {
            if (event.key === 'Enter') {
                jumpToDeletePage();
            }
        }
        
        // åˆ é™¤é€‰ä¸­çš„æ²™é¾™ï¼ˆé«˜çº§ç‰ˆæœ¬ï¼‰
        function deleteSelectedSalonsAdvanced() {
            if (deleteSelectedSalonIds.size === 0) {
                alert('ì‚­ì œí•  ì‚´ë¡±ì„ ì„ íƒí•˜ì„¸ìš”');
                return;
            }
            
            const selectedCount = deleteSelectedSalonIds.size;
            const confirmMessage = `${selectedCount} ê°œì˜ ì„ íƒëœ ì‚´ë¡±ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!`;
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            const salons = getSalons();
            const updatedSalons = salons.filter(salon => !deleteSelectedSalonIds.has(salon.id));
            
            saveSalons(updatedSalons);
            
            // æ¸…ç©ºé€‰æ‹©
            deleteSelectedSalonIds.clear();
            
            // åˆ·æ–°ç­›é€‰å’Œæ˜¾ç¤º
            filterSalonsForDelete();
            
            alert(`${selectedCount} ê°œì˜ ì‚´ë¡±ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤`);
        }
        
        // åˆ é™¤æ‰€æœ‰ç­›é€‰ç»“æœ
        function deleteAllFilteredSalons() {
            if (deleteFilteredSalons.length === 0) {
                alert('ì‚­ì œí•  í•„í„° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            const filteredCount = deleteFilteredSalons.length;
            const confirmMessage = `í˜„ì¬ í•„í„°ë§ëœ ${filteredCount} ê°œì˜ ì‚´ë¡±ì„ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!`;
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            const salons = getSalons();
            const filteredIds = new Set(deleteFilteredSalons.map(salon => salon.id));
            const updatedSalons = salons.filter(salon => !filteredIds.has(salon.id));
            
            saveSalons(updatedSalons);
            
            // æ¸…ç©ºé€‰æ‹©å’Œç­›é€‰
            deleteSelectedSalonIds.clear();
            clearDeleteFilters();
            
            alert(`${filteredCount} ê°œì˜ ì‚´ë¡±ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤`);
        }
        
        // åˆ é™¤å…¨éƒ¨æ²™é¾™ï¼ˆå±é™©æ“ä½œï¼‰
        function deleteAllSalonsConfirm() {
            const allSalons = getSalons();
            const totalCount = allSalons.length;
            
            if (totalCount === 0) {
                alert('ì‚­ì œí•  ì‚´ë¡±ì´ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            const firstConfirm = confirm(`ê²½ê³ : ì´ ì‘ì—…ì€ ì‹œìŠ¤í…œì—ì„œ ëª¨ë“  ${totalCount} ê°œì˜ ì‚´ë¡±ì„ ì‚­ì œí•©ë‹ˆë‹¤!\n\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
            if (!firstConfirm) return;
            
            const secondConfirm = confirm(`ë‹¤ì‹œ í™•ì¸: ì •ë§ë¡œ ëª¨ë“  ${totalCount} ê°œì˜ ì‚´ë¡±ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!`);
            if (!secondConfirm) return;
            
            saveSalons([]);
            
            // æ¸…ç©ºé€‰æ‹©å’Œç­›é€‰
            deleteSelectedSalonIds.clear();
            clearDeleteFilters();
            
            alert(`ëª¨ë“  ${totalCount} ê°œì˜ ì‚´ë¡±ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤`);
        }
        
        // æ·»åŠ è°ƒè¯•æ—¥å¿—ä»¥ä¾¿æ’æŸ¥é—®é¢˜
        console.log('åˆ é™¤æ²™é¾™é¡µé¢åŠŸèƒ½å·²é‡æ–°è®¾è®¡å®Œæˆ');
        
        // ========================================
        // äº§å“ç®¡ç†ç›¸å…³åŠŸèƒ½
        // ========================================
        
        // äº§å“æ•°æ®å­˜å‚¨å’Œç®¡ç†
        let productsData = [];
        let productCategoriesData = [];
        
        // åˆå§‹åŒ–äº§å“æ•°æ®
        function initializeProductData() {
            // åŠ è½½äº§å“åˆ†ç±»æ•°æ®
            const savedCategories = localStorage.getItem('productCategories');
            if (savedCategories) {
                productCategoriesData = JSON.parse(savedCategories);
            } else {
                // åˆ›å»ºé»˜è®¤åˆ†ç±»
                productCategoriesData = [
                    {
                        id: 1,
                        nameCN: 'æœªåˆ†ç±»',
                        nameKO: 'ë¯¸ë¶„ë¥˜',
                        code: 'uncategorized',
                        description: 'æœªåˆ†ç±»çš„äº§å“',
                        parentId: null,
                        sortOrder: 0,
                        active: true,
                        createdAt: new Date().toISOString()
                    }
                ];
                saveProductCategories();
            }
            
            // åŠ è½½äº§å“æ•°æ®
            const savedProducts = localStorage.getItem('products');
            if (savedProducts) {
                productsData = JSON.parse(savedProducts);
            } else {
                productsData = [];
            }
            
            console.log('äº§å“ç®¡ç†ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼š', productsData.length, 'ä¸ªäº§å“ï¼Œ', productCategoriesData.length, 'ä¸ªåˆ†ç±»');
        }
        
        // ä¿å­˜äº§å“æ•°æ®
        function saveProducts() {
            localStorage.setItem('products', JSON.stringify(productsData));
        }
        
        // ä¿å­˜äº§å“åˆ†ç±»æ•°æ®
        function saveProductCategories() {
            localStorage.setItem('productCategories', JSON.stringify(productCategoriesData));
        }
        
        // åŠ è½½äº§å“åˆ†ç±»åˆ°ä¸‹æ‹‰é€‰æ‹©æ¡†
        function loadProductCategories() {
            const categorySelect = document.getElementById('productCategory');
            if (!categorySelect) return;
            
            categorySelect.innerHTML = '<option value="" data-i18n="please-select-category">è¯·é€‰æ‹©äº§å“åˆ†ç±»...</option>';
            
            const categories = productCategoriesData.filter(cat => cat.active);
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.code;
                option.textContent = category.nameCN;
                categorySelect.appendChild(option);
            });
            
            updateTexts();
        }
        
        // æ›´æ–°å•ä½ç¤ºä¾‹
        function updateUnitExample() {
            const unitType = document.getElementById('unitType').value;
            const perBoxUnit = document.getElementById('perBoxUnit');
            if (perBoxUnit) {
                perBoxUnit.textContent = unitType;
            }
            calculateTotalWeight();
        }
        
        // è®¡ç®—æ€»é‡é‡
        function calculateTotalWeight() {
            const weightVolume = parseFloat(document.getElementById('weightVolume').value) || 0;
            const weightUnit = document.getElementById('weightUnit').value;
            const perBoxCount = parseInt(document.getElementById('perBoxCount').value) || 1;
            const perCaseCount = parseInt(document.getElementById('perCaseCount').value) || 1;
            const unitType = document.getElementById('unitType').value;
            
            const totalUnitsPerCase = perBoxCount * perCaseCount;
            const totalWeightPerCase = weightVolume * totalUnitsPerCase;
            
            let displayUnit = weightUnit;
            let displayWeight = totalWeightPerCase;
            
            // å•ä½è½¬æ¢
            if (weightUnit === 'g' && totalWeightPerCase >= 1000) {
                displayWeight = totalWeightPerCase / 1000;
                displayUnit = 'kg';
            } else if (weightUnit === 'ml' && totalWeightPerCase >= 1000) {
                displayWeight = totalWeightPerCase / 1000;
                displayUnit = 'L';
            }
            
            const summaryElement = document.getElementById('specificationSummary');
            if (summaryElement) {
                const currentLanguage = localStorage.getItem('language') || 'zh';
                if (currentLanguage === 'ko') {
                    summaryElement.textContent = `${unitType}ë‹¹ ${weightVolume}${weightUnit}, ë°•ìŠ¤ë‹¹ ${perBoxCount}${unitType}, ì¼€ì´ìŠ¤ë‹¹ ${perCaseCount}ë°•ìŠ¤, ì¼€ì´ìŠ¤ ì´ ì¤‘ëŸ‰ ${displayWeight.toFixed(1)}${displayUnit}`;
                } else {
                    summaryElement.textContent = `æ¯${unitType} ${weightVolume}${weightUnit}ï¼Œæ¯ç›’ ${perBoxCount}${unitType}ï¼Œæ¯ç®± ${perCaseCount}ç›’ï¼Œæ¯ç®±æ€»é‡é‡ ${displayWeight.toFixed(1)}${displayUnit}`;
                }
            }
        }
        
        // æ ¼å¼åŒ–éŸ©å…ƒä»·æ ¼
        function formatKoreanPrice(input) {
            let value = input.value.replace(/[^\d]/g, '');
            if (value) {
                value = parseInt(value).toLocaleString('ko-KR');
            }
            input.value = value;
        }
        
        // é‡ç½®äº§å“è¡¨å•
        function resetProductForm() {
            const form = document.getElementById('addProductForm');
            if (form) {
                form.reset();
                setTimeout(calculateTotalWeight, 100);
            }
        }
        
        // æ˜¾ç¤ºäº§å“åˆ—è¡¨ï¼ˆå·¦å³åˆ†æ å¸ƒå±€ï¼‰
        function displayProductList() {
            console.log('æ­£åœ¨æ˜¾ç¤ºäº§å“åˆ—è¡¨...');
            
            // ç¡®ä¿äº§å“æ•°æ®å·²åˆå§‹åŒ–
            if (!productCategoriesData || productCategoriesData.length === 0) {
                initializeProductData();
            }
            
            const container = document.getElementById('product-list-content');
            
            if (!container) {
                console.error('äº§å“åˆ—è¡¨å®¹å™¨æœªæ‰¾åˆ°');
                return;
            }
            
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            console.log('åŠ è½½çš„äº§å“æ•°é‡:', products.length);
            
            // æ›´æ–°äº§å“è®¡æ•°
            const countElement = document.getElementById('product-count-text');
            if (countElement) {
                const currentLanguage = localStorage.getItem('language') || 'zh';
                if (currentLanguage === 'ko') {
                    countElement.textContent = `ì´ ${products.length}ê°œ ì œí’ˆ`;
                } else {
                    countElement.textContent = `æ€»è®¡ ${products.length} ä¸ªäº§å“`;
                }
            }
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p data-i18n="no-products">æš‚æ— äº§å“æ•°æ®</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">
                            <span data-i18n="add-product-tip">ç‚¹å‡»</span>
                            <a href="#" onclick="showContent('add-product')" style="color: var(--gold); text-decoration: underline;">æ–°å¢äº§å“</a>
                            <span data-i18n="add-first-product">æ¥æ·»åŠ ç¬¬ä¸€ä¸ªäº§å“</span>
                        </p>
                    </div>
                `;
                updateTexts();
                return;
            }
            
            // ç”Ÿæˆå·¦ä¾§äº§å“åˆ—è¡¨
            let leftHtml = '';
            products.forEach(product => {
                const currentLanguage = localStorage.getItem('language') || 'zh';
                const statusText = product.isOnSale ? 
                    (currentLanguage === 'ko' ? 'íŒë§¤ì¤‘' : 'åœ¨å”®') : 
                    (currentLanguage === 'ko' ? 'ë‹¨ì¢…' : 'åœäº§');
                
                leftHtml += `
                    <div onclick="showProductDetail(${product.id})" style="
                        display: flex; 
                        justify-content: space-between; 
                        align-items: center; 
                        padding: 12px 15px; 
                        background: rgba(212, 175, 55, 0.1); 
                        border-radius: 5px; 
                        border: 1px solid rgba(212, 175, 55, 0.3);
                        cursor: pointer;
                        transition: all 0.3s ease;
                        margin-bottom: 6px;
                    " 
                    onmouseover="this.style.backgroundColor='rgba(212, 175, 55, 0.2)'" 
                    onmouseout="this.style.backgroundColor='rgba(212, 175, 55, 0.1)'">
                        <!-- å·¦ä¾§ï¼šäº§å“å -->
                        <div style="flex: 1; color: var(--gold); font-weight: bold; font-size: 0.9em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-right: 10px;">
                            ${product.name || 'æœªå‘½åäº§å“'}
                        </div>
                        <!-- å³ä¾§ï¼šçŠ¶æ€ -->
                        <div style="color: ${product.isOnSale ? '#4CAF50' : '#f44336'}; font-size: 0.8em; font-weight: bold;">
                            ${statusText}
                        </div>
                    </div>
                `;
            });
            
            // æ„å»ºå®Œæ•´çš„HTMLç»“æ„
            container.innerHTML = leftHtml;
            updateTexts();
        }
        
        // æ˜¾ç¤ºäº§å“è¯¦æƒ…
        function showProductDetail(productId) {
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            const product = products.find(p => p.id === productId);
            
            if (!product) {
                console.error('Product not found:', productId);
                return;
            }
            
            const productDetailRight = document.getElementById('product-detail-right');
            const productDetailContent = document.getElementById('product-detail-content');
            
            if (!productDetailRight || !productDetailContent) {
                console.error('Product detail elements not found');
                return;
            }
            
            // æ˜¾ç¤ºå³ä¾§è¯¦æƒ…é¢æ¿
            productDetailRight.style.display = 'flex';
            
            // è·å–å½“å‰è¯­è¨€
            const currentLanguage = localStorage.getItem('language') || 'zh';
            
            // è·å–äº§å“åˆ†ç±»åç§°
            let categoryName = '';
            if (product.category) {
                const categories = JSON.parse(localStorage.getItem('productCategories') || '[]');
                const category = categories.find(c => c.code === product.category);
                if (category) {
                    categoryName = currentLanguage === 'ko' ? category.nameKO : category.nameCN;
                }
            }
            
            // æ ¼å¼åŒ–ä»·æ ¼
            const formatPrice = (price) => {
                if (!price) return '0 â‚©';
                const numPrice = parseInt(price.toString().replace(/[^\d]/g, ''));
                return numPrice.toLocaleString('ko-KR') + ' â‚©';
            };
            
            // çŠ¶æ€æ–‡æœ¬
            const statusText = product.isOnSale ? 
                (currentLanguage === 'ko' ? 'íŒë§¤ì¤‘' : 'åœ¨å”®') : 
                (currentLanguage === 'ko' ? 'ë‹¨ì¢…' : 'åœäº§');
            const statusColor = product.isOnSale ? '#4CAF50' : '#f44336';
            
            // ç”Ÿæˆè¯¦æƒ…å†…å®¹
            const detailHtml = `
                <div style="width: 100%; line-height: 1.6;">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="basic-info">åŸºæœ¬ä¿¡æ¯</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="product-name">äº§å“åç§°ï¼š</span>
                                <span style="color: var(--text-light); font-weight: bold; font-size: 1em; line-height: 1.4;">${product.name || 'æœªå‘½åäº§å“'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="brand-name">å“ç‰Œåç§°ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.brandName || '-'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="product-model">å‹å·ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.model || '-'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="product-sku">è´§å·ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.sku || '-'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="product-category">äº§å“åˆ†ç±»ï¼š</span>
                                <span style="color: var(--gold); line-height: 1.4;">${categoryName || (currentLanguage === 'ko' ? 'ë¯¸ë¶„ë¥˜' : 'æœªåˆ†ç±»')}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="status">çŠ¶æ€ï¼š</span>
                                <span style="color: ${statusColor}; font-weight: bold; line-height: 1.4;">${statusText}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è§„æ ¼ä¿¡æ¯ -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="product-specifications">è§„æ ¼ä¿¡æ¯</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="unit-type">æ•°é‡å•ä½ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.unitType || '-'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="weight-volume">é‡é‡/ä½“ç§¯ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.weightVolume || 0}${product.weightUnit || 'g'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="per-box-count">æ¯ç›’æ•°é‡ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.perBoxCount || 1}${product.unitType || 'ä¸ª'}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="per-case-count">ç®±è§„ï¼š</span>
                                <span style="color: var(--text-light); line-height: 1.4;">${product.perCaseCount || 1}ç›’</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä»·æ ¼ä¿¡æ¯ -->
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="price-info">ä»·æ ¼ä¿¡æ¯</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="purchase-price">è¿›è´§ä»·ï¼š</span>
                                <span style="color: var(--gold); font-weight: bold; line-height: 1.4;">${formatPrice(product.purchasePrice)}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="wholesale-price">æ‰¹å‘ä»·ï¼š</span>
                                <span style="color: var(--gold); font-weight: bold; line-height: 1.4;">${formatPrice(product.wholesalePrice)}</span>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 4px 0;">
                                <span style="color: #cccccc; width: 100px; font-size: 0.9em; line-height: 1.4; flex-shrink: 0;" data-i18n="retail-price">é›¶å”®ä»·ï¼š</span>
                                <span style="color: var(--gold); font-weight: bold; line-height: 1.4;">${formatPrice(product.retailPrice)}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¤‡æ³¨ä¿¡æ¯ -->
                    ${product.notes ? `
                        <div style="margin-bottom: 25px;">
                            <h4 style="color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 8px; font-size: 1.1em;" data-i18n="notes">å¤‡æ³¨</h4>
                            <div style="background: rgba(24,24,24,0.3); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 5px; padding: 12px; color: var(--text-light); font-size: 0.9em; line-height: 1.4;">
                                ${product.notes}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
            
            productDetailContent.innerHTML = detailHtml;
            
            // åœ¨æ ‡é¢˜è¡Œæ·»åŠ ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®
            const actionButtons = document.getElementById('product-action-buttons');
            if (actionButtons) {
                actionButtons.innerHTML = `
                    <button onclick="editProduct(${product.id})" style="background: var(--gold); color: var(--black); border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em; margin-right: 10px;" data-i18n="edit-btn">ç¼–è¾‘</button>
                    <button onclick="deleteProduct(${product.id})" style="background: #f44336; color: white; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-size: 0.9em;" data-i18n="delete">åˆ é™¤</button>
                `;
            }
            
            // æ›´æ–°ç¿»è¯‘æ–‡æœ¬
            updateTexts();
        }
        
        // æ˜¾ç¤ºäº§å“åˆ†ç±»
        function displayProductCategories() {
            console.log('æ­£åœ¨åŠ è½½äº§å“åˆ†ç±»åˆ—è¡¨...');
            loadProductCategoriesList();
        }
        
        console.log('äº§å“ç®¡ç†åŸºç¡€åŠŸèƒ½æ¨¡å—åŠ è½½å®Œæˆ');
        
        // ========================================
        // äº§å“åˆ†ç±»é¡µé¢å¼¹çª—æ§åˆ¶å‡½æ•°
        // ========================================
        
        // æ‰“å¼€æ–°å»ºåˆ†ç±»å¼¹çª—
        function openCreateCategoryModal() {
            const modal = document.getElementById('createCategoryModal');
            if (modal) {
                modal.style.display = 'flex';
                // æ¸…ç©ºè¡¨å•
                const form = document.getElementById('createCategoryForm');
                if (form) {
                    form.reset();
                }
            }
        }
        
        // å…³é—­æ–°å»ºåˆ†ç±»å¼¹çª—
        function closeCreateCategoryModal() {
            const modal = document.getElementById('createCategoryModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // æäº¤æ–°å»ºåˆ†ç±»
        function submitCreateCategory() {
            const categoryNameCN = document.getElementById('categoryNameCN').value.trim();
            const categoryNameKO = document.getElementById('categoryNameKO').value.trim();
            const categoryDescription = document.getElementById('categoryDescription').value.trim();
            
            if (!categoryNameCN || !categoryNameKO) {
                const currentLanguage = localStorage.getItem('language') || 'zh';
                const message = currentLanguage === 'ko' ? 'ëª¨ë“  í•„ìˆ˜ í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”' : 'è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ';
                alert(message);
                return;
            }
            
            // è‡ªåŠ¨ç”Ÿæˆåˆ†ç±»ä»£ç 
            function generateCategoryCode() {
                const timestamp = Date.now().toString(36);
                const random = Math.random().toString(36).substr(2, 5);
                return `cat_${timestamp}_${random}`;
            }
            
            const categoryCode = generateCategoryCode();
            
            // åˆ›å»ºæ–°åˆ†ç±»
            const newCategory = {
                id: Date.now(),
                nameCN: categoryNameCN,
                nameKO: categoryNameKO,
                code: categoryCode,
                description: categoryDescription,
                parentId: null,
                sortOrder: productCategoriesData.length,
                active: true,
                createdAt: new Date().toISOString()
            };
            
            productCategoriesData.push(newCategory);
            saveProductCategories();
            
            // åˆ·æ–°åˆ†ç±»åˆ—è¡¨æ˜¾ç¤º
            loadProductCategoriesList();
            
            // å…³é—­å¼¹çª—
            closeCreateCategoryModal();
            
            const currentLanguage = localStorage.getItem('language') || 'zh';
            const successMessage = currentLanguage === 'ko' ? 'ë¶„ë¥˜ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!' : 'åˆ†ç±»åˆ›å»ºæˆåŠŸï¼';
            alert(successMessage);
        }
        
        // åŠ è½½äº§å“åˆ†ç±»åˆ—è¡¨
        function loadProductCategoriesList() {
            const container = document.getElementById('categoryList');
            if (!container) {
                console.error('äº§å“åˆ†ç±»å®¹å™¨æœªæ‰¾åˆ° (categoryList)');
                return;
            }
            
            // ç›´æ¥ä»localStorageè¯»å–åˆ†ç±»æ•°æ®ï¼Œç¡®ä¿æ•°æ®æ˜¯æœ€æ–°çš„
            const categories = JSON.parse(localStorage.getItem('productCategories') || '[]');
            console.log('æ­£åœ¨åŠ è½½äº§å“åˆ†ç±»åˆ—è¡¨ï¼Œåˆ†ç±»æ•°é‡:', categories.length);
            
            if (categories.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; color: #cccccc; padding: 40px;">
                        <p data-i18n="no-categories">æš‚æ— äº§å“åˆ†ç±»</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">
                            <span data-i18n="add-category-tip">ç‚¹å‡»</span>
                            <span style="color: var(--gold);">"åˆ›å»ºäº§å“åˆ†ç±»"</span>
                            <span data-i18n="add-first-category">æŒ‰é’®æ¥æ·»åŠ ç¬¬ä¸€ä¸ªåˆ†ç±»</span>
                        </p>
                    </div>
                `;
                updateTexts();
                return;
            }
            
            const currentLanguage = localStorage.getItem('language') || 'zh';
            let html = '';
            categories.forEach(category => {
                // æ ¹æ®è¯­è¨€æ˜¾ç¤ºåˆ†ç±»åç§°
                const categoryName = currentLanguage === 'ko' ? 
                    (category.nameKO || 'ì´ë¦„ ì—†ëŠ” ë¶„ë¥˜') :
                    (category.nameCN || 'æœªå‘½ååˆ†ç±»');
                
                // æ ¹æ®è¯­è¨€æ˜¾ç¤ºåˆ›å»ºæ—¶é—´æ ‡ç­¾
                const createdTimeLabel = currentLanguage === 'ko' ? 'ìƒì„± ì‹œê°„' : 'åˆ›å»ºæ—¶é—´';
                
                // æ ¹æ®è¯­è¨€æ˜¾ç¤ºæè¿°æ ‡ç­¾
                const descriptionLabel = currentLanguage === 'ko' ? 'ì„¤ëª…' : 'æè¿°';
                
                html += `
                    <div style="
                        padding: 15px;
                        margin-bottom: 15px;
                        background: rgba(212, 175, 55, 0.1);
                        border: 1px solid rgba(212, 175, 55, 0.3);
                        border-radius: 8px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(212, 175, 55, 0.15)'" onmouseout="this.style.background='rgba(212, 175, 55, 0.1)'">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: ${category.description ? '15px' : '0'};">
                            <div style="flex: 1;">
                                <h3 style="color: var(--gold); margin: 0; font-size: 1.1em;">${categoryName}</h3>
                                <p style="color: #cccccc; margin: 5px 0 0 0; font-size: 0.9em;"><strong>${createdTimeLabel}ï¼š</strong>${category.createdAt ? new Date(category.createdAt).toLocaleDateString() : '-'}</p>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button onclick="editProductCategory(${category.id})" style="background: var(--gold); color: var(--black); border: none; padding: 5px 12px; border-radius: 5px; cursor: pointer; font-size: 0.8em;" data-i18n="edit-btn">ç¼–è¾‘</button>
                                <button onclick="deleteProductCategory(${category.id}, '${categoryName}')" style="background: #f44336; color: white; border: none; padding: 5px 12px; border-radius: 5px; cursor: pointer; font-size: 0.8em;" data-i18n="delete">åˆ é™¤</button>
                            </div>
                        </div>
                        ${category.description ? `
                            <div style="padding-top: 10px; border-top: 1px solid rgba(212, 175, 55, 0.2);">
                                <strong style="color: #FFB6C1;">${descriptionLabel}ï¼š</strong>
                                <span style="color: #cccccc; font-size: 0.9em;">${category.description}</span>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html;
            updateTexts();
        }
        
        console.log('äº§å“åˆ†ç±»å¼¹çª—æ§åˆ¶å‡½æ•°åŠ è½½å®Œæˆ');
        
        // ========================================
        // ç¼ºå¤±çš„äº§å“ç®¡ç†å‡½æ•°
        // ========================================
        
        // ç¼–è¾‘äº§å“å‡½æ•°
        function editProduct(productId) {
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            const product = products.find(p => p.id === productId);
            
            if (!product) {
                alert('äº§å“ä¸å­˜åœ¨');
                return;
            }
            
            // è¿™é‡Œå¯ä»¥å®ç°äº§å“ç¼–è¾‘çš„é€»è¾‘
            alert(`ç¼–è¾‘äº§å“åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­\näº§å“ID: ${productId}\näº§å“åç§°: ${product.name}`);
        }
        
        // åˆ é™¤äº§å“å‡½æ•°
        function deleteProduct(productId) {
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            const product = products.find(p => p.id === productId);
            
            if (!product) {
                alert('äº§å“ä¸å­˜åœ¨');
                return;
            }
            
            const currentLanguage = localStorage.getItem('language') || 'zh';
            const confirmMessage = currentLanguage === 'ko' ? 
                `ì œí’ˆ "${product.name}"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!` :
                `ç¡®å®šè¦åˆ é™¤äº§å“ "${product.name}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`;
            
            if (confirm(confirmMessage)) {
                const updatedProducts = products.filter(p => p.id !== productId);
                localStorage.setItem('products', JSON.stringify(updatedProducts));
                
                // éšè—å³ä¾§è¯¦æƒ…é¢æ¿
                const productDetailRight = document.getElementById('product-detail-right');
                if (productDetailRight) {
                    productDetailRight.style.display = 'none';
                }
                
                // é‡æ–°åŠ è½½äº§å“åˆ—è¡¨
                displayProductList();
                
                const successMessage = currentLanguage === 'ko' ? 'ì œí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'äº§å“åˆ é™¤æˆåŠŸï¼';
                alert(successMessage);
            }
        }
        
        // ç¼–è¾‘äº§å“åˆ†ç±»å‡½æ•°
        function editProductCategory(categoryId) {
            const categories = JSON.parse(localStorage.getItem('productCategories') || '[]');
            const category = categories.find(c => c.id === categoryId);
            
            if (!category) {
                alert('åˆ†ç±»ä¸å­˜åœ¨');
                return;
            }
            
            // è¿™é‡Œå¯ä»¥å®ç°åˆ†ç±»ç¼–è¾‘çš„é€»è¾‘
            alert(`ç¼–è¾‘åˆ†ç±»åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­\nåˆ†ç±»ID: ${categoryId}\nåˆ†ç±»åç§°: ${category.nameCN}`);
        }
        
        // åˆ é™¤äº§å“åˆ†ç±»å‡½æ•°
        function deleteProductCategory(categoryId, categoryName) {
            const categories = JSON.parse(localStorage.getItem('productCategories') || '[]');
            const category = categories.find(c => c.id === categoryId);
            
            if (!category) {
                alert('åˆ†ç±»ä¸å­˜åœ¨');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰äº§å“ä½¿ç”¨äº†è¿™ä¸ªåˆ†ç±»
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            const productsUsingCategory = products.filter(p => p.category === category.code);
            
            if (productsUsingCategory.length > 0) {
                const currentLanguage = localStorage.getItem('language') || 'zh';
                const message = currentLanguage === 'ko' ? 
                    `ì´ ë¶„ë¥˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ${productsUsingCategory.length}ê°œì˜ ì œí’ˆì´ ìˆìŠµë‹ˆë‹¤. ë¶„ë¥˜ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.` :
                    `è¿˜æœ‰ ${productsUsingCategory.length} ä¸ªäº§å“æ­£åœ¨ä½¿ç”¨æ­¤åˆ†ç±»ï¼Œæ— æ³•åˆ é™¤ï¼`;
                alert(message);
                return;
            }
            
            const currentLanguage = localStorage.getItem('language') || 'zh';
            const confirmMessage = currentLanguage === 'ko' ? 
                `ë¶„ë¥˜ "${categoryName}"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!` :
                `ç¡®å®šè¦åˆ é™¤åˆ†ç±» "${categoryName}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`;
            
            if (confirm(confirmMessage)) {
                const updatedCategories = categories.filter(c => c.id !== categoryId);
                localStorage.setItem('productCategories', JSON.stringify(updatedCategories));
                
                // é‡æ–°åŠ è½½åˆ†ç±»åˆ—è¡¨
                loadProductCategoriesList();
                
                const successMessage = currentLanguage === 'ko' ? 'ë¶„ë¥˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'åˆ†ç±»åˆ é™¤æˆåŠŸï¼';
                alert(successMessage);
            }
        }
        
        // åˆ é™¤åŒºåŸŸ
        function deleteDistrict(districtCode, districtName, salonCount) {
            const currentLanguage = localStorage.getItem('language') || 'zh';
            
            let confirmMessage = getText('confirm-delete-district') + '\n' + getText('delete-district-warning');
            if (salonCount > 0) {
                const salonWarning = currentLanguage === 'ko' ? 
                    `\n\nê²½ê³ : ì´ ì§€ì—­ì—ëŠ” ${salonCount}ê°œì˜ ì‚´ë¡±ì´ ìˆìŠµë‹ˆë‹¤.` :
                    `\n\nè­¦å‘Šï¼šæ­¤åŒºåŸŸä¸‹æœ‰ ${salonCount} ä¸ªæ²™é¾™ã€‚`;
                confirmMessage += salonWarning;
            }
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            const districts = getDistricts();
            const updatedDistricts = districts.filter(d => d.code !== districtCode);
            
            // æ›´æ–°æ‰€æœ‰ä½¿ç”¨è¯¥åŒºåŸŸçš„æ²™é¾™ä¸º"å…¶ä»–åœ°åŒº"
            if (salonCount > 0) {
                const salons = getSalons();
                const updatedSalons = salons.map(salon => {
                    if (salon.district === districtCode) {
                        return { ...salon, district: 'others' };
                    }
                    return salon;
                });
                localStorage.setItem('salons', JSON.stringify(updatedSalons));
            }
            
            saveDistricts(updatedDistricts);
            loadDistrictList();
            
            alert(getText('district-deleted-success'));
        }
        
        // å…³é—­åŒºåŸŸå¯¹è¯æ¡†
        function closeDistrictDialog() {
            const dialog = document.getElementById('district-dialog');
            if (dialog) {
                dialog.style.display = 'none';
            }
        }
        
        // ä¿å­˜åŒºåŸŸ
        function saveDistrict(event) {
            event.preventDefault();
            
            const code = document.getElementById('districtCode').value.trim();
            const nameCn = document.getElementById('districtNameCn').value.trim();
            const nameKr = document.getElementById('districtNameKr').value.trim();
            const keywordsText = document.getElementById('districtKeywords').value.trim();
            
            if (!code || !nameCn || !nameKr) {
                alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ');
                return;
            }
            
            // è§£æå…³é”®è¯
            const keywords = keywordsText ? keywordsText.split(',').map(k => k.trim()).filter(k => k) : [];
            
            const districts = getDistricts();
            const isEditing = document.getElementById('districtCode').hasAttribute('readonly');
            
            // æ£€æŸ¥ä»£ç æ˜¯å¦å·²å­˜åœ¨ï¼ˆæ–°å¢æ—¶ï¼‰
            if (!isEditing && districts.find(d => d.code === code)) {
                alert(getText('district-code-exists'));
                return;
            }
            
            const newDistrict = {
                code: code,
                nameCn: nameCn,
                nameKr: nameKr,
                keywords: keywords
            };
            
            let updatedDistricts;
            if (isEditing) {
                // ç¼–è¾‘æ¨¡å¼
                updatedDistricts = districts.map(d => d.code === code ? newDistrict : d);
                alert(getText('district-updated-success'));
            } else {
                // æ–°å¢æ¨¡å¼
                updatedDistricts = [...districts, newDistrict];
                alert(getText('district-added-success'));
            }
            
            saveDistricts(updatedDistricts);
            loadDistrictList();
            closeDistrictDialog();
        }
        
        // é‡ç½®ä¸ºé»˜è®¤åŒºåŸŸ
        function resetToDefaultDistricts() {
            const currentLanguage = localStorage.getItem('language') || 'zh';
            const confirmMessage = currentLanguage === 'ko' ? 
                'ëª¨ë“  ì‚¬ìš©ì ì •ì˜ ì§€ì—­ì„ ì‚­ì œí•˜ê³  ê¸°ë³¸ ì§€ì—­ìœ¼ë¡œ ì¬ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' :
                'ç¡®å®šè¦åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰åŒºåŸŸå¹¶é‡ç½®ä¸ºé»˜è®¤åŒºåŸŸå—ï¼Ÿ';
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            localStorage.removeItem('customDistricts');
            getDistricts(); // è¿™ä¼šé‡æ–°ä¿å­˜é»˜è®¤åŒºåŸŸ
            loadDistrictList();
            
            const successMessage = currentLanguage === 'ko' ? 
                'ê¸°ë³¸ ì§€ì—­ìœ¼ë¡œ ì„±ê³µì ìœ¼ë¡œ ì¬ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' :
                'å·²æˆåŠŸé‡ç½®ä¸ºé»˜è®¤åŒºåŸŸ';
            alert(successMessage);
        }
        
        // å¯¼å‡ºåŒºåŸŸé…ç½®
        function exportDistrictConfig() {
            const districts = getDistricts();
            const configData = {
                version: '1.0',
                exportTime: new Date().toISOString(),
                districts: districts
            };
            
            const dataStr = JSON.stringify(configData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `district-config-${new Date().toISOString().slice(0, 10)}.json`;
            link.click();
        }
        
        // å¯¼å…¥åŒºåŸŸé…ç½®
        function importDistrictConfig() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const configData = JSON.parse(e.target.result);
                        
                        if (!configData.districts || !Array.isArray(configData.districts)) {
                            throw new Error('Invalid configuration format');
                        }
                        
                        // éªŒè¯æ¯ä¸ªåŒºåŸŸçš„æ•°æ®ç»“æ„
                        for (const district of configData.districts) {
                            if (!district.code || !district.nameCn || !district.nameKr) {
                                throw new Error('Missing required fields in district data');
                            }
                        }
                        
                        const currentLanguage = localStorage.getItem('language') || 'zh';
                        const confirmMessage = currentLanguage === 'ko' ? 
                            `${configData.districts.length}ê°œì˜ ì§€ì—­ì„ ê°€ì ¸ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? ê¸°ì¡´ ì§€ì—­ì´ ëŒ€ì²´ë©ë‹ˆë‹¤.` :
                            `ç¡®å®šè¦å¯¼å…¥ ${configData.districts.length} ä¸ªåŒºåŸŸå—ï¼Ÿè¿™å°†æ›¿æ¢ç°æœ‰åŒºåŸŸã€‚`;
                        
                        if (confirm(confirmMessage)) {
                            saveDistricts(configData.districts);
                            loadDistrictList();
                            alert(getText('config-imported-success'));
                        }
                        
                    } catch (error) {
                        console.error('å¯¼å…¥é…ç½®å¤±è´¥:', error);
                        alert(getText('invalid-district-config'));
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // ==================== ç§»åŠ¨ç«¯ä¼˜åŒ–åŠŸèƒ½ ====================
        
        // ç§»åŠ¨ç«¯ä¼˜åŒ–åˆå§‹åŒ–
        function initMobileOptimization() {
            // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                console.log('æ£€æµ‹åˆ°ç§»åŠ¨è®¾å¤‡ï¼Œå¯ç”¨ç§»åŠ¨ç«¯ä¼˜åŒ–');
                
                // ç¦ç”¨åŒå‡»ç¼©æ”¾
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function(event) {
                    const now = (new Date()).getTime();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);
                
                // å¤„ç†è½¯é”®ç›˜å¼¹å‡ºæ—¶çš„ç•Œé¢è°ƒæ•´
                let originalViewportHeight = window.innerHeight;
                
                window.addEventListener('resize', function() {
                    const currentViewportHeight = window.innerHeight;
                    const sidebar = document.querySelector('.sidebar');
                    const mainContent = document.querySelector('.main-content');
                    
                    if (currentViewportHeight < originalViewportHeight * 0.75) {
                        // è½¯é”®ç›˜å¼¹å‡ºæ—¶
                        if (sidebar && sidebar.classList.contains('active')) {
                            toggleMobileMenu(); // å…³é—­ä¾§è¾¹æ 
                        }
                    }
                });
                
                // å¤„ç†è¾“å…¥æ¡†ç„¦ç‚¹ï¼Œé˜²æ­¢é¡µé¢è·³åŠ¨
                const inputs = document.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.addEventListener('focus', function() {
                        setTimeout(() => {
                            this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }, 300);
                    });
                    
                    // ç§»åŠ¨ç«¯è¾“å…¥æ¡†å¤±ç„¦æ—¶æ”¶èµ·é”®ç›˜
                    input.addEventListener('blur', function() {
                        setTimeout(() => {
                            window.scrollTo(0, 0);
                        }, 100);
                    });
                });
                
                // ä¼˜åŒ–è§¦æ‘¸åé¦ˆ
                document.addEventListener('touchstart', function() {}, { passive: true });
                
                // å¤„ç†å±å¹•æ—‹è½¬
                window.addEventListener('orientationchange', function() {
                    setTimeout(() => {
                        originalViewportHeight = window.innerHeight;
                        
                        // å¦‚æœä¾§è¾¹æ æ˜¯æ‰“å¼€çš„ï¼Œé‡æ–°è°ƒæ•´
                        const sidebar = document.querySelector('.sidebar');
                        if (sidebar && sidebar.classList.contains('active')) {
                            sidebar.style.height = window.innerHeight + 'px';
                        }
                        
                        // é‡æ–°åˆå§‹åŒ–ç²’å­æ•ˆæœï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                        if (window.tsParticles) {
                            window.tsParticles.load('tsparticles', {
                                particles: {
                                    number: { value: window.innerWidth < 768 ? 50 : 100 },
                                    color: { value: '#D4AF37' },
                                    shape: { type: 'circle' },
                                    opacity: { value: window.innerWidth < 768 ? 0.3 : 0.5 },
                                    size: { value: { min: 1, max: 3 } },
                                    move: {
                                        enable: true,
                                        speed: 1,
                                        direction: 'none',
                                        random: true,
                                        straight: false,
                                        out_mode: 'out',
                                        bounce: false,
                                    }
                                },
                                interactivity: {
                                    detect_on: 'canvas',
                                    events: {
                                        onhover: { enable: !isMobile, mode: 'repulse' },
                                        onclick: { enable: true, mode: 'push' },
                                        resize: true
                                    },
                                    modes: {
                                        repulse: { distance: 100, duration: 0.4 },
                                        push: { particles_nb: 4 }
                                    }
                                },
                                retina_detect: true
                            });
                        }
                    }, 500);
                });
                
                // ä¼˜åŒ–ä¾§è¾¹æ åœ¨ç§»åŠ¨ç«¯çš„è¡Œä¸º
                const sidebar = document.querySelector('.sidebar');
                if (sidebar) {
                    // æ·»åŠ é®ç½©å±‚
                    const overlay = document.createElement('div');
                    overlay.className = 'mobile-overlay';
                    overlay.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.5);
                        z-index: 999;
                        display: none;
                        opacity: 0;
                        transition: opacity 0.3s ease;
                    `;
                    
                    overlay.addEventListener('click', function() {
                        toggleMobileMenu();
                    });
                    
                    document.body.appendChild(overlay);
                    
                    // ä¿®æ”¹toggleMobileMenuå‡½æ•°ä»¥æ”¯æŒé®ç½©å±‚
                    const originalToggleMobileMenu = window.toggleMobileMenu;
                    window.toggleMobileMenu = function() {
                        const sidebar = document.querySelector('.sidebar');
                        const overlay = document.querySelector('.mobile-overlay');
                        
                        if (sidebar) {
                            const isActive = sidebar.classList.contains('active');
                            
                            if (isActive) {
                                // å…³é—­ä¾§è¾¹æ 
                                sidebar.classList.remove('active');
                                if (overlay) {
                                    overlay.style.opacity = '0';
                                    setTimeout(() => {
                                        overlay.style.display = 'none';
                                    }, 300);
                                }
                            } else {
                                // æ‰“å¼€ä¾§è¾¹æ 
                                sidebar.classList.add('active');
                                if (overlay) {
                                    overlay.style.display = 'block';
                                    setTimeout(() => {
                                        overlay.style.opacity = '1';
                                    }, 10);
                                }
                            }
                        }
                    };
                }
                
                // ç§»åŠ¨ç«¯è¡¨æ ¼ä¼˜åŒ–
                const tables = document.querySelectorAll('table');
                tables.forEach(table => {
                    const wrapper = document.createElement('div');
                    wrapper.style.cssText = `
                        overflow-x: auto;
                        -webkit-overflow-scrolling: touch;
                        border-radius: 8px;
                        border: 1px solid rgba(212,175,55,0.2);
                    `;
                    
                    table.parentNode.insertBefore(wrapper, table);
                    wrapper.appendChild(table);
                });
                
                // ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–
                document.addEventListener('scroll', function() {
                    // èŠ‚æµæ»šåŠ¨äº‹ä»¶
                    clearTimeout(window.scrollTimeout);
                    window.scrollTimeout = setTimeout(() => {
                        // æ»šåŠ¨æ—¶éšè—/æ˜¾ç¤ºè¯­è¨€åˆ‡æ¢å™¨
                        const languageSwitcher = document.querySelector('.language-switcher');
                        if (languageSwitcher) {
                            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                            if (scrollTop > 100) {
                                languageSwitcher.style.opacity = '0.7';
                            } else {
                                languageSwitcher.style.opacity = '1';
                            }
                        }
                    }, 100);
                }, { passive: true });
                
                // ç§»åŠ¨ç«¯æ‰‹åŠ¿æ”¯æŒ
                let startX, startY, distX, distY;
                
                document.addEventListener('touchstart', function(e) {
                    const touch = e.touches[0];
                    startX = touch.clientX;
                    startY = touch.clientY;
                }, { passive: true });
                
                document.addEventListener('touchmove', function(e) {
                    if (!startX || !startY) return;
                    
                    const touch = e.touches[0];
                    distX = touch.clientX - startX;
                    distY = touch.clientY - startY;
                }, { passive: true });
                
                document.addEventListener('touchend', function(e) {
                    if (!startX || !startY) return;
                    
                    // å³æ»‘æ‰‹åŠ¿æ‰“å¼€ä¾§è¾¹æ 
                    if (distX > 50 && Math.abs(distY) < 100 && startX < 50) {
                        const sidebar = document.querySelector('.sidebar');
                        if (sidebar && !sidebar.classList.contains('active')) {
                            toggleMobileMenu();
                        }
                    }
                    
                    // å·¦æ»‘æ‰‹åŠ¿å…³é—­ä¾§è¾¹æ 
                    if (distX < -50 && Math.abs(distY) < 100) {
                        const sidebar = document.querySelector('.sidebar');
                        if (sidebar && sidebar.classList.contains('active')) {
                            toggleMobileMenu();
                        }
                    }
                    
                    // é‡ç½®å˜é‡
                    startX = startY = distX = distY = null;
                }, { passive: true });
            }
        }
        
        // æ·»åŠ ç§»åŠ¨ç«¯ç‰¹å®šçš„æ ·å¼å¤„ç†
        function addMobileStyles() {
            const style = document.createElement('style');
            style.textContent = `
                /* ç§»åŠ¨ç«¯ç‰¹å®šæ ·å¼è¡¥å…… */
                @media screen and (max-width: 768px) {
                    /* ä¼˜åŒ–ç²’å­æ•ˆæœæ€§èƒ½ */
                    #tsparticles {
                        opacity: 0.3;
                    }
                    
                    /* ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ */
                    * {
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                    }
                    
                    /* ç§»åŠ¨ç«¯é®ç½©å±‚ */
                    .mobile-overlay {
                        backdrop-filter: blur(2px);
                        -webkit-backdrop-filter: blur(2px);
                    }
                }
                
                @media screen and (max-width: 480px) {
                    /* è¿›ä¸€æ­¥ä¼˜åŒ–å°å±å¹• */
                    #tsparticles {
                        opacity: 0.2;
                    }
                    
                    /* ä¼˜åŒ–è¡¨æ ¼æ˜¾ç¤º */
                    .employee-table, .salon-table, .product-table {
                        min-width: 100%;
                        white-space: nowrap;
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°åˆå§‹åŒ–ç§»åŠ¨ç«¯ä¼˜åŒ–
        function reinitializeMobileFeatures() {
            // é‡æ–°ç»‘å®šåŠ¨æ€æ·»åŠ çš„å…ƒç´ çš„è§¦æ‘¸äº‹ä»¶
            const newButtons = document.querySelectorAll('button:not([data-mobile-optimized])');
            newButtons.forEach(button => {
                button.setAttribute('data-mobile-optimized', 'true');
                button.addEventListener('touchstart', function() {}, { passive: true });
            });
            
            // é‡æ–°ç»‘å®šæ–°è¾“å…¥æ¡†çš„äº‹ä»¶
            const newInputs = document.querySelectorAll('input:not([data-mobile-optimized]), select:not([data-mobile-optimized]), textarea:not([data-mobile-optimized])');
            newInputs.forEach(input => {
                input.setAttribute('data-mobile-optimized', 'true');
                input.addEventListener('focus', function() {
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                });
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œç§»åŠ¨ç«¯ä¼˜åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initMobileOptimization();
            addMobileStyles();
        });
        
        // å¦‚æœDOMå·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                initMobileOptimization();
                addMobileStyles();
            });
        } else {
            initMobileOptimization();
            addMobileStyles();
        }
        
        // ç›‘å¬å†…å®¹å˜åŒ–ï¼Œé‡æ–°åˆå§‹åŒ–ç§»åŠ¨ç«¯ç‰¹æ€§
        const observer = new MutationObserver(function(mutations) {
            let shouldReinitialize = false;
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    shouldReinitialize = true;
                }
            });
            
            if (shouldReinitialize) {
                setTimeout(reinitializeMobileFeatures, 100);
            }
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
        
    </script>
</body>
</html> 